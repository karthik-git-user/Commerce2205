import{a as oe,b as He,c as rt,d as io,e as vt,f as he,g as no}from"./chunk-R4PM3MA2.js";import{y as to}from"./chunk-IFXYJG2Y.js";import{e as eo}from"./chunk-WJDIKS7T.js";import"./chunk-TXT7M6TI.js";import"./chunk-NGWXCVSQ.js";import{a as on,b as Zt}from"./chunk-UZI42V6H.js";import"./chunk-OYEL4FVX.js";import{C as Jr,H as Xt,V as Dt}from"./chunk-PWBMBWIR.js";import{$ as Ee,Aa as Wr,D as ue,E as le,H as nt,K as ft,Ka as tn,L as Ae,La as hi,M as ve,N as mi,O as wt,Q as mt,U as jr,Xb as Xr,Y as pe,Yb as Zr,Z as vi,_ as Se,a as Yt,aa as Qr,b as zt,d as $e,da as At,j as Oe,n as Wi,o as qe,oa as Kr,pa as Hr,t as Yi,ta as Ji,u as zi,v as Xi,vb as nn,wa as en,wb as rn,xb as Yr,ya as _i,yb as zr,z as Zi,za as Ci}from"./chunk-ABA734YC.js";import{$ as gr,$d as Ot,Aa as G,Ac as ee,Ae as di,B as ur,Ba as si,Bb as at,Cb as ct,Db as st,Dd as z,De as Gr,E as ai,Ea as Ui,Eb as ce,Ed as Pr,Ee as Pe,Eg as Xe,Fa as N,Fb as y,G as lr,Ga as P,Gb as ne,Gf as Te,Ha as Vi,Hb as S,Hc as B,I as Y,Ib as Li,Ie as Br,Ja as _r,Ke as Lr,La as $t,Lc as Kt,Me as ji,N as Re,Ne as Qi,Oa as Cr,Ob as Je,Oc as wr,Of as qr,P as ci,Pb as Fe,Pd as K,Pf as gt,Qa as St,Qb as L,Qc as Ar,R as w,Ra as Gi,Rb as Le,Rc as Ht,S as Mi,Sb as Et,T as Be,Ta as a,U as pr,Ua as _,V as kt,Vb as yr,Vd as Mr,W as dr,Wb as ki,Xb as g,Yb as m,Ye as pt,Yf as Ki,Zb as Z,Zd as Ur,Ze as gi,a as A,ab as hr,ac as ge,b as F,bb as xe,cb as v,cd as ut,ce as Ne,cf as kr,db as M,dd as we,df as Wt,eb as s,ed as et,ef as it,f as Qe,fa as fr,fb as ui,fc as Ke,fd as Dr,ga as mr,gb as se,gc as br,gd as Fr,ge as tt,gf as dt,hd as _e,i as Lt,id as pi,j as oi,ja as R,jd as Ce,kb as l,kd as Rr,lb as p,lc as Ir,ma as ye,mb as x,mc as jt,mf as $r,n as Pi,nb as b,nc as li,ng as Hi,ob as I,oc as Qt,og as te,pb as qt,pc as xr,pg as H,qb as k,qc as Tr,qf as fi,ra as $,rb as Bi,rc as $i,s as me,sa as V,sb as U,sc as Ge,ta as Ie,tb as u,td as Nr,ua as D,uc as be,v as E,va as X,vc as W,vd as lt,w as sr,wb as O,wc as Sr,x as ze,xc as Er,ya as vr,yc as Or,ye as Vr,za as j,zc as qi,zd as ke}from"./chunk-FDYREMOD.js";function Sa(i,o){if(i&1){let e=k();b(0),l(1,"div",4)(2,"div",5)(3,"div",6)(4,"label"),y(5),g(6,"cxTranslate"),p(),x(7,"cx-item-counter",7),p(),l(8,"button",8),g(9,"cxTranslate"),g(10,"cxTranslate"),g(11,"cxTranslate"),U("click",function(){N(e);let n=u(2).ngIf,r=u();return P(r.onAddToCart(n.configuration,n.routerData))}),x(12,"cx-icon",9),p()()(),I()}if(i&2){let e=u(2).ngIf,t=u();a(5),ne(m(6,5,"configurator.addToCart.quantity")),a(2),s("control",t.quantityControl),a(),O("title",m(9,7,t.getButtonResourceKey(e.routerData,e.configuration))),M("aria-label",m(10,9,t.getButtonResourceKey(e.routerData,e.configuration))+" "+Z(11,11,"configurator.a11y.addToCartPrices",t.extractConfigPrices(e.configuration))),a(4),s("type",t.iconType.CART_PLUS)}}function Ea(i,o){if(i&1){let e=k();b(0),l(1,"button",10),g(2,"async"),g(3,"cxTranslate"),g(4,"cxTranslate"),U("click",function(){N(e);let n=u(2).ngIf,r=u();return P(r.onAddToCart(n.configuration,n.routerData))}),y(5),g(6,"async"),g(7,"cxTranslate"),p(),I()}if(i&2){let e=u(2).ngIf,t=u();a(),M("aria-label",m(3,4,t.getButtonResourceKey(e.routerData,e.configuration,m(2,2,t.isQuoteCartActive())))+" "+Z(4,6,"configurator.a11y.addToCartPrices",t.extractConfigPrices(e.configuration))),a(4),S(" ",m(7,11,t.getButtonResourceKey(e.routerData,e.configuration,m(6,9,t.isQuoteCartActive())))," ")}}function Oa(i,o){if(i&1&&(b(0),l(1,"div",3),v(2,Sa,13,14,"ng-container",1)(3,Ea,8,13,"ng-container",1),p(),I()),i&2){let e=u().ngIf,t=u();a(2),s("ngIf",!t.isCartEntry(e.routerData)),a(),s("ngIf",t.isCartEntry(e.routerData))}}function wa(i,o){if(i&1){let e=k();l(0,"div",11)(1,"button",12),U("click",function(){N(e);let n=u(2);return P(n.leaveConfigurationOverview())}),y(2),g(3,"cxTranslate"),p()()}i&2&&(a(2),S(" ",m(3,1,"configurator.addToCart.buttonClose")," "))}function Aa(i,o){if(i&1&&(b(0),v(1,Oa,4,2,"ng-container",2)(2,wa,4,3,"ng-template",null,0,ge),I()),i&2){let e=o.ngIf,t=ce(3);a(),s("ngIf",!e.routerData.displayOnly)("ngIfElse",t)}}function Da(i,o){i&1&&(b(0),y(1),g(2,"cxTranslate"),I()),i&2&&(a(),S(" ",m(2,1,"configurator.attribute.defaultRequiredMessage")," "))}function Fa(i,o){i&1&&(b(0),y(1),g(2,"cxTranslate"),I()),i&2&&(a(),S(" ",m(2,1,"configurator.attribute.singleSelectRequiredMessage")," "))}function Ra(i,o){if(i&1&&(l(0,"div",1),g(1,"cxTranslate"),g(2,"cxTranslate"),x(3,"cx-icon",2),v(4,Da,3,3,"ng-container",3)(5,Fa,3,3,"ng-container",3),p()),i&2){let e=u();O("id",e.createAttributeUiKey("attribute-msg",e.attribute.name)),M("aria-label",e.isUserInput(e.attribute)?m(1,5,"configurator.attribute.defaultRequiredMessage"):m(2,7,"configurator.attribute.singleSelectRequiredMessage")),a(3),s("type",e.iconType.ERROR),a(),s("ngIf",e.isUserInput(e.attribute)),a(),s("ngIf",e.isDropDown(e.attribute))}}var Na=i=>({item:i});function Pa(i,o){i&1&&(b(0),y(1),g(2,"cxTranslate"),I()),i&2&&(a(),S("\xA0... ",m(2,1,"configurator.button.less"),""))}function Ma(i,o){i&1&&(y(0),g(1,"cxTranslate")),i&2&&S(" \xA0... ",m(1,1,"configurator.button.more"),"")}function Ua(i,o){if(i&1){let e=k();l(0,"button",4),U("click",function(){N(e);let n=u(2);return P(n.toggleShowMore())}),v(1,Pa,3,3,"ng-container",5)(2,Ma,2,3,"ng-template",null,0,ge),p()}if(i&2){let e=ce(3),t=u(2);O("tabindex",t.tabIndex),a(),s("ngIf",t.showHiddenText)("ngIfElse",e)}}function Va(i,o){if(i&1&&(b(0),x(1,"span",2),g(2,"cxTranslate"),v(3,Ua,4,3,"button",3),I()),i&2){let e=u();a(),s("innerHTML",e.textToShow,Cr),M("aria-label",Z(2,3,"configurator.a11y.itemDescription",L(6,Na,e.productName))),a(2),s("ngIf",e.showMore)}}var _t=i=>({attribute:i}),Ga=i=>({param:i});function Ba(i,o){if(i&1&&(l(0,"div",8),x(1,"cx-icon",9),y(2),g(3,"cxTranslate"),p()),i&2){let e=u();a(),s("type",e.iconTypes.WARNING),a(),S(" ",m(3,2,"configurator.attribute.notVisibleAttributeMsg"),`
`)}}function La(i,o){if(i&1&&x(0,"cx-configurator-show-more",10),i&2){let e=u();s("text",e.attribute.description)("textSize",e.getAttributeDescriptionLength())("productName",e.getLabel(e.expMode,e.attribute.label,e.attribute.name))("tabIndex",0)}}function ka(i,o){if(i&1&&x(0,"cx-icon",9),i&2){let e=u(2);s("type",e.iconTypes.WARNING)}}function $a(i,o){if(i&1){let e=k();b(0),l(1,"a",14),g(2,"cxTranslate"),U("click",function(){N(e);let n=u(3);return P(n.navigateToGroup())})("keydown.enter",function(){N(e);let n=u(3);return P(n.navigateToGroup())}),y(3),g(4,"cxTranslate"),p(),I()}if(i&2){let e=u(3);a(),M("aria-label",Z(2,2,"configurator.a11y.navigateToConflict",L(7,_t,e.attribute.label))),a(2),S(" ",m(4,5,e.getConflictMessageKey())," ")}}function qa(i,o){if(i&1&&(b(0),v(1,$a,5,9,"ng-container",13),I()),i&2){let e=u(2),t=ce(15);a(),s("ngIf",e.isNavigationToConflictEnabled())("ngIfElse",t)}}function ja(i,o){if(i&1&&(l(0,"div",11),g(1,"cxTranslate"),v(2,ka,1,1,"cx-icon",12)(3,qa,2,2,"ng-container",13),p()),i&2){let e=u(),t=ce(13);O("id",e.createAttributeUiKey("attribute-msg",e.attribute.name)),M("aria-live",e.isConflictResolutionActive()?"assertive":"off")("aria-atomic",!!e.isConflictResolutionActive())("role",e.isConflictResolutionActive()?"alert":null)("aria-label",e.isConflictResolutionActive()?m(1,8,"configurator.a11y.conflictDetected"):""),a(2),s("ngIf",e.isAttributeGroup()),a(),s("ngIf",e.isAttributeGroup())("ngIfElse",t)}}function Qa(i,o){if(i&1&&(l(0,"div",15),g(1,"cxTranslate"),x(2,"cx-icon",16),y(3),g(4,"cxTranslate"),p()),i&2){let e=u();O("id",e.createAttributeUiKey("attribute-msg",e.attribute.name)),M("aria-label",m(1,4,e.getRequiredMessageKey())),a(2),s("type",e.iconTypes.ERROR),a(),S(" ",m(4,6,e.getRequiredMessageKey()),`
`)}}function Ka(i,o){if(i&1&&x(0,"img",17),i&2){let e=u();O("src",e.image==null?null:e.image.url,St),O("alt",e.image==null?null:e.image.altText)}}function Ha(i,o){if(i&1){let e=k();l(0,"a",14),U("click",function(){N(e);let n=u(2);return P(n.navigateToGroup())})("keydown.enter",function(){N(e);let n=u(2);return P(n.navigateToGroup())}),y(1),g(2,"cxTranslate"),p()}if(i&2){let e=u(2);a(),S(" ",m(2,1,e.getConflictMessageKey())," ")}}function Wa(i,o){if(i&1&&v(0,Ha,3,3,"a",18),i&2){let e=u();s("ngIf",e.isNavigationToGroupEnabled)}}function Ya(i,o){if(i&1&&(l(0,"div",19),y(1),g(2,"cxTranslate"),p()),i&2){let e=u();a(),S(" ",m(2,1,e.getConflictMessageKey())," ")}}function za(i,o){if(i&1&&(b(0),l(1,"div",1),g(2,"cxTranslate"),y(3),p(),I()),i&2){let e=u(2);a(),s("ngClass",e.styleClass),M("aria-label",m(2,3,"configurator.a11y.valueSurcharge")),a(2),S(" ",e.price," ")}}function Xa(i,o){if(i&1&&(b(0),l(1,"div",2),g(2,"cxTranslate"),y(3),g(4,"cxNumeric"),p(),l(5,"div",3),y(6),p(),I()),i&2){let e=u(2);a(),M("aria-label",m(2,3,"configurator.a11y.valueSurcharge")),a(2),S(" ",e.quantityWithPrice(m(4,5,e.formula==null?null:e.formula.quantity))," "),a(3),ne(e.priceTotal)}}function Za(i,o){if(i&1&&(b(0),v(1,za,4,5,"ng-container",0)(2,Xa,7,7,"ng-container",0),I()),i&2){let e=u();a(),s("ngIf",e.displayPriceOnly()),a(),s("ngIf",e.displayQuantityAndPrice())}}var Ja=i=>({"cx-product-card-selected":i});function ec(i,o){if(i&1&&(l(0,"div",13),y(1),g(2,"cxTranslate"),p()),i&2){let e=u().ngIf;a(),Li(" ",m(2,2,"configurator.attribute.id"),": ",e.code," ")}}function tc(i,o){if(i&1&&x(0,"cx-configurator-show-more",14),i&2){let e=u().ngIf;s("text",e.description)("textSize",45)("productName",e.code)("tabIndex",0)}}function ic(i,o){if(i&1){let e=k();l(0,"cx-configurator-attribute-quantity",23),U("changeQuantity",function(n){N(e);let r=u(3);return P(r.onChangeQuantity(n))}),p()}if(i&2){let e=u(3);s("quantityOptions",e.extractQuantityParameters())}}function nc(i,o){if(i&1){let e=k();l(0,"button",27),U("click",function(){N(e);let n=u(5);return P(n.onHandleDeselect())}),y(1),g(2,"cxTranslate"),p()}if(i&2){let e=u(4).ngIf,t=u();s("cxFocus",t.focusConfig),M("aria-label",t.getAriaLabelMultiSelected(e))("aria-describedby",t.createAttributeUiKey("label",t.productCardOptions.attributeName)),a(),S(" ",m(2,4,"configurator.button.remove")," ")}}function rc(i,o){if(i&1){let e=k();l(0,"button",28),g(1,"async"),U("click",function(){N(e);let n=u(5);return P(n.onHandleSelect())}),y(2),g(3,"cxTranslate"),p()}if(i&2){let e=u(4).ngIf,t=u();s("disabled",t.productCardOptions.disableAllButtons||m(1,5,t.loading$))("cxFocus",t.focusConfig),M("aria-label",t.getAriaLabelMultiUnselected(e))("aria-describedby",t.createAttributeUiKey("label",t.productCardOptions.attributeName)),a(2),S(" ",m(3,7,"configurator.button.add")," ")}}function oc(i,o){if(i&1&&(b(0),v(1,nc,3,6,"button",26)(2,rc,4,9,"ng-template",null,1,ge),I()),i&2){let e=ce(3),t=u(4);a(),s("ngIf",t.productCardOptions==null||t.productCardOptions.productBoundValue==null?null:t.productCardOptions.productBoundValue.selected)("ngIfElse",e)}}function ac(i,o){if(i&1){let e=k();l(0,"button",28),g(1,"async"),U("click",function(){N(e);let n=u(5);return P(n.onHandleSelect())}),y(2),g(3,"cxTranslate"),p()}if(i&2){let e=u(4).ngIf,t=u();s("disabled",t.productCardOptions.disableAllButtons||m(1,5,t.loading$))("cxFocus",t.focusConfig),M("aria-label",t.getAriaLabelSingleUnselected(e))("aria-describedby",t.createAttributeUiKey("label",t.productCardOptions.attributeName)),a(2),S(" ",m(3,7,"configurator.button.select")," ")}}function cc(i,o){if(i&1){let e=k();l(0,"button",32),g(1,"async"),U("click",function(){N(e);let n=u(7);return P(n.onHandleDeselect())}),y(2),g(3,"cxTranslate"),p()}if(i&2){let e=u(6).ngIf,t=u();s("disabled",t.productCardOptions.hideRemoveButton||m(1,5,t.loading$))("cxFocus",t.focusConfig),M("aria-label",t.getAriaLabelSingleSelected(e))("aria-describedby",t.createAttributeUiKey("label",t.productCardOptions.attributeName)),a(2),S(" ",m(3,7,"configurator.button.deselect")," ")}}function sc(i,o){if(i&1&&(l(0,"span",33),y(1),p()),i&2){let e=u(6).ngIf,t=u();a(),S(" ",t.getAriaLabelSingleSelectedNoButton(e)," ")}}function uc(i,o){if(i&1&&(b(0),v(1,cc,4,9,"button",30)(2,sc,2,1,"span",31),I()),i&2){let e=u(6);a(),s("ngIf",!(e.productCardOptions!=null&&e.productCardOptions.hideRemoveButton)),a(),s("ngIf",e.productCardOptions==null?null:e.productCardOptions.hideRemoveButton)}}function lc(i,o){if(i&1&&v(0,uc,3,2,"ng-container",3),i&2){let e=u(5);s("ngIf",e.isValueCodeDefined(e.productCardOptions==null||e.productCardOptions.productBoundValue==null?null:e.productCardOptions.productBoundValue.valueCode))}}function pc(i,o){if(i&1&&v(0,ac,4,9,"button",29)(1,lc,1,1,"ng-template",null,2,ge),i&2){let e=ce(2),t=u(4);s("ngIf",!(!(t.productCardOptions==null||t.productCardOptions.productBoundValue==null)&&t.productCardOptions.productBoundValue.selected))("ngIfElse",e)}}function dc(i,o){if(i&1&&(l(0,"div",24),v(1,oc,4,2,"ng-container",25)(2,pc,3,2,"ng-template",null,0,ge),p()),i&2){let e=ce(3),t=u(3);a(),s("ngIf",t.productCardOptions==null?null:t.productCardOptions.multiSelect)("ngIfElse",e)}}function gc(i,o){if(i&1&&(l(0,"div",15)(1,"div",16)(2,"div",17),v(3,ic,1,1,"cx-configurator-attribute-quantity",18),p(),l(4,"div",19),x(5,"cx-configurator-price",20),p()(),l(6,"div",21),v(7,dc,4,2,"div",22),p()()),i&2){let e=u(2);a(3),s("ngIf",e.showQuantity),a(2),s("formula",e.extractPriceFormulaParameters()),a(2),s("ngIf",!(e.productCardOptions!=null&&e.productCardOptions.singleDropdown))}}function fc(i,o){if(i&1&&(b(0),l(1,"div",34),x(2,"cx-icon",35),y(3),g(4,"cxTranslate"),p(),I()),i&2){let e=u(2);a(),O("id",e.createAttributeUiKey("attribute-msg",e.productCardOptions.attributeName)),a(2),S(" ",m(4,2,"configurator.attribute.deselectionNotPossible")," ")}}function mc(i,o){if(i&1&&(b(0),l(1,"div",4),g(2,"cxTranslate"),l(3,"div",5)(4,"div",6),x(5,"cx-media",7),p(),l(6,"div",8)(7,"div",9)(8,"p"),y(9),p()(),v(10,ec,3,4,"div",10)(11,tc,1,4,"cx-configurator-show-more",11),p()(),v(12,gc,8,3,"div",12)(13,fc,5,4,"ng-container",3),p(),I()),i&2){let e=o.ngIf,t=u();a(),s("ngClass",L(11,Ja,t.isProductCardSelected())),M("aria-label",Z(2,8,"configurator.a11y.itemOfAttribute",L(13,_t,t.productCardOptions.attributeLabel))),a(4),s("container",e.images==null?null:e.images.PRIMARY),a(4),S(" ",e.name," "),a(),s("ngIf",e.code),a(),s("ngIf",e.description&&e.code),a(),s("ngIf",!t.productCardOptions.singleDropdown||t.hasPriceDisplay()),a(),s("ngIf",t.showDeselectionNotPossible)}}var Me=i=>({key:i});function vc(i,o){if(i&1){let e=k();l(0,"div",5)(1,"cx-configurator-attribute-quantity",6),U("changeQuantity",function(n){N(e);let r=u(2);return P(r.onChangeQuantity(n))}),p(),x(2,"cx-configurator-price",7),p()}if(i&2){let e=u(2);a(),s("quantityOptions",e.extractQuantityParameters(e.attribute.quantity,!e.attribute.required)),a(),s("formula",e.extractPriceFormulaParameters())}}function _c(i,o){if(i&1&&x(0,"cx-configurator-show-more",15),i&2){let e=u().$implicit,t=u(2);s("text",e.description)("textSize",t.getValueDescriptionLength())("productName",t.getLabel(t.expMode,e.valueDisplay,e.valueCode))("tabIndex",0)}}function Cc(i,o){if(i&1){let e=k();l(0,"cx-configurator-attribute-quantity",6),U("changeQuantity",function(n){N(e);let r=u(),c=r.$implicit,f=r.index,T=u(2);return P(T.onChangeValueQuantity(n,c.valueCode,f))}),p()}if(i&2){let e=u().$implicit,t=u(2);s("quantityOptions",t.extractQuantityParameters(e.quantity,t.allowZeroValueQuantity))}}function hc(i,o){if(i&1){let e=k();b(0),l(1,"div",8)(2,"div",9)(3,"input",10),U("change",function(){let n=N(e).$implicit,r=u(2);return P(r.onSelect(n.valueCode))}),p(),l(4,"label",11),y(5),p(),v(6,_c,1,4,"cx-configurator-show-more",12),p(),l(7,"div",13),x(8,"cx-configurator-price",7),p()(),v(9,Cc,1,1,"cx-configurator-attribute-quantity",14),I()}if(i&2){let e=o.$implicit,t=o.index,n=u().ngIf,r=u();a(3),O("id",r.createAttributeValueIdForConfigurator(r.attribute,e.valueCode)),O("name",r.createAttributeIdForConfigurator(r.attribute)),s("cxFocus",L(14,Me,r.attribute.name+"-"+e.name))("value",e.valueCode)("formControl",r.attributeCheckBoxForms[t]),M("aria-label",r.getAriaLabelGeneric(r.attribute,r.enrichValueWithPrice(e,n)))("aria-describedby",r.createAttributeUiKey("label",r.attribute.name))("aria-live",r.isLastSelected(r.attribute.name,e.valueCode)?"polite":null),a(),O("id",r.createValueUiKey("label",r.attribute.name,e.valueCode)),O("for",r.createAttributeValueIdForConfigurator(r.attribute,e.valueCode)),a(),ne(r.getLabel(r.expMode,e.valueDisplay,e.valueCode)),a(),s("ngIf",e.description),a(2),s("formula",r.extractValuePriceFormulaParameters(r.enrichValueWithPrice(e,n))),a(),s("ngIf",e.selected&&r.withQuantity&&!r.withQuantityOnAttributeLevel)}}function yc(i,o){if(i&1&&(l(0,"div",2),v(1,vc,3,2,"div",3)(2,hc,10,16,"ng-container",4),p()),i&2){let e=u();O("id",e.createAttributeIdForConfigurator(e.attribute)),a(),s("ngIf",e.withQuantityOnAttributeLevel),a(),s("ngForOf",e.attribute.values)}}function bc(i,o){if(i&1&&x(0,"cx-configurator-show-more",10),i&2){let e=u(2);s("text",e.attributeValue.description)("textSize",e.getValueDescriptionLength())("productName",e.getLabel(e.expMode,e.attributeValue.valueDisplay,e.attributeValue.valueCode))("tabIndex",0)}}function Ic(i,o){if(i&1){let e=k();l(0,"div",3)(1,"div",4)(2,"input",5),U("change",function(){N(e);let n=u();return P(n.onSelect(n.attributeValue.valueCode))}),p(),l(3,"label",6),y(4),p(),v(5,bc,1,4,"cx-configurator-show-more",7),p(),l(6,"div",8),x(7,"cx-configurator-price",9),p()()}if(i&2){let e=o.ngIf,t=u();a(2),O("id",t.createAttributeValueIdForConfigurator(t.attribute,t.attributeValue.valueCode)),O("name",t.createAttributeIdForConfigurator(t.attribute)),s("value",t.attributeValue.valueCode)("cxFocus",L(13,Me,t.attribute.name+"-"+t.attributeValue.name))("formControl",t.attributeCheckBoxForm),M("aria-label",t.getAriaLabelGeneric(t.attribute,t.enrichValueWithPrice(t.attributeValue,e)))("aria-live",t.isLastSelected(t.attribute.name,t.attributeValue.valueCode)?"polite":null)("aria-describedby",t.createAttributeUiKey("label",t.attribute.name)),a(),O("id",t.createValueUiKey("label",t.attribute.name,t.attributeValue.valueCode)),O("for",t.createAttributeValueIdForConfigurator(t.attribute,t.attributeValue.valueCode)),a(),ne(t.getLabel(t.expMode,t.attributeValue.valueDisplay,t.attributeValue.valueCode)),a(),s("ngIf",t.attributeValue.description),a(2),s("formula",t.extractValuePriceFormulaParameters(t.enrichValueWithPrice(t.attributeValue,e)))}}var ni=i=>({"cx-required-error-msg ":i}),ei=(i,o)=>({value:i,attribute:o});function xc(i,o){if(i&1&&(x(0,"label",3),g(1,"cxTranslate"),g(2,"cxTranslate")),i&2){let e=u();O("id",e.createAttributeUiKey("labelForDate",e.attribute.name)),M("aria-label",e.isUserInputEmpty?Z(1,2,"configurator.a11y.valueOfDateAttributeBlank",L(8,_t,e.attribute.label)):Z(2,5,"configurator.a11y.valueOfDateAttributeFull",Le(10,ei,e.attribute.userInput,e.attribute.label)))}}var Tc=i=>({pattern:i});function Sc(i,o){if(i&1&&(l(0,"label",4),y(1),p()),i&2){let e=u();a(),ne(e.getHelpTextForInterval())}}function Ec(i,o){if(i&1&&(l(0,"div",5),x(1,"cx-icon",6),y(2),g(3,"cxTranslate"),p()),i&2){let e=u();O("id",e.createAttributeUiKey("attribute-msg",e.attribute.name)),a(),s("type",e.iconType.ERROR),a(),S(" ",Z(3,3,"configurator.attribute.wrongNumericFormatMessage",L(6,Tc,e.numericFormatPattern)),`
`)}}function Oc(i,o){if(i&1&&(l(0,"div",5),x(1,"cx-icon",6),y(2),g(3,"cxTranslate"),p()),i&2){let e=u();O("id",e.createAttributeUiKey("attribute-msg",e.attribute.name)),a(),s("type",e.iconType.ERROR),a(),S(" ",m(3,3,"configurator.attribute.wrongIntervalFormat"),`
`)}}var Ai=i=>({count:i});function wc(i,o){if(i&1&&(l(0,"option",9),y(1),p()),i&2){let e=o.$implicit,t=u(4);s("selected",e.selected)("label",t.getLabel(t.expMode,e.valueDisplay,e.valueCode,e))("value",e.valueCode),M("aria-label",t.getAriaLabel(e,t.attribute)),a(),S(" ",t.getLabel(t.expMode,e.valueDisplay,e.valueCode,e)," ")}}function Ac(i,o){if(i&1){let e=k();b(0),l(1,"select",7),g(2,"async"),U("change",function(){N(e);let n=u(3);return P(n.onSelect(n.attributeDropDownForm.value))}),v(3,wc,2,5,"option",8),p(),I()}if(i&2){let e=u(3);a(),O("id",e.createAttributeIdForConfigurator(e.attribute)),s("ngClass",L(8,ni,m(2,6,e.showRequiredErrorMessage$)))("formControl",e.attributeDropDownForm)("cxFocus",L(10,Me,e.attribute.name)),M("aria-describedby",e.createAttributeUiKey("label",e.attribute.name)),a(2),s("ngForOf",e.attribute.values)}}function Dc(i,o){if(i&1&&(l(0,"option",9),y(1),p()),i&2){let e=o.$implicit,t=u(3).ngIf,n=u();s("selected",e.selected)("label",n.getLabel(n.expMode,e.valueDisplay,e.valueCode,n.enrichValueWithPrice(e,t)))("value",e.valueCode),M("aria-label",n.getAriaLabel(e,n.attribute)),a(),S(" ",n.getLabel(n.expMode,e.valueDisplay,e.valueCode,n.enrichValueWithPrice(e,t))," ")}}function Fc(i,o){if(i&1&&x(0,"cx-configurator-show-more",12),i&2){let e,t=u(4);s("text",t.getSelectedValueDescription())("textSize",t.getValueDescriptionLength())("productName",t.getLabel(t.expMode,(e=t.getSelectedValue())==null?null:e.valueDisplay,(e=t.getSelectedValue())==null?null:e.valueCode,t.getSelectedValue()))("tabIndex",0)}}function Rc(i,o){if(i&1){let e=k();b(0),l(1,"div",10)(2,"select",7),g(3,"async"),U("change",function(){N(e);let n=u(3);return P(n.onSelect(n.attributeDropDownForm.value))}),v(4,Dc,2,5,"option",8),p(),v(5,Fc,1,4,"cx-configurator-show-more",11),p(),I()}if(i&2){let e=u(3);a(2),O("id",e.createAttributeIdForConfigurator(e.attribute)),s("ngClass",L(9,ni,m(3,7,e.showRequiredErrorMessage$)))("formControl",e.attributeDropDownForm)("cxFocus",L(11,Me,e.attribute.name)),M("aria-describedby",e.createAttributeUiKey("label",e.attribute.name)),a(2),s("ngForOf",e.attribute.values),a(),s("ngIf",e.getSelectedValueDescription())}}function Nc(i,o){if(i&1&&(l(0,"div",13),x(1,"cx-configurator-price",14),p()),i&2){let e=u(2).ngIf,t=u();a(),s("formula",t.extractValuePriceFormulaParameters(t.enrichValueWithPrice(t.getSelectedValue(),e)))}}function Pc(i,o){if(i&1&&(l(0,"div",4)(1,"label",5),y(2),g(3,"cxTranslate"),p(),v(4,Ac,4,12,"ng-container",0)(5,Rc,6,13,"ng-container",0)(6,Nc,2,1,"div",6),p()),i&2){let e=u(2);a(),O("for",e.createAttributeIdForConfigurator(e.attribute)),a(),S(" ",Z(3,5,"configurator.a11y.listbox",L(8,Ai,e.attribute.values.length))," "),a(2),s("ngIf",!(e.config.features!=null&&e.config.features.productConfiguratorAttributeTypesV2)),a(),s("ngIf",e.config.features==null?null:e.config.features.productConfiguratorAttributeTypesV2),a(),s("ngIf",!e.withQuantity&&e.getSelectedValue())}}function Mc(i,o){if(i&1&&x(0,"cx-configurator-price",14),i&2){let e=u(3);s("formula",e.extractPriceFormulaParameters())}}function Uc(i,o){if(i&1){let e=k();l(0,"div",15)(1,"cx-configurator-attribute-quantity",16),U("changeQuantity",function(n){N(e);let r=u(2);return P(r.onChangeQuantity(n,r.attributeDropDownForm))}),p(),v(2,Mc,1,1,"cx-configurator-price",17),p()}if(i&2){let e=u(2);a(),s("quantityOptions",e.extractQuantityParameters(e.attributeDropDownForm)),a(),s("ngIf",e.getSelectedValuePrice())}}function Vc(i,o){if(i&1&&(b(0),v(1,Pc,7,10,"div",2)(2,Uc,3,2,"div",3),I()),i&2){let e=u();a(),s("ngIf",e.attribute.values&&e.attribute.values.length!==0),a(),s("ngIf",e.withQuantity)}}function Gc(i,o){i&1&&(x(0,"cx-configurator-attribute-numeric-input-field",18),g(1,"cxTranslate")),i&2&&M("aria-label",m(1,1,"configurator.a11y.additionalValue"))}function Bc(i,o){i&1&&(x(0,"cx-configurator-attribute-input-field",18),g(1,"cxTranslate")),i&2&&M("aria-label",m(1,1,"configurator.a11y.additionalValue"))}function Lc(i,o){if(i&1){let e=k();l(0,"div",4)(1,"cx-configurator-attribute-quantity",5),U("changeQuantity",function(n){N(e);let r=u(2);return P(r.onChangeAttributeQuantity(n))}),p(),x(2,"cx-configurator-price",6),p()}if(i&2){let e=u(2);a(),s("quantityOptions",e.extractQuantityParameters(e.attribute.quantity)),a(),s("formula",e.extractPriceFormulaParameters())}}function kc(i,o){if(i&1){let e=k();l(0,"cx-configurator-attribute-product-card",7),g(1,"async"),g(2,"async"),U("handleDeselect",function(n){N(e);let r=u(2);return P(r.onDeselect(n))})("handleQuantity",function(n){N(e);let r=u(2);return P(r.onChangeValueQuantity(n))})("handleSelect",function(n){N(e);let r=u(2);return P(r.onSelect(n))}),p()}if(i&2){let e=o.$implicit,t=o.index,n=u(2);O("id",n.createAttributeValueIdForConfigurator(n.attribute,e.valueCode)),s("productCardOptions",n.extractProductCardParameters(m(1,2,n.loading$),m(2,4,n.preventAction$),e,t))}}function $c(i,o){if(i&1&&(l(0,"div",1),v(1,Lc,3,2,"div",2)(2,kc,3,6,"cx-configurator-attribute-product-card",3),p()),i&2){let e=u();O("id",e.createAttributeIdForConfigurator(e.attribute)),a(),s("ngIf",e.withQuantityOnAttributeLevel),a(),s("ngForOf",e.attribute==null?null:e.attribute.values)}}var qc=()=>({placement:"auto",class:"cx-value-description",appendToBody:!0,displayCloseButton:!0});function jc(i,o){if(i&1&&x(0,"img",10),i&2){let e=o.ngIf;O("src",e==null?null:e.url,St),O("alt",e==null?null:e.altText)}}function Qc(i,o){i&1&&x(0,"div",11)}function Kc(i,o){if(i&1){let e=k();l(0,"div",3)(1,"input",4),U("click",function(){let n=N(e).index,r=u(2);return P(r.onSelect(n))}),p(),l(2,"div",5)(3,"label",6),v(4,jc,1,2,"img",7)(5,Qc,1,0,"div",8),y(6),x(7,"cx-configurator-price",9),p()()()}if(i&2){let e=o.$implicit,t=o.index,n=u().ngIf,r=u();O("id",r.createAttributeValueIdForConfigurator(r.attribute,e.valueCode)),a(),O("id",r.createAttributeValueIdForConfigurator(r.attribute,e.valueCode)+"-input"),O("name",r.createAttributeIdForConfigurator(r.attribute)),s("value",e.valueCode)("formControl",r.attributeCheckBoxForms[t])("cxFocus",L(16,Me,r.attribute.name+"-"+e.name)),M("aria-label",r.getAriaLabelGeneric(r.attribute,r.enrichValueWithPrice(e,n)))("aria-live",r.isLastSelected(r.attribute.name,e.valueCode)?"polite":null)("aria-describedby",r.createAttributeUiKey("label",r.attribute.name))("checked",r.attributeCheckBoxForms[t].value?"checked":null),a(2),O("id",r.createValueUiKey("label",r.attribute.name,e.valueCode)),O("for",r.createAttributeValueIdForConfigurator(r.attribute,e.valueCode)+"-input"),a(),s("ngIf",r.getImage(e)),a(),s("ngIf",!r.getImage(e)),a(),S(" ",r.getLabel(r.expMode,e.valueDisplay,e.valueCode)," "),a(),s("formula",r.extractValuePriceFormulaParameters(r.enrichValueWithPrice(e,n)))}}function Hc(i,o){if(i&1&&(b(0),v(1,Kc,8,18,"div",2),I()),i&2){let e=u();a(),s("ngForOf",e.attribute.values)}}function Wc(i,o){if(i&1&&x(0,"img",18),i&2){let e=o.ngIf,t=u(2).$implicit,n=u(2);O("src",e==null?null:e.url,St),O("alt",e==null?null:e.altText),s("ngClass",n.getImgStyleClasses(n.attribute,t,"cx-img"))}}function Yc(i,o){if(i&1&&x(0,"div",19),i&2){let e=u(2).$implicit,t=u(2);s("ngClass",t.getImgStyleClasses(t.attribute,e,"cx-img-dummy"))}}function zc(i,o){if(i&1&&(l(0,"button",20),g(1,"cxTranslate"),x(2,"cx-icon",21),p()),i&2){let e=u(2).$implicit,t=u(2);s("cxPopover",e.description)("cxPopoverOptions",Fe(6,qc)),M("aria-label",m(1,4,"configurator.a11y.description")),a(2),s("type",t.iconTypes.INFO)}}function Xc(i,o){if(i&1){let e=k();l(0,"div",3)(1,"input",4),U("click",function(){N(e);let n=u().index,r=u(2);return P(!r.isReadOnly(r.attribute)&&r.onSelect(n))}),p(),l(2,"div",5)(3,"label",14),v(4,Wc,1,3,"img",15)(5,Yc,1,1,"div",16),y(6),v(7,zc,3,7,"button",17),x(8,"cx-configurator-price",9),p()()()}if(i&2){let e=u(),t=e.$implicit,n=e.index,r=u().ngIf,c=u();O("id",c.createAttributeValueIdForConfigurator(c.attribute,t.valueCode)),a(),O("id",c.createAttributeValueIdForConfigurator(c.attribute,t.valueCode)+"-input"),O("name",c.createAttributeIdForConfigurator(c.attribute)),s("value",t.valueCode)("formControl",c.attributeCheckBoxForms[n])("cxFocus",L(20,Me,c.attribute.name+"-"+t.name)),M("aria-label",c.getAriaLabelGeneric(c.attribute,c.enrichValueWithPrice(t,r)))("aria-live",c.isLastSelected(c.attribute.name,t.valueCode)?"polite":null)("aria-describedby",c.createAttributeUiKey("label",c.attribute.name))("checked",c.attributeCheckBoxForms[n].value?"checked":null),a(2),ui("cursor",c.isReadOnly(c.attribute)?"default":"pointer"),O("id",c.createValueUiKey("label",c.attribute.name,t.valueCode)),O("for",c.createAttributeValueIdForConfigurator(c.attribute,t.valueCode)+"-input"),O("title",c.getLabel(c.expMode,t.valueDisplay,t.valueCode)),a(),s("ngIf",c.getImage(t)),a(),s("ngIf",!c.getImage(t)),a(),S(" ",c.getImageLabel(c.expMode,t.valueDisplay,t.valueCode)," "),a(),s("ngIf",t.description),a(),s("formula",c.extractValuePriceFormulaParameters(c.enrichValueWithPrice(t,r)))}}function Zc(i,o){if(i&1&&(b(0),v(1,Xc,9,22,"div",13),I()),i&2){let e=o.$implicit,t=u(2);a(),s("ngIf",t.isValueDisplayed(t.attribute,e))}}function Jc(i,o){if(i&1&&(b(0),v(1,Zc,2,1,"ng-container",12),I()),i&2){let e=u();a(),s("ngForOf",e.attribute.values)}}function es(i,o){if(i&1&&x(0,"cx-configurator-price",8),i&2){let e=u(2);s("formula",e.extractPriceFormulaParameters())}}function ts(i,o){if(i&1){let e=k();l(0,"div",5)(1,"cx-configurator-attribute-quantity",6),U("changeQuantity",function(n){N(e);let r=u();return P(r.onChangeQuantity(n))}),p(),v(2,es,1,1,"cx-configurator-price",7),p()}if(i&2){let e=u();a(),s("quantityOptions",e.extractQuantityParameters()),a(),s("ngIf",e.getSelectedValuePrice())}}function is(i,o){if(i&1&&x(0,"cx-configurator-show-more",16),i&2){let e=u().$implicit,t=u(2);s("text",e.description)("textSize",t.getValueDescriptionLength())("productName",t.getLabel(t.expMode,e.valueDisplay,e.valueCode))("tabIndex",0)}}function ns(i,o){if(i&1){let e=k();l(0,"div",10)(1,"div",11)(2,"input",12),U("change",function(){let n=N(e).$implicit,r=u(2);return P(r.onSelect(n.valueCode))}),p(),l(3,"label",13),y(4),p(),v(5,is,1,4,"cx-configurator-show-more",14),p(),l(6,"div",15),x(7,"cx-configurator-price",8),p()()}if(i&2){let e=o.$implicit,t=u().ngIf,n=u();a(2),O("id",n.createAttributeValueIdForConfigurator(n.attribute,e.valueCode)),O("name",n.createAttributeIdForConfigurator(n.attribute)),s("formControl",n.attributeRadioButtonForm)("value",e.valueCode)("cxFocus",L(16,Me,n.attribute.name+"-"+e.name)),M("required",n.attribute.required===!0?"required":null)("name",n.createAttributeIdForConfigurator(n.attribute))("aria-label",n.getAriaLabel(n.enrichValueWithPrice(e,t),n.attribute))("aria-live",n.listenForPriceChanges&&n.attributeRadioButtonForm.value===e.valueCode?"polite":null)("checked",n.attributeRadioButtonForm.value===e.valueCode?"checked":null)("aria-describedby",n.createAttributeUiKey("label",n.attribute.name)),a(),O("id",n.createValueUiKey("label",n.attribute.name,e.valueCode)),O("for",n.createAttributeValueIdForConfigurator(n.attribute,e.valueCode)),a(),ne(n.getLabel(n.expMode,e.valueDisplay,e.valueCode)),a(),s("ngIf",e.description),a(2),s("formula",n.extractValuePriceFormulaParameters(n.enrichValueWithPrice(e,t)))}}function rs(i,o){if(i&1&&(b(0),v(1,ns,8,18,"div",9),I()),i&2){let e=u();a(),s("ngForOf",e.attribute.values)}}function os(i,o){i&1&&x(0,"cx-configurator-attribute-numeric-input-field",17)}function as(i,o){i&1&&x(0,"cx-configurator-attribute-input-field",17)}function cs(i,o){if(i&1&&x(0,"cx-configurator-show-more",12),i&2){let e=u(2).$implicit,t=u(2);s("text",e.description)("textSize",t.getValueDescriptionLength())("productName",t.getLabel(t.expMode,e.valueDisplay,e.valueCode))("tabIndex",0)}}function ss(i,o){if(i&1&&(l(0,"div",5)(1,"span",6),y(2),p(),l(3,"div",7)(4,"label",8),y(5),p(),v(6,cs,1,4,"cx-configurator-show-more",9),p(),l(7,"div",10),x(8,"cx-configurator-price",11),p()()),i&2){let e=o.ngIf,t=u().$implicit,n=u(2);a(),O("id",n.createValueUiKey("aria-label",n.attribute.name,t.valueCode)),a(),S(" ",n.getAriaLabel(n.attribute,n.enrichValueWithPrice(t,e))," "),a(2),O("id",n.createValueUiKey("label",n.attribute.name,t.valueCode)),a(),ne(n.getLabel(n.expMode,t.valueDisplay,t.valueCode)),a(),s("ngIf",t.description),a(2),s("formula",n.extractValuePriceFormulaParameters(n.enrichValueWithPrice(t,e)))}}function us(i,o){if(i&1&&(b(0),v(1,ss,9,6,"div",4),g(2,"async"),I()),i&2){let e=o.$implicit,t=u(2);a(),s("ngIf",e.selected&&m(2,1,t.changedPrices$))}}function ls(i,o){if(i&1&&(b(0),v(1,us,3,3,"ng-container",3),I()),i&2){let e=u();a(),s("ngForOf",e.attribute.values)}}function ps(i,o){if(i&1&&(b(0),l(1,"span",6),y(2),p(),l(3,"div",14)(4,"span",15),y(5),p()(),I()),i&2){let e=u(2);a(),O("id",e.createValueUiKey("aria-label",e.attribute.name,e.attribute.selectedSingleValue)),a(),S(" ",e.getAriaLabel(e.attribute)," "),a(3),ne(e.attribute.selectedSingleValue)}}function ds(i,o){if(i&1&&(b(0),l(1,"span",6),y(2),p(),l(3,"div",14)(4,"span",15),y(5),p()(),I()),i&2){let e=u(2);a(),O("id",e.createValueUiKey("aria-label",e.attribute.name,e.attribute.userInput)),a(),S(" ",e.getAriaLabel(e.attribute)," "),a(3),ne(e.attribute.userInput)}}function gs(i,o){if(i&1&&v(0,ps,6,3,"ng-container",13)(1,ds,6,3,"ng-container",13),i&2){let e=u();s("ngIf",e.attribute.selectedSingleValue),a(),s("ngIf",e.attribute.userInput)}}var an=(i,o,e)=>({value:i,attribute:o,price:e});function fs(i,o){if(i&1&&(l(0,"option",7),g(1,"cxTranslate"),g(2,"cxTranslate"),g(3,"cxTranslate"),y(4),p()),i&2){let e,t=o.$implicit,n=u(2);s("label",n.getLabel(!1,t.valueDisplay,void 0,t))("selected",t.selected)("value",t.valueCode)("value",t.valueCode),M("aria-label",n.isRetractValue(t.valueCode)?Z(1,6,"configurator.a11y.forAttribute",Le(15,ei,t.valueDisplay,n.attribute.label)):t.valuePrice&&(t.valuePrice==null?null:t.valuePrice.value)!==0?Z(2,9,"configurator.a11y.selectedValueOfAttributeFullWithPrice",Et(18,an,t.valueDisplay,n.attribute.label,(e=t.valuePriceTotal==null?null:t.valuePriceTotal.formattedValue)!==null&&e!==void 0?e:0)):Z(3,12,"configurator.a11y.selectedValueOfAttributeFull",Le(22,ei,t.valueDisplay,n.attribute.label))),a(4),S(" ",n.getLabel(!1,t.valueDisplay,void 0,t)," ")}}function ms(i,o){if(i&1){let e=k();l(0,"div",3)(1,"label",4),y(2),g(3,"cxTranslate"),p(),l(4,"select",5),g(5,"async"),U("change",function(){N(e);let n=u();return P(n.onSelect(n.attributeDropDownForm.value))}),v(6,fs,5,25,"option",6),p()()}if(i&2){let e=u();a(),O("for",e.createAttributeIdForConfigurator(e.attribute)),a(),S(" ",Z(3,8,"configurator.a11y.listbox",L(13,Ai,e.attribute.values==null?null:e.attribute.values.length))," "),a(2),O("id",e.createAttributeIdForConfigurator(e.attribute)),s("ngClass",L(15,ni,m(5,11,e.showRequiredErrorMessage$)))("formControl",e.attributeDropDownForm)("cxFocus",L(17,Me,e.attribute.name)),M("aria-describedby",e.createAttributeUiKey("label",e.attribute.name)),a(2),s("ngForOf",e.attribute.values)}}function vs(i,o){if(i&1){let e=k();l(0,"cx-configurator-attribute-product-card",8),U("handleDeselect",function(){N(e);let n=u();return P(n.onSelect(n.RETRACT_VALUE_CODE))}),p()}if(i&2){let e=u();O("id",e.createAttributeValueIdForConfigurator(e.attribute,e.selectedValue.valueCode)),s("productCardOptions",e.extractProductCardParameters())}}function _s(i,o){if(i&1){let e=k();l(0,"div",9)(1,"cx-configurator-attribute-quantity",10),U("changeQuantity",function(n){N(e);let r=u();return P(r.onChangeQuantity(n,r.attributeDropDownForm))}),p(),x(2,"cx-configurator-price",11),p()}if(i&2){let e=u();a(),s("quantityOptions",e.extractQuantityParameters(e.attributeDropDownForm)),a(),s("formula",e.extractPriceFormulaParameters())}}function Cs(i,o){if(i&1){let e=k();l(0,"div",4)(1,"cx-configurator-attribute-quantity",5),U("changeQuantity",function(n){N(e);let r=u(2);return P(r.onChangeQuantity(n))}),p(),x(2,"cx-configurator-price",6),p()}if(i&2){let e=u(2);a(),s("quantityOptions",e.extractQuantityParameters()),a(),s("formula",e.extractPriceFormulaParameters())}}function hs(i,o){if(i&1){let e=k();l(0,"cx-configurator-attribute-product-card",7),U("handleDeselect",function(){N(e);let n=u(2);return P(n.onSelect(""))})("handleSelect",function(n){N(e);let r=u(2);return P(r.onSelect(n))}),p()}if(i&2){let e=o.$implicit,t=o.index,n=u(2);s("id",n.createAttributeValueIdForConfigurator(n.attribute,e.valueCode))("productCardOptions",n.extractProductCardParameters(e,t))}}function ys(i,o){if(i&1&&(l(0,"div",1),v(1,Cs,3,2,"div",2)(2,hs,1,2,"cx-configurator-attribute-product-card",3),p()),i&2){let e=u();O("id",e.createAttributeIdForConfigurator(e.attribute)),a(),s("ngIf",e.withQuantity),a(),s("ngForOf",e.attribute==null?null:e.attribute.values)}}var bs=i=>({placement:"auto",class:i,appendToBody:!0,displayCloseButton:!0});function Is(i,o){if(i&1&&x(0,"img",10),i&2){let e,t,n=u().$implicit,r=u(2);O("src",(e=r.getImage(n))==null?null:e.url,St),O("alt",(t=r.getImage(n))==null?null:t.altText)}}function xs(i,o){i&1&&x(0,"div",11)}function Ts(i,o){if(i&1){let e=k();l(0,"div",3)(1,"input",4),U("click",function(){let n=N(e).$implicit,r=u(2);return P(r.onClick(n.valueCode))}),p(),l(2,"div",5)(3,"label",6),v(4,Is,1,2,"img",7)(5,xs,1,0,"div",8),y(6),x(7,"cx-configurator-price",9),p()()()}if(i&2){let e=o.$implicit,t=u().ngIf,n=u();O("id",n.createAttributeValueIdForConfigurator(n.attribute,e.valueCode)),a(),O("id",n.createAttributeValueIdForConfigurator(n.attribute,e.valueCode)+"-input"),O("name",n.createAttributeIdForConfigurator(n.attribute)),s("value",e.valueCode)("formControl",n.attributeRadioButtonForm)("value",e.valueCode)("cxFocus",L(20,Me,n.attribute.name+"-"+e.name)),M("name",n.createAttributeIdForConfigurator(n.attribute))("required",n.attribute.required===!0?"required":null)("checked",n.attributeRadioButtonForm.value===e.valueCode?"checked":null)("aria-checked",n.attributeRadioButtonForm.value===e.valueCode?"true":"false")("aria-label",n.getAriaLabelGeneric(n.attribute,n.enrichValueWithPrice(e,t)))("aria-live",n.listenForPriceChanges&&n.attributeRadioButtonForm.value===e.valueCode?"polite":null)("aria-describedby",n.createAttributeUiKey("label",n.attribute.name)),a(2),O("id",n.createValueUiKey("label",n.attribute.name,e.valueCode)),O("for",n.createAttributeValueIdForConfigurator(n.attribute,e.valueCode)+"-input"),a(),s("ngIf",n.getImage(e)),a(),s("ngIf",!n.getImage(e)),a(),S(" ",n.getLabel(n.expMode,e.valueDisplay,e.valueCode)," "),a(),s("formula",n.extractValuePriceFormulaParameters(n.enrichValueWithPrice(e,t)))}}function Ss(i,o){if(i&1&&(b(0),v(1,Ts,8,22,"div",2),I()),i&2){let e=u();a(),s("ngForOf",e.attribute.values)}}function Es(i,o){if(i&1&&x(0,"img",18),i&2){let e,t,n=u(2).$implicit,r=u(2);O("src",(e=r.getImage(n))==null?null:e.url,St),O("alt",(t=r.getImage(n))==null?null:t.altText),s("ngClass",r.getImgStyleClasses(r.attribute,n,"cx-img"))}}function Os(i,o){if(i&1&&x(0,"div",19),i&2){let e=u(2).$implicit,t=u(2);s("ngClass",t.getImgStyleClasses(t.attribute,e,"cx-img-dummy"))}}function ws(i,o){if(i&1&&(l(0,"button",20),g(1,"cxTranslate"),x(2,"cx-icon",21),p()),i&2){let e=u(2).$implicit,t=u(2);s("cxPopover",e.description)("cxPopoverOptions",L(6,bs,t.getValueDescriptionStyleClasses())),M("aria-label",m(1,4,"configurator.a11y.description")),a(2),s("type",t.iconTypes.INFO)}}function As(i,o){if(i&1){let e=k();l(0,"div",3)(1,"input",4),U("click",function(){N(e);let n=u().$implicit,r=u(2);return P(!r.isReadOnly(r.attribute)&&r.onClick(n.valueCode))}),p(),l(2,"div",5)(3,"label",14),v(4,Es,1,3,"img",15)(5,Os,1,1,"div",16),y(6),v(7,ws,3,8,"button",17),x(8,"cx-configurator-price",9),p()()()}if(i&2){let e=u().$implicit,t=u().ngIf,n=u();O("id",n.createAttributeValueIdForConfigurator(n.attribute,e.valueCode)),a(),O("id",n.createAttributeValueIdForConfigurator(n.attribute,e.valueCode)+"-input"),O("name",n.createAttributeIdForConfigurator(n.attribute)),s("value",e.valueCode)("formControl",n.attributeRadioButtonForm)("value",e.valueCode)("cxFocus",L(24,Me,n.attribute.name+"-"+e.name)),M("name",n.createAttributeIdForConfigurator(n.attribute))("required",n.attribute.required===!0?"required":null)("checked",n.attributeRadioButtonForm.value===e.valueCode?"checked":null)("aria-checked",n.attributeRadioButtonForm.value===e.valueCode?"true":"false")("aria-label",n.getAriaLabelGeneric(n.attribute,n.enrichValueWithPrice(e,t)))("aria-live",n.listenForPriceChanges&&n.attributeRadioButtonForm.value===e.valueCode?"polite":null)("aria-describedby",n.createAttributeUiKey("label",n.attribute.name)),a(2),ui("cursor",n.isReadOnly(n.attribute)?"default":"pointer"),O("id",n.createValueUiKey("label",n.attribute.name,e.valueCode)),O("for",n.createAttributeValueIdForConfigurator(n.attribute,e.valueCode)+"-input"),O("title",n.getLabel(n.expMode,e.valueDisplay,e.valueCode)),a(),s("ngIf",n.getImage(e)),a(),s("ngIf",!n.getImage(e)),a(),S(" ",n.getImageLabel(n.expMode,e.valueDisplay,e.valueCode)," "),a(),s("ngIf",e.description),a(),s("formula",n.extractValuePriceFormulaParameters(n.enrichValueWithPrice(e,t)))}}function Ds(i,o){if(i&1&&(b(0),v(1,As,9,26,"div",13),I()),i&2){let e=o.$implicit,t=u(2);a(),s("ngIf",t.isValueDisplayed(t.attribute,e))}}function Fs(i,o){if(i&1&&(b(0),v(1,Ds,2,1,"ng-container",12),I()),i&2){let e=u();a(),s("ngForOf",e.attribute.values)}}function Rs(i,o){i&1&&(l(0,"span",8),y(1),g(2,"cxTranslate"),p()),i&2&&(a(),S(" ",m(2,1,"configurator.header.multipleWarnings"),""))}function Ns(i,o){i&1&&(b(0),x(1,"cx-icon",10),I())}function Ps(i,o){i&1&&(b(0),x(1,"cx-icon",11),I())}function Ms(i,o){if(i&1){let e=k();l(0,"button",9),U("click",function(){N(e);let n=u(3);return P(n.toggleWarnings())}),y(1),g(2,"cxTranslate"),v(3,Ns,2,0,"ng-container",0)(4,Ps,2,0,"ng-container",0),p()}if(i&2){let e=u(3);M("aria-expanded",e.showWarnings),a(),S(" ",m(2,4,"configurator.header.reviewWarnings")," "),a(2),s("ngIf",!e.showWarnings),a(),s("ngIf",e.showWarnings)}}function Us(i,o){if(i&1&&(l(0,"div",12),y(1),p()),i&2){let e=o.$implicit,t=u(2).ngIf,n=u();se("open",n.showWarnings||(t==null||t.warningMessages==null?null:t.warningMessages.length)===1),a(),S(" ",e," ")}}function Vs(i,o){if(i&1&&(b(0),l(1,"div",1)(2,"span",2),x(3,"cx-icon",3),p(),v(4,Rs,3,3,"span",4)(5,Ms,5,6,"button",5),l(6,"div",6),v(7,Us,2,3,"div",7),p()(),I()),i&2){let e,t,n=u().ngIf;a(4),s("ngIf",((e=n==null||n.warningMessages==null?null:n.warningMessages.length)!==null&&e!==void 0?e:0)>1),a(),s("ngIf",((t=n==null||n.warningMessages==null?null:n.warningMessages.length)!==null&&t!==void 0?t:0)>1),a(),se("inline",(n==null||n.warningMessages==null?null:n.warningMessages.length)===1),a(),s("ngForOf",n.warningMessages)}}function Gs(i,o){i&1&&(l(0,"span",19),y(1),g(2,"cxTranslate"),p()),i&2&&(a(),S(" ",m(2,1,"configurator.header.multipleErrors"),""))}function Bs(i,o){i&1&&(b(0),x(1,"cx-icon",10),I())}function Ls(i,o){i&1&&(b(0),x(1,"cx-icon",11),I())}function ks(i,o){if(i&1){let e=k();l(0,"button",20),U("click",function(){N(e);let n=u(3);return P(n.toggleErrors())}),y(1),g(2,"cxTranslate"),v(3,Bs,2,0,"ng-container",0)(4,Ls,2,0,"ng-container",0),p()}if(i&2){let e=u(3);M("aria-expanded",e.showErrors),a(),S(" ",m(2,4,"configurator.header.reviewErrors")," "),a(2),s("ngIf",!e.showErrors),a(),s("ngIf",e.showErrors)}}function $s(i,o){if(i&1&&(l(0,"div",21),y(1),p()),i&2){let e=o.$implicit,t=u(2).ngIf,n=u();se("open",n.showErrors||(t==null||t.errorMessages==null?null:t.errorMessages.length)===1),a(),S(" ",e," ")}}function qs(i,o){if(i&1&&(b(0),l(1,"div",13)(2,"span",2),x(3,"cx-icon",14),p(),v(4,Gs,3,3,"span",15)(5,ks,5,6,"button",16),l(6,"div",17),v(7,$s,2,3,"div",18),p()(),I()),i&2){let e,t,n=u().ngIf;a(4),s("ngIf",((e=n==null||n.errorMessages==null?null:n.errorMessages.length)!==null&&e!==void 0?e:0)>1),a(),s("ngIf",((t=n==null||n.errorMessages==null?null:n.errorMessages.length)!==null&&t!==void 0?t:0)>1),a(),se("inline",(n==null||n.errorMessages==null?null:n.errorMessages.length)===1),a(),s("ngForOf",n.errorMessages)}}function js(i,o){if(i&1&&(b(0),v(1,Vs,8,5,"ng-container",0)(2,qs,8,5,"ng-container",0),I()),i&2){let e,t,n=o.ngIf;a(),s("ngIf",((e=n==null||n.warningMessages==null?null:n.warningMessages.length)!==null&&e!==void 0?e:0)>0),a(),s("ngIf",((t=n==null||n.errorMessages==null?null:n.errorMessages.length)!==null&&t!==void 0?t:0)>0)}}function Qs(i,o){if(i&1&&(b(0),x(1,"cx-icon",1),y(2),I()),i&2){let e=u();a(),s("type",e.iconTypes.WARNING),a(),S(" ",e.currentGroup.name,`
`)}}var cn=i=>({number:i});function Ks(i,o){if(i&1&&(b(0),l(1,"div",1),g(2,"cxTranslate"),g(3,"cxTranslate"),l(4,"span",2),y(5),g(6,"cxTranslate"),p()(),l(7,"span",2),y(8),g(9,"cxTranslate"),p(),I()),i&2){let e=u();a(),M("aria-label",Z(2,3,"configurator.conflict.suggestionTitle",L(15,cn,e.suggestionNumber+1))+" "+Z(3,6,"configurator.conflict.suggestionText",L(17,_t,e.attribute.label))),a(4),ne(Z(6,9,"configurator.conflict.suggestionTitle",L(19,cn,e.suggestionNumber+1))),a(3),ne(Z(9,12,"configurator.conflict.suggestionText",L(21,_t,e.attribute.label)))}}function Hs(i,o){i&1&&(b(0),y(1),g(2,"cxTranslate"),I()),i&2&&(a(),S(" ",m(2,1,"configurator.button.exit")," "))}function Ws(i,o){i&1&&(b(0),y(1),g(2,"cxTranslate"),I()),i&2&&(a(),S(" ",m(2,1,"configurator.button.exitMobile")," "))}function Ys(i,o){if(i&1&&(b(0),v(1,Hs,3,3,"ng-container",0),g(2,"async"),v(3,Ws,3,3,"ng-container",0),g(4,"async"),I()),i&2){let e=u(2);a(),s("ngIf",m(2,2,e.isDesktop())),a(2),s("ngIf",m(4,4,e.isMobile()))}}function zs(i,o){i&1&&(b(0),y(1),g(2,"cxTranslate"),I()),i&2&&(a(),S(" ",m(2,1,"configurator.button.cancelConfigurationMobile")," "))}function Xs(i,o){i&1&&(b(0),y(1),g(2,"cxTranslate"),I()),i&2&&(a(),S(" ",m(2,1,"configurator.button.cancelConfiguration")," "))}function Zs(i,o){if(i&1&&(b(0),v(1,zs,3,3,"ng-container",0),g(2,"async"),v(3,Xs,3,3,"ng-container",0),g(4,"async"),I()),i&2){let e=u(2);a(),s("ngIf",m(2,2,e.isMobile())),a(2),s("ngIf",m(4,4,e.isDesktop()))}}function Js(i,o){if(i&1){let e=k();b(0),l(1,"button",1),g(2,"cxTranslate"),g(3,"cxTranslate"),U("click",function(){N(e);let n=u();return P(n.exitConfiguration())}),v(4,Ys,5,6,"ng-container",0)(5,Zs,5,6,"ng-container",0),p(),I()}if(i&2){let e=o.ngIf;a(),M("title",e.routerData.isOwnerCartEntry?m(2,3,"configurator.button.cancelConfiguration"):m(3,5,"configurator.button.exit")),a(3),s("ngIf",!e.routerData.isOwnerCartEntry),a(),s("ngIf",e.routerData.isOwnerCartEntry)}}var eu=(i,o,e,t,n,r,c)=>({componentKey:"Header",attribute:i,owner:o,group:e,language:t,expMode:n,isNavigationToGroupEnabled:r,isPricingAsync:c}),tu=(i,o,e,t,n,r,c)=>({componentKey:i,attribute:o,owner:e,group:t,language:n,expMode:r,isPricingAsync:c}),iu=(i,o,e,t,n,r)=>({componentKey:"Footer",attribute:i,owner:o,group:e,language:t,expMode:n,isPricingAsync:r});function nu(i,o){if(i&1&&(b(0),x(1,"cx-configurator-conflict-description",3),I()),i&2){let e=u();a(),s("currentGroup",e.group)}}function ru(i,o){if(i&1&&(b(0),x(1,"cx-configurator-conflict-suggestion",5),I()),i&2){let e=u(),t=e.$implicit,n=e.index,r=u();a(),s("currentGroup",r.group)("attribute",t)("suggestionNumber",n)}}function ou(i,o){if(i&1&&(b(0),x(1,"div",6),g(2,"async"),x(3,"div",6),g(4,"async"),x(5,"div",6),g(6,"async"),I()),i&2){let e,t,n,r=o.ngIf,c=u().$implicit,f=u();a(),s("cxConfiguratorAttributeComponent",ki(9,eu,c,f.owner,f.group,r,(e=m(2,3,f.expMode))!==null&&e!==void 0?e:!1,f.isNavigationToGroupEnabled,f.isPricingAsync)),a(2),s("cxConfiguratorAttributeComponent",ki(17,tu,f.getComponentKey(c),c,f.owner,f.group,r,(t=m(4,5,f.expMode))!==null&&t!==void 0?t:!1,f.isPricingAsync)),a(2),s("cxConfiguratorAttributeComponent",yr(25,iu,c,f.owner,f.group,r,(n=m(6,7,f.expMode))!==null&&n!==void 0?n:!1,f.isPricingAsync))}}function au(i,o){if(i&1&&(l(0,"div",4),v(1,ru,2,3,"ng-container",1)(2,ou,7,32,"ng-container",1),g(3,"async"),p()),i&2){let e=o.$implicit,t=u();se("cx-hidden",!e.visible),a(),s("ngIf",t.isConflictGroupType(t.group.groupType)),a(),s("ngIf",m(3,4,t.activeLanguage$))}}function cu(i,o){i&1&&(l(0,"h3",11),y(1),g(2,"cxTranslate"),p()),i&2&&(a(),S(" ",m(2,1,"configurator.header.resolveIssue")," "))}function su(i,o){i&1&&(l(0,"div",11),y(1),g(2,"cxTranslate"),p()),i&2&&(a(),S(" ",m(2,1,"configurator.header.resolveIssue")," "))}function uu(i,o){if(i&1&&(b(0),x(1,"cx-configurator-group",12),I()),i&2){let e=o.ngIf,t=u().ngIf;a(),s("group",e)("owner",t.owner)("isNavigationToGroupEnabled",!1)}}function lu(i,o){if(i&1&&(b(0),v(1,uu,2,3,"ng-container",10),g(2,"async"),I()),i&2){let e=u();a(),s("ngIf",m(2,1,e.conflictGroup$))}}var Nt=()=>[0,1,2];function pu(i,o){if(i&1&&(b(0),x(1,"cx-configurator-group",3),I()),i&2){let e=o.ngIf,t=u(2).ngIf,n=u();a(),s("group",e)("owner",t.owner)("isNavigationToGroupEnabled",n.isNavigationToGroupEnabled(t))("isPricingAsync",t.isPricingAsync)}}function du(i,o){if(i&1&&(b(0),v(1,pu,2,4,"ng-container",2),g(2,"async"),I()),i&2){let e=u(2);a(),s("ngIf",m(2,1,e.currentGroup$))}}function gu(i,o){if(i&1&&(b(0),v(1,du,3,3,"ng-container",1),I()),i&2){let e=o.ngIf,t=u(),n=ce(3);a(),s("ngIf",!t.isDialogActive(e))("ngIfElse",n)}}function fu(i,o){i&1&&(b(0),x(1,"div",20),I())}function mu(i,o){if(i&1&&(l(0,"div",15)(1,"div",16),x(2,"div",17)(3,"div",18),p(),l(4,"div",19),v(5,fu,2,0,"ng-container",2),p()()),i&2){let e=o.index;a(5),s("ngIf",e!==0)}}function vu(i,o){i&1&&(b(0),l(1,"div",5)(2,"div",6),x(3,"div",7)(4,"div",8),p(),l(5,"div",9),x(6,"div",10)(7,"div",11),p()(),l(8,"div",5)(9,"div",6),x(10,"div",7)(11,"div",8),l(12,"div",12),x(13,"div",13),p()(),l(14,"div",9),v(15,mu,6,1,"div",14),p()(),I()),i&2&&(a(15),s("ngForOf",Fe(1,Nt)))}function _u(i,o){i&1&&v(0,vu,16,2,"ng-container",4),i&2&&s("ngForOf",Fe(1,Nt))}var Cu=["groupItem"],hu=()=>({key:"cx-menu-back"}),yu=()=>[0,1,2,3,4,5,6,7,8,9];function bu(i,o){if(i&1){let e=k();l(0,"button",9,1),g(2,"cxTranslate"),g(3,"cxTranslate"),U("click",function(){N(e);let n=u(3).ngIf,r=u(4);return P(r.navigateUp(n))})("keydown",function(n){N(e);let r=u(2),c=r.$implicit,f=r.index,T=u().ngIf,h=u(4);return P(h.switchGroupOnArrowPress(n,f,c,T))}),x(4,"cx-icon",10),y(5),g(6,"cxTranslate"),p()}if(i&2){let e=u().ngIf,t=u(6);s("cxFocus",Fe(11,hu)),M("aria-selected",!1)("aria-label",t.isConflictGroupType(e.groupType)?m(2,5,"configurator.a11y.conflictBack"):m(3,7,"configurator.a11y.groupBack")),a(4),s("type",t.iconTypes.CARET_LEFT),a(),S(" ",m(6,9,"configurator.button.back")," ")}}function Iu(i,o){if(i&1&&(b(0),v(1,bu,7,12,"button",8),I()),i&2){let e=o.ngIf,t=u().index;a(),s("ngIf",e!==null&&t===0)}}function xu(i,o){if(i&1&&(x(0,"cx-icon",21),g(1,"cxTranslate"),g(2,"cxTranslate")),i&2){let e=u(2).$implicit,t=u(5);O("id",t.createIconId(t.iconTypes.CARET_RIGHT,e.id)),O("title",m(1,4,"configurator.icon.subgroup")),s("type",t.iconTypes.CARET_RIGHT),M("aria-label",m(2,6,"configurator.a11y.iconSubGroup"))}}function Tu(i,o){if(i&1){let e=k();b(0),l(1,"button",11,1),g(3,"async"),g(4,"async"),U("click",function(){N(e);let n=u().$implicit,r=u().ngIf,c=u(4);return P(c.click(n,r))})("keydown",function(n){N(e);let r=u(),c=r.$implicit,f=r.index,T=u().ngIf,h=u(4);return P(h.switchGroupOnArrowPress(n,f,c,T))}),l(5,"span",12),y(6),p(),l(7,"div",13)(8,"div",14),y(9),p(),l(10,"div",15),x(11,"cx-icon",16),g(12,"cxTranslate"),g(13,"cxTranslate"),p(),l(14,"div",15),x(15,"cx-icon",17),g(16,"cxTranslate"),g(17,"cxTranslate"),x(18,"cx-icon",18),g(19,"cxTranslate"),g(20,"cxTranslate"),p(),l(21,"div",19),v(22,xu,3,8,"cx-icon",20),p()()(),I()}if(i&2){let e=u().$implicit,t=u().ngIf,n=u(3).ngIf,r=u();a(),se("DISABLED",!e.configurable)("cx-menu-conflict",r.isConflictGroupType(e.groupType))("active",r.isGroupSelected(e.id,t.id))("disable",!e.configurable),O("id",e.id),O("ngClass",m(3,32,r.getGroupStatusStyles(e,n))),s("cxFocus",L(48,Me,e.id))("tabindex",r.getTabIndex(e,t.id)),M("aria-describedby",m(4,34,r.getAriaDescribedby(e,n)))("aria-selected",r.isGroupSelected(e.id,t.id))("aria-controls",r.isGroupSelected(e.id,t.id)?r.createAriaControls(e.id):null)("aria-label",r.getAriaLabel(e)),a(4),O("title",e.description),a(),ne(r.getGroupMenuTitle(e)),a(3),S(" ",r.getConflictNumber(e)," "),a(2),O("id",r.createIconId(r.iconTypes.WARNING,e.id)),O("title",m(12,36,"configurator.icon.groupConflict")),s("type",r.iconTypes.WARNING),M("aria-label",m(13,38,"configurator.a11y.iconConflict")),a(4),O("id",r.createIconId(r.iconTypes.ERROR,e.id)),O("title",m(16,40,"configurator.icon.groupIncomplete")),s("type",r.iconTypes.ERROR),M("aria-label",m(17,42,"configurator.a11y.iconIncomplete")),a(3),O("id",r.createIconId(r.iconTypes.SUCCESS,e.id)),O("title",m(19,44,"configurator.icon.groupComplete")),s("type",r.iconTypes.SUCCESS),M("aria-label",m(20,46,"configurator.a11y.iconComplete")),a(4),s("ngIf",r.hasSubGroups(e))}}function Su(i,o){if(i&1&&(b(0),v(1,Iu,2,1,"ng-container",6),g(2,"async"),v(3,Tu,23,50,"ng-container",6),g(4,"async"),I()),i&2){let e=o.$implicit,t=u(5);a(),s("ngIf",m(2,2,t.displayedParentGroup$)),a(2),s("ngIf",m(4,4,t.displayMenuItem(e)))}}function Eu(i,o){if(i&1&&(b(0),v(1,Su,5,6,"ng-container",7),I()),i&2){let e=u().ngIf,t=u(3);a(),s("ngForOf",e)("ngForTrackBy",t.trackByFn)}}function Ou(i,o){if(i&1&&(b(0),v(1,Eu,2,2,"ng-container",6),g(2,"async"),I()),i&2){let e=u(3);a(),s("ngIf",m(2,1,e.currentGroup$))}}function wu(i,o){if(i&1&&(b(0),l(1,"div",3)(2,"span",4),y(3),g(4,"cxTranslate"),p(),l(5,"span",5),y(6),g(7,"cxTranslate"),p(),v(8,Ou,3,3,"ng-container",6),g(9,"async"),p(),I()),i&2){let e=u(2);a(3),S(" ",m(4,3,"configurator.a11y.listOfGroups")," "),a(3),S(" ",m(7,5,"configurator.a11y.inListOfGroups")," "),a(2),s("ngIf",m(9,7,e.displayedGroups$))}}function Au(i,o){if(i&1&&(b(0),v(1,wu,10,9,"ng-container",2),I()),i&2){let e=o.ngIf,t=u(),n=ce(3);a(),s("ngIf",!t.isDialogActive(e))("ngIfElse",n)}}function Du(i,o){i&1&&(l(0,"div",24),x(1,"div",25),p())}function Fu(i,o){i&1&&(l(0,"div",22),v(1,Du,2,0,"div",23),p()),i&2&&(a(),s("ngForOf",Fe(1,yu)))}function Ru(i,o){i&1&&(b(0),x(1,"cx-hamburger-menu"),I())}function Nu(i,o){if(i&1&&(b(0),l(1,"div",2),v(2,Ru,2,0,"ng-container",3),g(3,"async"),y(4),p(),I()),i&2){let e=o.ngIf,t=u();a(2),s("ngIf",m(3,2,t.isMobile())),a(2),S(" ",t.getGroupTitle(e)," ")}}function Pu(i,o){i&1&&x(0,"div",4)}function Mu(i,o){if(i&1&&(b(0),l(1,"div",4),y(2),p(),l(3,"div",5),x(4,"cx-configurator-price",6),p(),I()),i&2){let e=u();a(2),S(" ",e.attributeOverview.attribute," "),a(2),s("formula",e.extractPriceFormulaParameters())}}function Uu(i,o){if(i&1&&(l(0,"div",5),x(1,"cx-configurator-price",6),p(),l(2,"div",4),y(3),p()),i&2){let e=u();a(),s("formula",e.extractPriceFormulaParameters()),a(2),S(" ",e.attributeOverview.attribute," ")}}function Vu(i,o){if(i&1&&(l(0,"span",12),y(1),g(2,"cxTranslate"),p()),i&2){let e=u(2);a(),Li(" ",m(2,2,"configurator.attribute.id"),": ",e.attributeOverview.productCode,"")}}function Gu(i,o){if(i&1&&(l(0,"div",13)(1,"span",14),y(2),g(3,"cxTranslate"),p(),l(4,"span",15),y(5),g(6,"cxNumeric"),p()()),i&2){let e=u(2);a(2),ne(m(3,2,"configurator.attribute.quantity")),a(3),ne(m(6,4,e.attributeOverview.quantity))}}function Bu(i,o){if(i&1&&(l(0,"div",16)(1,"span",14),y(2),g(3,"cxTranslate"),p(),l(4,"span",15),y(5),p()()),i&2){let e=u(2);a(2),ne(m(3,2,"configurator.overviewForm.itemPrice")),a(3),ne(e.attributeOverview.valuePrice==null?null:e.attributeOverview.valuePrice.formattedValue)}}function Lu(i,o){if(i&1&&(b(0),l(1,"div",1)(2,"div",2),x(3,"cx-media",3),p(),l(4,"span",4),y(5),p(),l(6,"div",5)(7,"div"),y(8),p(),v(9,Vu,3,4,"span",6)(10,Gu,7,6,"div",7)(11,Bu,6,4,"div",8),p()(),l(12,"div",9)(13,"span",10),y(14),p(),x(15,"cx-configurator-price",11),p(),I()),i&2){let e=o.ngIf,t=u();a(3),s("container",t.getProductPrimaryImage(e)),a(2),S(" ",t.getAriaLabel()," "),a(3),S(" ",t.attributeOverview.value," "),a(),s("ngIf",t.attributeOverview==null?null:t.attributeOverview.productCode),a(),s("ngIf",t.displayQuantity()),a(),s("ngIf",t.displayPrice()),a(3),ne(t.attributeOverview.attribute),a(),s("formula",t.extractPriceFormulaParameters())}}var jn=i=>({group:i});function ku(i,o){if(i&1){let e=k();b(0),l(1,"button",2),g(2,"cxTranslate"),U("click",function(){let n=N(e).$implicit,r=u();return P(r.onAttrFilterRemove(r.config,n))}),y(3),g(4,"cxTranslate"),l(5,"span",3),x(6,"cx-icon",4),p()(),I()}if(i&2){let e=o.$implicit,t=u();a(),O("title",m(2,3,e===t.attributeFilterTypes.PRICE_RELEVANT?"configurator.overviewFilter.removeByPrice":"configurator.overviewFilter.removeMySelections")),a(2),S(" ",m(4,5,e===t.attributeFilterTypes.PRICE_RELEVANT?"configurator.overviewFilter.byPrice":"configurator.overviewFilter.mySelections")," "),a(3),s("type",t.iconTypes.CLOSE)}}function $u(i,o){if(i&1){let e=k();b(0),l(1,"button",2),g(2,"cxTranslate"),U("click",function(){let n=N(e).$implicit,r=u();return P(r.onGroupFilterRemove(r.config,n))}),y(3),l(4,"span",3),x(5,"cx-icon",4),p()(),I()}if(i&2){let e=o.$implicit,t=u();a(),O("title",Z(2,3,"configurator.overviewFilter.removeByGroup",L(6,jn,t.getGroupFilterDescription(t.config.overview,e)))),a(2),S(" ",t.getGroupFilterDescription(t.config.overview,e)," "),a(2),s("type",t.iconTypes.CLOSE)}}function qu(i,o){if(i&1){let e=k();b(0),l(1,"button",2),g(2,"cxTranslate"),U("click",function(){N(e);let n=u();return P(n.onRemoveAll(n.config))}),y(3),g(4,"cxTranslate"),l(5,"span",3),x(6,"cx-icon",4),p()(),I()}if(i&2){let e=u();a(),O("title",m(2,3,"configurator.overviewFilter.removeAllFilters")),a(2),S(" ",m(4,5,"configurator.overviewFilter.removeAll")," "),a(3),s("type",e.iconTypes.CLOSE)}}var ju=i=>({groupName:i});function Qu(i,o){if(i&1&&(b(0),x(1,"cx-configurator-overview-filter-bar",2),I()),i&2){let e=u();a(),s("config",e.config)}}function Ku(i,o){if(i&1){let e=k();b(0),l(1,"div",3),y(2),g(3,"cxTranslate"),p(),l(4,"div",4)(5,"div",5)(6,"input",6),g(7,"cxTranslate"),U("change",function(){N(e);let n=u();return P(n.onFilter(n.config))}),p(),l(8,"label",7),y(9),g(10,"cxTranslate"),p()()(),l(11,"div",4)(12,"div",5)(13,"input",8),g(14,"cxTranslate"),U("change",function(){N(e);let n=u();return P(n.onFilter(n.config))}),p(),l(15,"label",9),y(16),g(17,"cxTranslate"),p()()(),I()}if(i&2){let e=u();a(2),S(" ",m(3,7,"configurator.overviewFilter.byOption")," "),a(4),s("formControl",e.priceFilter),M("aria-label",m(7,9,"configurator.a11y.filterOverviewByPrice")),a(3),S(" ",m(10,11,"configurator.overviewFilter.byPrice"),""),a(4),s("formControl",e.mySelectionsFilter),M("aria-label",m(14,13,"configurator.a11y.filterOverviewByMySelections")),a(3),S(" ",m(17,15,"configurator.overviewFilter.mySelections"),"")}}function Hu(i,o){if(i&1){let e=k();b(0),l(1,"div",4)(2,"div",5)(3,"input",11),g(4,"cxTranslate"),U("change",function(){N(e);let n=u(2);return P(n.onFilter(n.config))}),p(),l(5,"label",12),y(6),p()()(),I()}if(i&2){let e=o.$implicit,t=o.index,n=u(2);a(3),O("id","cx-configurator-overview-filter-option-group-"+e.id),O("name","config-overview-group-filter-"+e.id),s("formControl",n.groupFilters[t]),M("aria-label",Z(4,6,"configurator.a11y.filterOverviewByGroup",L(9,ju,e.groupDescription))),a(2),O("for","cx-configurator-overview-filter-option-group-"+e.id),a(),ne(e.groupDescription)}}function Wu(i,o){if(i&1&&(b(0),l(1,"div",3),y(2),g(3,"cxTranslate"),p(),v(4,Hu,7,11,"ng-container",10),I()),i&2){let e=u();a(2),S(" ",m(3,2,"configurator.overviewFilter.byGroup")," "),a(2),s("ngForOf",e.config.overview.possibleGroups)}}function Yu(i,o){i&1&&(l(0,"div",13),y(1),g(2,"cxTranslate"),p()),i&2&&(a(),S(" ",m(2,1,"configurator.overviewFilter.noFiltersAvailable"),`
`))}var zu=["filterButton"],ro=i=>({numAppliedFilters:i});function Xu(i,o){if(i&1){let e=k();b(0),l(1,"button",5,1),g(3,"cxTranslate"),U("click",function(){N(e);let n=u().ngIf,r=u();return P(r.openFilterModal(n))}),y(4),g(5,"cxTranslate"),p(),I()}if(i&2){let e=u().ngIf,t=u();a(),O("title",Z(3,2,t.getNumFilters(e.overview)>0?"configurator.a11y.filterOverviewWithCount":"configurator.a11y.filterOverview",L(8,ro,t.getNumFilters(e.overview)))),a(3),S(" ",Z(5,5,t.getNumFilters(e.overview)>0?"configurator.button.filterOverviewWithCount":"configurator.button.filterOverview",L(10,ro,t.getNumFilters(e.overview)))," ")}}function Zu(i,o){if(i&1&&(b(0),v(1,Xu,6,12,"ng-container",3),g(2,"async"),x(3,"cx-configurator-overview-filter-bar",4),I()),i&2){let e=o.ngIf,t=u();a(),s("ngIf",!m(2,2,t.isDisplayOnlyVariant())||(e.overview.possibleGroups==null?null:e.overview.possibleGroups.length)!==1),a(2),s("config",e)}}function Ju(i,o){i&1&&x(0,"div",6)}function el(i,o){i&1&&(l(0,"h3",8),y(1),g(2,"cxTranslate"),p()),i&2&&(a(),S(" ",m(2,1,"configurator.overviewFilter.title")," "))}function tl(i,o){i&1&&(l(0,"div",8),y(1),g(2,"cxTranslate"),p()),i&2&&(a(),S(" ",m(2,1,"configurator.overviewFilter.title")," "))}function il(i,o){if(i&1&&(b(0),l(1,"div",9),x(2,"cx-configurator-overview-filter",10),p(),I()),i&2){let e=o.ngIf;a(2),s("config",e)("showFilterBar",!1)}}var fo=i=>({overviewGroups:i,level:1,idPrefix:""}),mo=(i,o,e)=>({overviewGroups:i,level:o,idPrefix:e}),nl=()=>[0,1,2,3,4,5];function rl(i,o){i&1&&qt(0)}function ol(i,o){if(i&1&&(b(0),v(1,rl,1,0,"ng-container",4),I()),i&2){let e=u().ngIf;u();let t=ce(5);a(),s("ngTemplateOutlet",t)("ngTemplateOutletContext",L(2,fo,e.overview==null?null:e.overview.groups))}}function al(i,o){if(i&1&&(b(0),v(1,ol,2,4,"ng-container",3),I()),i&2){let e=o.ngIf,t=u(),n=ce(3);a(),s("ngIf",t.hasAttributes(e))("ngIfElse",n)}}function cl(i,o){i&1&&(l(0,"div",5)(1,"h2"),y(2),g(3,"cxTranslate"),p(),l(4,"p"),y(5),g(6,"cxTranslate"),p()()),i&2&&(a(2),ne(m(3,2,"configurator.overviewForm.noAttributeHeader")),a(3),ne(m(6,4,"configurator.overviewForm.noAttributeText")))}function sl(i,o){if(i&1&&(b(0),x(1,"cx-configurator-overview-attribute",16),I()),i&2){let e=u().$implicit;a(),s("attributeOverview",e)}}function ul(i,o){if(i&1&&(b(0),x(1,"cx-configurator-cpq-overview-attribute",16),I()),i&2){let e=u().$implicit;a(),s("attributeOverview",e)}}function ll(i,o){if(i&1&&(b(0),x(1,"cx-configurator-overview-attribute",16),I()),i&2){let e=u().$implicit;a(),s("attributeOverview",e)}}function pl(i,o){if(i&1&&(l(0,"div",12),b(1,13),v(2,sl,2,1,"ng-container",14)(3,ul,2,1,"ng-container",14)(4,ll,2,1,"ng-container",15),I(),p()),i&2){let e=o.$implicit,t=o.index,n=u().$implicit,r=u(2);s("ngClass",r.getStyleClasses(n.attributes,t)),a(),s("ngSwitch",e==null?null:e.type),a(),s("ngSwitchCase",r.attributeOverviewType.GENERAL),a(),s("ngSwitchCase",r.attributeOverviewType.BUNDLE)}}function dl(i,o){i&1&&qt(0)}function gl(i,o){if(i&1&&(b(0),v(1,dl,1,0,"ng-container",4),I()),i&2){let e=u().$implicit,t=u(),n=t.level,r=t.idPrefix,c=u(),f=ce(5);a(),s("ngTemplateOutlet",f)("ngTemplateOutletContext",Et(2,mo,e.subGroups,n+1,c.getPrefixId(r,e.id)))}}function fl(i,o){if(i&1&&(b(0),l(1,"div",8)(2,"span",6),y(3),g(4,"cxTranslate"),p(),l(5,"h2",9)(6,"span"),y(7),p()(),v(8,pl,5,4,"div",10)(9,gl,2,6,"ng-container",11),p(),I()),i&2){let e=o.$implicit,t=u(),n=t.level,r=t.idPrefix,c=u();a(),O("id",c.getGroupId(r,e.id)),s("ngClass",c.getGroupLevelStyleClasses(n,e.subGroups)),a(2),S(" ",Z(4,6,"configurator.a11y.group",L(9,jn,e.groupDescription))," "),a(4),ne(e.groupDescription),a(),s("ngForOf",e.attributes),a(),s("ngIf",(e.subGroups==null?null:e.subGroups.length)>0)}}function ml(i,o){if(i&1&&(l(0,"span",6),y(1),g(2,"cxTranslate"),p(),v(3,fl,10,11,"ng-container",7)),i&2){let e=o.overviewGroups;a(),S(" ",m(2,2,"configurator.a11y.listOfAttributesAndValues")," "),a(2),s("ngForOf",e)}}function vl(i,o){i&1&&(b(0),l(1,"div",20),x(2,"div",21),p(),l(3,"div",22),x(4,"div",23),p(),x(5,"div",24),I())}function _l(i,o){i&1&&(b(0),l(1,"div",17),x(2,"div",18),l(3,"div",19),v(4,vl,6,0,"ng-container",7),p()(),I()),i&2&&(a(4),s("ngForOf",Fe(1,nl)))}function Cl(i,o){i&1&&v(0,_l,5,2,"ng-container",7),i&2&&s("ngForOf",Fe(1,Nt))}function hl(i,o){i&1&&qt(0)}function yl(i,o){if(i&1&&(b(0),v(1,hl,1,0,"ng-container",2),I()),i&2){let e=u(),t=ce(2);a(),s("ngTemplateOutlet",t)("ngTemplateOutletContext",L(2,fo,e.config.overview.groups))}}function bl(i,o){i&1&&qt(0)}function Il(i,o){if(i&1&&(b(0),v(1,bl,1,0,"ng-container",2),I()),i&2){let e=u().$implicit,t=u(),n=t.level,r=t.idPrefix,c=u(),f=ce(2);a(),s("ngTemplateOutlet",f)("ngTemplateOutletContext",Et(2,mo,e.subGroups,n+1,c.getPrefixId(r,e.id)))}}function xl(i,o){if(i&1){let e=k();b(0),l(1,"li",4)(2,"button",5),g(3,"cxTranslate"),U("click",function(){let n=N(e).$implicit,r=u().idPrefix,c=u();return P(c.navigateToGroup(r,n.id))}),l(4,"span",6),y(5),p(),x(6,"cx-icon",7),p(),v(7,Il,2,6,"ng-container",1),p(),I()}if(i&2){let e=o.$implicit,t=u(),n=t.level,r=t.idPrefix,c=u();a(),s("ngClass",c.getGroupLevelStyleClasses(n)),a(),O("id",c.getMenuItemId(r,e.id)),M("aria-label",Z(3,6,"configurator.a11y.groupName",L(9,jn,e.groupDescription))),a(3),S(" ",e.groupDescription,""),a(),s("type",c.iconTypes.ARROW_LEFT),a(),s("ngIf",(e.subGroups==null?null:e.subGroups.length)>0)}}function Tl(i,o){if(i&1&&(l(0,"ul"),v(1,xl,8,11,"ng-container",3),p()),i&2){let e=o.overviewGroups;a(),s("ngForOf",e)}}var vo=(i,o)=>({entityKey:i,ownerType:o}),_o=(i,o)=>({cxRoute:i,params:o}),Sl=(i,o)=>({resolveIssues:!0,skipConflicts:i,productCode:o}),El=i=>({resolveIssues:!0,productCode:i});function Ol(i,o){if(i&1&&(l(0,"div",3),x(1,"cx-icon",4),l(2,"div",5),y(3),g(4,"cxTranslate"),l(5,"button",6),g(6,"cxUrl"),g(7,"async"),y(8),g(9,"cxTranslate"),p()()()),i&2){let e=o.ngIf,t=u(2).ngIf,n=u();a(),s("type",n.iconTypes.ERROR),a(2),S(" ",Z(4,5,"configurator.notificationBanner.numberOfIssues",L(14,Ai,e))," "),a(2),s("routerLink",m(6,8,Le(19,_o,"configure"+t.owner.configuratorType,Le(16,vo,t.owner.id,t.owner.type))))("queryParams",Le(22,Sl,m(7,10,n.skipConflictsOnIssueNavigation$),t.productCode)),a(3),S(" ",m(9,12,"configurator.header.resolveIssues")," ")}}function wl(i,o){if(i&1&&(l(0,"div",7),x(1,"cx-icon",4),l(2,"div",8),y(3),g(4,"cxTranslate"),l(5,"button",9),g(6,"cxUrl"),y(7),g(8,"cxTranslate"),p()()()),i&2){let e=o.ngIf,t=u(2).ngIf,n=u();a(),s("type",n.iconTypes.WARNING),a(2),S(" ",Z(4,5,"configurator.notificationBanner.numberOfConflicts",L(12,Ai,e))," "),a(2),s("routerLink",m(6,8,Le(17,_o,"configure"+t.owner.configuratorType,Le(14,vo,t.owner.id,t.owner.type))))("queryParams",L(20,El,t.productCode)),a(2),S(" ",m(8,10,"configurator.header.resolveConflicts")," ")}}function Al(i,o){if(i&1&&(b(0),v(1,Ol,10,25,"div",1),g(2,"async"),v(3,wl,9,22,"div",2),g(4,"async"),I()),i&2){let e=u(2);a(),s("ngIf",m(2,2,e.numberOfIssues$)),a(2),s("ngIf",m(4,4,e.numberOfConflicts$))}}function Dl(i,o){if(i&1&&(b(0),v(1,Al,5,6,"ng-container",0),g(2,"async"),I()),i&2){let e=u();a(),s("ngIf",m(2,1,e.configurationOverview$))}}var Fl=["menuTab"],Rl=["filterTab"],Co=()=>[0,1],Nl=()=>[0,1,2,3];function Pl(i,o){if(i&1&&x(0,"cx-configurator-overview-filter",7),i&2){let e=u().ngIf;s("config",e)}}function Ml(i,o){if(i&1&&x(0,"cx-configurator-overview-menu",7),i&2){let e=u().ngIf;s("config",e)}}function Ul(i,o){if(i&1){let e=k();b(0),l(1,"div",4)(2,"button",5,1),U("keydown",function(n){N(e);let r=u();return P(r.switchTabOnArrowPress(n,"#menuTab"))})("keydown.enter",function(){N(e);let n=u();return P(n.onMenu())})("keydown.space",function(){N(e);let n=u();return P(n.onMenu())})("click",function(){N(e);let n=u();return P(n.onMenu())}),y(4),g(5,"cxTranslate"),p(),l(6,"button",5,2),U("keydown",function(n){N(e);let r=u();return P(r.switchTabOnArrowPress(n,"#filterTab"))})("keydown.enter",function(){N(e);let n=u();return P(n.onFilter())})("keydown.space",function(){N(e);let n=u();return P(n.onFilter())})("click",function(){N(e);let n=u();return P(n.onFilter())}),y(8),g(9,"cxTranslate"),p()(),v(10,Pl,1,1,"cx-configurator-overview-filter",6)(11,Ml,1,1,"cx-configurator-overview-menu",6),I()}if(i&2){let e=u();a(2),se("active",!e.showFilter),s("tabindex",e.getTabIndexForMenuTab()),M("aria-selected",!e.showFilter),a(2),S(" ",m(5,12,"configurator.overviewSidebar.menu")," "),a(2),se("active",e.showFilter),s("tabindex",e.getTabIndexForFilterTab()),M("aria-selected",e.showFilter),a(2),S(" ",m(9,14,"configurator.overviewSidebar.filter")," "),a(2),s("ngIf",e.showFilter),a(),s("ngIf",!e.showFilter)}}function Vl(i,o){i&1&&(l(0,"div",12),x(1,"div",13),p())}function Gl(i,o){i&1&&(b(0),l(1,"div",15),v(2,Vl,2,0,"div",16),p(),I()),i&2&&(a(2),s("ngForOf",Fe(1,Nl)))}function Bl(i,o){i&1&&(l(0,"div",12),x(1,"div",13),p())}function Ll(i,o){i&1&&(l(0,"div",12),x(1,"div",13),p())}function kl(i,o){i&1&&(b(0),l(1,"div",15),v(2,Bl,2,0,"div",16),l(3,"div",17),v(4,Ll,2,0,"div",16),p()(),I()),i&2&&(a(2),s("ngForOf",Fe(2,Nt)),a(2),s("ngForOf",Fe(3,Nt)))}function $l(i,o){i&1&&(l(0,"div",12),x(1,"div",13),p())}function ql(i,o){i&1&&(b(0),l(1,"div",11),v(2,$l,2,0,"div",16),p(),I()),i&2&&(a(2),s("ngForOf",Fe(1,Co)))}function jl(i,o){if(i&1&&(b(0),l(1,"div",11)(2,"div",12),x(3,"div",13),p(),v(4,Gl,3,2,"ng-container",14)(5,kl,5,4,"ng-container",14)(6,ql,3,2,"ng-container",14),p(),I()),i&2){let e=o.index;a(4),s("ngIf",e===0),a(),s("ngIf",e===1),a(),s("ngIf",e===2)}}function Ql(i,o){i&1&&(b(0),v(1,jl,7,3,"ng-container",10),I()),i&2&&(a(),s("ngForOf",Fe(1,Nt)))}function Kl(i,o){i&1&&(l(0,"div",8),x(1,"div",9),v(2,Ql,2,2,"ng-container",10),p()),i&2&&(a(2),s("ngForOf",Fe(1,Co)))}function Hl(i,o){if(i&1){let e=k();b(0),l(1,"button",1),g(2,"async"),g(3,"cxTranslate"),U("click",function(){N(e);let n=u().ngIf,r=u();return P(r.onPrevious(n))}),y(4),g(5,"cxTranslate"),p(),l(6,"button",2),g(7,"async"),g(8,"cxTranslate"),U("click",function(){N(e);let n=u().ngIf,r=u();return P(r.onNext(n))}),y(9),g(10,"cxTranslate"),p(),I()}if(i&2){let e=u().ngIf,t=u();a(),s("disabled",m(2,6,t.isFirstGroup(e.owner))),M("aria-label",m(3,8,"configurator.a11y.previous")),a(3),S(" ",m(5,10,"configurator.button.previous")," "),a(2),s("disabled",m(7,12,t.isLastGroup(e.owner))),M("aria-label",m(8,14,"configurator.a11y.next")),a(3),S(" ",m(10,16,"configurator.button.next")," ")}}function Wl(i,o){if(i&1&&(b(0),v(1,Hl,11,18,"ng-container",0),I()),i&2){let e=o.ngIf;a(),s("ngIf",e.groups.length>1)}}function Yl(i,o){if(i&1&&(b(0),l(1,"div",6)(2,"div",4),y(3),g(4,"cxTranslate"),p(),l(5,"div",5),y(6),p()(),l(7,"div",7)(8,"div",4),y(9),g(10,"cxTranslate"),p(),l(11,"div",5),y(12),p()(),I()),i&2){let e=u(2).ngIf;a(3),S(" ",m(4,4,"configurator.priceSummary.basePrice"),": "),a(3),S(" ",e==null||e.priceSummary==null||e.priceSummary.basePrice==null?null:e.priceSummary.basePrice.formattedValue," "),a(3),S(" ",m(10,6,"configurator.priceSummary.selectedOptions"),": "),a(3),S(" ",e==null||e.priceSummary==null||e.priceSummary.selectedOptions==null?null:e.priceSummary.selectedOptions.formattedValue," ")}}function zl(i,o){if(i&1&&(b(0),l(1,"div",1)(2,"div",2),v(3,Yl,13,8,"ng-container",0),l(4,"div",3)(5,"div",4),y(6),g(7,"cxTranslate"),p(),l(8,"div",5),y(9),p()()()(),I()),i&2){let e=u().ngIf;a(3),s("ngIf",!e.hideBasePriceAndSelectedOptions),a(3),S(" ",m(7,3,"configurator.priceSummary.totalPricePerItem"),": "),a(3),S(" ",e==null||e.priceSummary==null||e.priceSummary.currentTotal==null?null:e.priceSummary.currentTotal.formattedValue," ")}}function Xl(i,o){if(i&1&&(b(0),v(1,zl,10,5,"ng-container",0),I()),i&2){let e=o.ngIf;a(),s("ngIf",e.pricingEnabled)}}var ho=i=>({product:i}),Zl=i=>({name:i}),Jl=i=>({logsys:i}),ep=i=>({version:i});function tp(i,o){if(i&1&&(b(0),l(1,"div",13)(2,"span",14),y(3),g(4,"cxTranslate"),p()(),x(5,"cx-icon",15),g(6,"cxTranslate"),I()),i&2){let e=u().ngIf,t=u();a(3),ne(m(4,3,"configurator.header.showMore")),a(2),s("type",t.iconTypes.CARET_DOWN),M("aria-label",Z(6,5,"configurator.a11y.showMoreProductInfo",L(8,ho,e.name)))}}function ip(i,o){if(i&1&&(b(0),l(1,"div",16),y(2),g(3,"cxTranslate"),p(),x(4,"cx-icon",15),g(5,"cxTranslate"),I()),i&2){let e=u().ngIf,t=u();a(2),S(" ",m(3,3,"configurator.header.showLess")," "),a(2),s("type",t.iconTypes.CARET_UP),M("aria-label",Z(5,5,"configurator.a11y.showLessProductInfo",L(8,ho,e.name)))}}function np(i,o){if(i&1&&(l(0,"span"),g(1,"cxTranslate"),y(2),p()),i&2){let e=u().ngIf;M("aria-label",m(1,2,"configurator.a11y.productName")),a(2),S(" ",e.name," ")}}function rp(i,o){if(i&1&&(l(0,"span"),g(1,"cxTranslate"),y(2),p()),i&2){let e=u().ngIf;M("aria-label",m(1,2,"configurator.a11y.productCode")),a(2),S(" ",e.code," ")}}function op(i,o){if(i&1&&(l(0,"span"),g(1,"cxTranslate"),y(2),p()),i&2){let e=u().ngIf;M("aria-label",m(1,2,"configurator.a11y.productDescription")),a(2),S(" ",e.description," ")}}function ap(i,o){if(i&1&&(b(0),l(1,"div",18)(2,"span",19),g(3,"cxTranslate"),y(4),g(5,"cxTranslate"),p(),l(6,"span",20),y(7),p()(),I()),i&2){let e=u(2).ngIf;a(2),M("aria-label",Z(3,3,"configurator.a11y.kbKeyName",L(8,Zl,e.kbKey.kbName))),a(2),S(" ",m(5,6,"configurator.header.kbKeyName")," "),a(3),S(" ",e.kbKey.kbName," ")}}function cp(i,o){if(i&1&&(b(0),l(1,"div",18)(2,"span",19),g(3,"cxTranslate"),y(4),g(5,"cxTranslate"),p(),l(6,"span",20),y(7),p()(),I()),i&2){let e=u(2).ngIf;a(2),M("aria-label",Z(3,3,"configurator.a11y.kbKeyLogsys",L(8,Jl,e.kbKey.kbLogsys))),a(2),S(" ",m(5,6,"configurator.header.kbKeyLogsys")," "),a(3),S(" ",e.kbKey.kbLogsys," ")}}function sp(i,o){if(i&1&&(b(0),l(1,"div",18)(2,"span",19),g(3,"cxTranslate"),y(4),g(5,"cxTranslate"),p(),l(6,"span",20),y(7),p()(),I()),i&2){let e=u(2).ngIf;a(2),M("aria-label",Z(3,3,"configurator.a11y.kbKeyVersion",L(8,ep,e.kbKey.kbVersion))),a(2),S(" ",m(5,6,"configurator.header.kbKeyVersion")," "),a(3),S(" ",e.kbKey.kbVersion," ")}}function up(i,o){if(i&1&&(b(0),l(1,"div",18)(2,"span",19),g(3,"cxTranslate"),y(4),g(5,"cxTranslate"),p(),l(6,"span",20),y(7),p()(),I()),i&2){let e=u(2).ngIf;a(2),M("aria-label",Z(3,3,"configurator.a11y.kbKeyBuildNr",L(8,cn,e.kbKey.kbBuildNumber))),a(2),S(" ",m(5,6,"configurator.header.kbKeyBuildNr")," "),a(3),S(" ",e.kbKey.kbBuildNumber," ")}}function lp(i,o){if(i&1&&(b(0),l(1,"div",17),v(2,ap,8,10,"ng-container",5)(3,cp,8,10,"ng-container",5)(4,sp,8,10,"ng-container",5)(5,up,8,10,"ng-container",5),p(),I()),i&2){let e=u().ngIf;a(2),s("ngIf",e.kbKey.kbName),a(),s("ngIf",e.kbKey.kbLogsys),a(),s("ngIf",e.kbKey.kbVersion),a(),s("ngIf",e.kbKey.kbBuildNumber)}}function pp(i,o){if(i&1&&(b(0),v(1,lp,6,4,"ng-container",5),I()),i&2){let e=o.ngIf;a(),s("ngIf",e.kbKey)}}function dp(i,o){if(i&1&&(b(0),v(1,pp,2,1,"ng-container",5),g(2,"async"),I()),i&2){let e=u(2);a(),s("ngIf",m(2,1,e.configuration$))}}function gp(i,o){if(i&1){let e=k();b(0),l(1,"div",2)(2,"div",3)(3,"span"),y(4),p()(),l(5,"button",4),U("click",function(){N(e);let n=u();return P(n.triggerDetails())}),v(6,tp,7,10,"ng-container",5)(7,ip,6,10,"ng-container",5),p(),l(8,"div",6)(9,"div",7),x(10,"cx-media",8),p(),l(11,"div",9)(12,"div",10),v(13,np,3,4,"span",5),p(),l(14,"div",11),v(15,rp,3,4,"span",5),p(),l(16,"div",12),v(17,op,3,4,"span",5),p(),v(18,dp,3,3,"ng-container",5),g(19,"async"),p()()(),I()}if(i&2){let e=o.ngIf,t=u();a(4),S(" ",e.name," "),a(),M("aria-expanded",t.showMore),a(),s("ngIf",!t.showMore),a(),s("ngIf",t.showMore),a(),se("open",t.showMore),a(2),s("container",e==null||e.images==null?null:e.images.PRIMARY),a(),M("aria-hidden",!t.showMore),a(2),s("ngIf",e.name),a(2),s("ngIf",e.code),a(2),s("ngIf",e.description),a(),s("ngIf",m(19,12,t.expMode))}}function fp(i,o){i&1&&x(0,"div",21)}function mp(i,o){i&1&&(l(0,"h3",12),y(1),g(2,"cxTranslate"),p()),i&2&&(a(),S(" ",m(2,1,"configurator.restartDialog.title")," "))}function vp(i,o){i&1&&(l(0,"div",12),y(1),g(2,"cxTranslate"),p()),i&2&&(a(),S(" ",m(2,1,"configurator.restartDialog.title")," "))}function _p(i,o){if(i&1){let e=k();b(0),l(1,"div",2),U("esc",function(){let n=N(e).ngIf,r=u(2);return P(r.backToPDP(n))}),l(2,"div",3),v(3,mp,3,3,"h3",4)(4,vp,3,3,"div",4),l(5,"button",5),g(6,"cxTranslate"),U("click",function(){let n=N(e).ngIf,r=u(2);return P(r.backToPDP(n))}),l(7,"span",6),x(8,"cx-icon",7),p()()(),l(9,"div",8)(10,"div",9),y(11),g(12,"cxTranslate"),p(),l(13,"button",10),U("click",function(){let n=N(e).ngIf,r=u(2);return P(r.resume(n))}),y(14),g(15,"cxTranslate"),p(),l(16,"button",11),U("click",function(){N(e);let n=u().ngIf,r=u();return P(r.restart(n.owner))}),y(17),g(18,"cxTranslate"),p()()(),I()}if(i&2){let e=u(2);a(),s("cxFocus",e.focusConfig),a(2),s("cxFeature","a11yDialogsHeading"),a(),s("cxFeature","!a11yDialogsHeading"),a(),O("title",m(6,8,"configurator.a11y.closeRestartDialog")),a(3),s("type",e.iconTypes.CLOSE),a(3),S(" ",m(12,10,"configurator.restartDialog.description")," "),a(3),S(" ",m(15,12,"configurator.restartDialog.resumeButton")," "),a(3),S(" ",m(18,14,"configurator.restartDialog.restartButton")," ")}}function Cp(i,o){if(i&1&&(b(0),v(1,_p,19,16,"ng-container",1),g(2,"async"),I()),i&2){let e=u();a(),s("ngIf",m(2,1,e.product$))}}var hp=["configTab"],yp=["overviewTab"];function bp(i,o){if(i&1){let e=k();l(0,"div",6)(1,"a",7,1),g(3,"cxTranslate"),g(4,"cxTranslate"),U("keydown",function(n){N(e);let r=u(4);return P(r.switchTabOnArrowPress(n,"#configTab"))})("keydown.enter",function(){N(e);let n=u(3).ngIf,r=u();return P(r.navigateToConfiguration(n))})("keydown.space",function(){N(e);let n=u(3).ngIf,r=u();return P(r.navigateToConfiguration(n))})("click",function(){N(e);let n=u(3).ngIf,r=u();return P(r.navigateToConfiguration(n))}),y(5),g(6,"cxTranslate"),p(),l(7,"a",7,2),g(9,"cxTranslate"),g(10,"cxTranslate"),U("keydown",function(n){N(e);let r=u(4);return P(r.switchTabOnArrowPress(n,"#overviewTab"))})("keydown.enter",function(){N(e);let n=u(3).ngIf,r=u();return P(r.navigateToOverview(n))})("keydown.space",function(){N(e);let n=u(3).ngIf,r=u();return P(r.navigateToOverview(n))})("click",function(){N(e);let n=u(3).ngIf,r=u();return P(r.navigateToOverview(n))}),y(11),g(12,"cxTranslate"),p()()}if(i&2){let e=o.ngIf,t=u(4);a(),se("active",!t.isOverviewPage(e)),s("tabindex",t.getTabIndexForConfigTab(e)),M("aria-selected",!t.isOverviewPage(e))("aria-label",t.isOverviewPage(e)?m(4,14,"configurator.a11y.configurationPageLink"):m(3,12,"configurator.a11y.configurationPage")),a(4),ne(m(6,16,"configurator.tabBar.configuration")),a(2),se("active",t.isOverviewPage(e)),s("tabindex",t.getTabIndexForOverviewTab(e)),M("aria-selected",t.isOverviewPage(e))("aria-label",t.isOverviewPage(e)?m(9,18,"configurator.a11y.overviewPage"):m(10,20,"configurator.a11y.overviewPageLink")),a(4),ne(m(12,22,"configurator.tabBar.overview"))}}function Ip(i,o){if(i&1&&(b(0),v(1,bp,13,24,"div",5),g(2,"async"),I()),i&2){let e=u(3);a(),s("ngIf",m(2,1,e.pageType$))}}function xp(i,o){if(i&1&&(b(0),v(1,Ip,3,3,"ng-container",3),I()),i&2){let e=u().ngIf;a(),s("ngIf",!e.displayOnly)}}function Tp(i,o){i&1&&x(0,"div",8)}function Sp(i,o){if(i&1&&(b(0),v(1,xp,2,1,"ng-container",4),g(2,"async"),v(3,Tp,1,0,"ng-template",null,0,ge),I()),i&2){let e=ce(4),t=u();a(),s("ngIf",m(2,2,t.configuration$))("ngIfElse",e)}}var Ep=i=>({title:i});function Op(i,o){if(i&1&&x(0,"cx-product-carousel-item",4),i&2){let e=o.item;s("item",e)}}function wp(i,o){if(i&1&&(b(0),l(1,"div",2),x(2,"cx-carousel",3),g(3,"async"),g(4,"async"),g(5,"cxTranslate"),v(6,Op,1,1,"ng-template",null,0,ge),p(),I()),i&2){let e=o.ngIf,t=ce(7),n=u();a(2),s("items",e)("title",m(3,4,n.title$))("template",t),M("aria-label",Z(5,8,"productCarousel.carouselLabel",L(11,Ep,m(4,6,n.title$))))}}var d;(function(i){let o;(function(C){C.ATTRIBUTE_GROUP="AttributeGroup",C.SUB_ITEM_GROUP="SubItemGroup",C.CONFLICT_HEADER_GROUP="ConflictHeaderGroup",C.CONFLICT_GROUP="ConflictGroup"})(o=i.GroupType||(i.GroupType={}));let e;(function(C){C.NOT_IMPLEMENTED="not_implemented",C.RADIOBUTTON="radioGroup",C.RADIOBUTTON_ADDITIONAL_INPUT="radioGroup_add",C.CHECKBOX="checkBox",C.CHECKBOXLIST="checkBoxList",C.DROPDOWN="dropdown",C.DROPDOWN_ADDITIONAL_INPUT="dropdown_add",C.LISTBOX="listbox",C.LISTBOX_MULTI="listboxmulti",C.READ_ONLY="readonly",C.READ_ONLY_SINGLE_SELECTION_IMAGE="read_only_single_selection_image",C.READ_ONLY_MULTI_SELECTION_IMAGE="read_only_multi_selection_image",C.STRING="string",C.NUMERIC="numeric",C.SAP_DATE="sap_date",C.AUTO_COMPLETE_CUSTOM="input_autocomplete",C.MULTI_SELECTION_IMAGE="multi_selection_image",C.SINGLE_SELECTION_IMAGE="single_selection_image",C.CHECKBOXLIST_PRODUCT="checkBoxListProduct",C.DROPDOWN_PRODUCT="dropdownProduct",C.RADIOBUTTON_PRODUCT="radioGroupProduct"})(e=i.UiType||(i.UiType={}));let t;(function(C){C.VALUE_IMAGE="VALUE_IMAGE",C.ATTRIBUTE_IMAGE="ATTRIBUTE_IMAGE"})(t=i.ImageFormatType||(i.ImageFormatType={}));let n;(function(C){C.PRIMARY="PRIMARY",C.GALLERY="GALLERY"})(n=i.ImageType||(i.ImageType={}));let r;(function(C){C.INPUT_STRING="String",C.INPUT_NUMBER="Number",C.USER_SELECTION_QTY_ATTRIBUTE_LEVEL="UserSelectionWithAttributeQuantity",C.USER_SELECTION_QTY_VALUE_LEVEL="UserSelectionWithValueQuantity",C.USER_SELECTION_NO_QTY="UserSelectionWithoutQuantity",C.NOT_IMPLEMENTED="not_implemented"})(r=i.DataType||(i.DataType={}));let c;(function(C){C.ATTRIBUTE="Attribute",C.ATTRIBUTE_QUANTITY="AttributeQuantity",C.VALUE_QUANTITY="ValueQuantity"})(c=i.UpdateType||(i.UpdateType={}));let f;(function(C){C.GENERAL="general",C.BUNDLE="bundle"})(f=i.AttributeOverviewType||(i.AttributeOverviewType={}));let T;(function(C){C.NONE="NONE",C.NUMERIC="NUMERIC",C.SAP_DATE="SAP_DATE"})(T=i.ValidationType||(i.ValidationType={}));let h;(function(C){C.VISIBLE="PRIMARY",C.USER_INPUT="USER_INPUT",C.PRICE_RELEVANT="PRICE_RELEVANT"})(h=i.OverviewFilter||(i.OverviewFilter={})),i.ConflictIdPrefix="CONFLICT",i.ConflictHeaderId="CONFLICT_HEADER",i.CustomUiTypeIndicator="___",i.RetractValueCode="###RETRACT_VALUE_CODE###"})(d||(d={}));var yo="productConfigurator",J="[Configurator] Configuration Data",bo="[Configurator] Read Cart Entry Configuration",Io="[Configurator] Read Cart Entry Configuration Success",Ap="[Configurator] Read Cart Entry Configuration Fail",xo="[Configurator] Read Order Entry Configuration",To="[Configurator] Read Order Entry Configuration Success",Dp="[Configurator] Read Order Entry Configuration Fail",So="[Configurator] Add to cart",Qn="[Configurator] Update cart entry";var Eo="[Configurator] Add next owner",Oo="[Configurator] Set next owner cart entry",wo="[Configurator] Remove cart bound configurations",sn=class extends K.EntityLoadAction{constructor(o){super(J,o.owner.key),this.payload=o,this.type=bo}},un=class extends K.EntitySuccessAction{constructor(o){super(J,o.owner.key),this.payload=o,this.type=Io}},ln=class extends K.EntityFailAction{constructor(o){super(J,o.ownerKey,o.error),this.payload=o,this.type=Ap}},pn=class extends K.EntityLoadAction{constructor(o){super(J,o.owner.key),this.payload=o,this.type=xo}},dn=class extends K.EntitySuccessAction{constructor(o){super(J,o.owner.key),this.payload=o,this.type=To}},gn=class extends K.EntityFailAction{constructor(o){super(J,o.ownerKey,o.error),this.payload=o,this.type=Dp}},fn=class extends K.EntityProcessesIncrementAction{constructor(o){super(on,o.cartId),this.payload=o,this.type=So}},mn=class extends K.EntityProcessesIncrementAction{constructor(o){super(on,o.cartId),this.payload=o,this.type=Qn}},vn=class{constructor(o){this.payload=o,this.type=Eo}},_n=class{constructor(){this.type=wo}},Cn=class extends K.EntitySuccessAction{constructor(o){super(J,o.configuration.owner.key),this.payload=o,this.type=Oo}},hn="[Configurator] Search Variants",Fp="[Configurator]  Search Variants fail",Ao="[Configurator] Search Variants success",ti=class extends K.EntityLoadAction{constructor(o){super(J,o.owner.key),this.payload=o,this.type=hn}},yn=class extends K.EntityFailAction{constructor(o){super(J,o.ownerKey,o.error),this.payload=o,this.type=Fp}},Ii=class extends K.EntitySuccessAction{constructor(o){super(J,o.ownerKey),this.payload=o,this.type=Ao}},Do="[Configurator] Create Configuration",Rp="[Configurator] Create Configuration Fail",Fo="[Configurator] Create Configuration Sucess",Ro="[Configurator] Read Configuration",Np="[Configurator] Read Configuration Fail",No="[Configurator] Read Configuration Sucess",Po="[Configurator] Update Configuration",Mo="[Configurator] Update Configuration Fail",Uo="[Configurator] Update Configuration Success",Vo="[Configurator] Update Configuration finalize success",Go="[Configurator] Update Configuration finalize fail",Kn="[Configurator] Change group",Pp="[Configurator] Change group finalize",Mp="[Configurator] Remove configuration",Bo="[Configurator] Update Configuration Summary Price",Up="[Configurator] Update Configuration Price Summary fail",Lo="[Configurator] Update Configuration Price Summary success",ko="[Configurator] Get Configuration Overview",Vp="[Configurator] Get Configuration Overview fail",$o="[Configurator] Get Configuration Overview success",qo="[Configurator] Update Configuration Overview",Gp="[Configurator] Update Configuration Overview fail",jo="[Configurator] Update Configuration Overview success",Qo="[Configurator] Set interaction state",Ko="[Configurator] Set current group to State",Ho="[Configurator] Set current parent group for menu to State",Wo="[Configurator] Set groups to visited",Yo="[Configurator] Remove product bound configurations",Hn="[Configurator] Dismiss conflict dialog",zo="[Configurator] Check conflict dialog",xi=class extends K.EntityLoadAction{constructor(o){super(J,o.owner.key),this.payload=o,this.type=Do}},bn=class extends K.EntityFailAction{constructor(o){super(J,o.ownerKey,o.error),this.payload=o,this.type=Rp}},In=class extends K.EntitySuccessAction{constructor(o){super(J,o.owner.key),this.payload=o,this.type=Fo}},xn=class extends K.EntityLoadAction{constructor(o){super(J,o.configuration.owner.key),this.payload=o,this.type=Ro}},Ti=class extends K.EntityFailAction{constructor(o){super(J,o.ownerKey,o.error),this.payload=o,this.type=Np}},Si=class extends K.EntitySuccessAction{constructor(o){super(J,o.owner.key),this.payload=o,this.type=No}},Tn=class extends K.EntityProcessesIncrementAction{constructor(o){super(J,o.owner.key),this.payload=o,this.type=Po,this.meta.loader={load:!0}}},Sn=class extends K.EntityProcessesDecrementAction{constructor(o){super(J,o.configuration.owner.key),this.payload=o,this.type=Mo,this.meta.loader={error:o.error}}},En=class extends K.EntityProcessesDecrementAction{constructor(o){super(J,o.owner.key),this.payload=o,this.type=Uo}},On=class extends K.EntitySuccessAction{constructor(o){super(J,o.owner.key),this.payload=o,this.type=Vo}},wn=class extends K.EntityFailAction{constructor(o){super(J,o.owner.key),this.payload=o,this.type=Go}},Ft=class extends K.EntityLoadAction{constructor(o){super(J,o.owner.key),this.payload=o,this.type=Bo}},An=class extends K.EntityFailAction{constructor(o){super(J,o.ownerKey,o.error),this.payload=o,this.type=Up}},Dn=class extends K.EntitySuccessAction{constructor(o,e){super(J,o.owner.key),this.payload=o,this.type=Lo,this.isDeltaRendering=e?.isDeltaRendering??!1}},Ei=class extends K.EntityLoadAction{constructor(o){super(J,o.configuration.owner.key),this.payload=o,this.type=Kn}},oo=class extends K.EntityLoadAction{constructor(o){super(J,o.owner.key),this.payload=o,this.type=Pp}},Pt=class extends K.EntityLoaderResetAction{constructor(o){super(J,o.ownerKey),this.payload=o,this.type=Mp}},Fn=class extends K.EntityLoadAction{constructor(o){super(J,o.owner.key),this.payload=o,this.type=ko}},Rn=class extends K.EntityFailAction{constructor(o){super(J,o.ownerKey,o.error),this.payload=o,this.type=Vp}},Nn=class extends K.EntitySuccessAction{constructor(o){super(J,o.ownerKey),this.payload=o,this.type=$o}},Pn=class extends K.EntityLoadAction{constructor(o){super(J,o.owner.key),this.payload=o,this.type=qo}},Mn=class extends K.EntityFailAction{constructor(o){super(J,o.ownerKey,o.error),this.payload=o,this.type=Gp}},Un=class extends K.EntitySuccessAction{constructor(o){super(J,o.ownerKey),this.payload=o,this.type=jo}},Vn=class extends K.EntitySuccessAction{constructor(o){super(J,o.entityKey,o.interactionState),this.payload=o,this.type=Qo}},Gn=class extends K.EntitySuccessAction{constructor(o){super(J,o.entityKey,o.currentGroup),this.payload=o,this.type=Ko}},Oi=class extends K.EntitySuccessAction{constructor(o){super(J,o.entityKey,o.menuParentGroup),this.payload=o,this.type=Ho}},Bn=class extends K.EntitySuccessAction{constructor(o){super(J,o.entityKey,o.visitedGroups),this.payload=o,this.type=Wo}},Ln=class{constructor(){this.type=Yo}},kn=class extends K.EntitySuccessAction{constructor(o){super(J,o),this.ownerKey=o,this.type=Hn}},$n=class extends K.EntitySuccessAction{constructor(o){super(J,o),this.ownerKey=o,this.type=zo}};var Wn=Dr(yo),Xo=et(Wn,i=>i.configurations),Rt=i=>et(Xo,o=>K.entityProcessesLoaderStateSelector(o,i)),yi=i=>et(Xo,o=>K.entityHasPendingProcessesSelector(o,i)),Mt=i=>et(Rt(i),o=>K.loaderValueSelector(o)),Bp=i=>et(Mt(i),o=>o?.interactionState?.currentGroup),Lp=(i,o)=>et(Mt(i),e=>{let t=e?.interactionState?.groupsVisited;return t?t[o]:!1}),kp=(i,o)=>et(Mt(i),e=>o.map(t=>{let n=e?.interactionState?.groupsVisited;return n?n[t]:!1}).filter(t=>!t).length===0);var Ut=(()=>{class i{getParentGroup(e,t,n){return e.includes(t)?n:e.map(r=>r.subGroups?this.getParentGroup(r.subGroups,t,r):void 0).filter(r=>r).pop()}getGroupById(e,t){let n=e.find(c=>c.id===t);if(n)return n;let r=this.getGroupFromSubGroups(e,t);return r||e[0]}getOptionalGroupById(e,t){let n=e.find(r=>r.id===t);return n||this.getGroupFromSubGroups(e,t)}getGroupByIdIfPresent(e,t){let n=e.find(r=>r.id===t);return n||this.getGroupFromSubGroups(e,t)}getGroupFromSubGroups(e,t){return e.map(r=>r.subGroups?this.getGroupByIdIfPresent(r.subGroups,t):void 0).filter(r=>r).pop()}hasSubGroups(e){return e.subGroups?e.subGroups.length>0:!1}isConfigurationCreated(e){let t=e?.configId;return t!==void 0&&t.length!==0&&e!==void 0&&(e.flatGroups.length>0||e.overview!==void 0)}createConfigurationExtract(e,t,n){n||(n=d.UpdateType.ATTRIBUTE);let r={configId:t.configId,groups:[],flatGroups:[],interactionState:{isConflictResolutionMode:t.interactionState.isConflictResolutionMode},owner:t.owner,productCode:t.productCode,updateType:n},c=[];if(e.groupId)this.buildGroupPath(e.groupId,t.groups,c);else throw Error("GroupId must be available at attribute level during update");let f=c.length;if(f===0)throw new Error("At this point we expect that group is available in the configuration: "+e.groupId+", "+JSON.stringify(t.groups.map(C=>C.id)));let T=this.buildGroupForExtract(c[f-1]),h=T;r.groups.push(T);for(let C=c.length-1;C>0;C--)h=this.buildGroupForExtract(c[C-1]),T.subGroups=[h],T=h;return h.attributes=[e],r}buildGroupPath(e,t,n){let r=!1,c=t.find(f=>f.id===e);return c?(n.push(c),r=!0):t.filter(f=>f.subGroups).forEach(f=>{f.subGroups&&this.buildGroupPath(e,f.subGroups,n)&&(n.push(f),r=!0)}),r}getConfigurationFromState(e){let t=e.value;if(t)return t;throw new Error("Configuration must be defined at this point")}buildGroupForExtract(e){return{groupType:e.groupType,id:e.id,subGroups:[]}}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Yn=(()=>{class i{constructor(e,t,n,r,c,f){this.store=e,this.activeCartService=t,this.commonConfigUtilsService=n,this.checkoutQueryFacade=r,this.userIdService=c,this.configuratorUtilsService=f}readConfigurationForCartEntry(e){return this.store.pipe(we(Rt(e.key)),Mi(()=>this.activeCartService.isStable().pipe(Y(t=>t))),Mi(()=>this.checkoutQueryFacade.getCheckoutDetailsState().pipe(E(t=>t.loading),Y(t=>!t))),ye(t=>{this.configurationNeedsReading(t)&&this.activeCartService.requireLoadedCart().pipe(w(1)).subscribe(n=>{this.userIdService.getUserId().pipe(w(1)).subscribe(r=>{let c={userId:r,cartId:this.commonConfigUtilsService.getCartId(n),cartEntryNumber:e.id,owner:e};this.store.dispatch(new sn(c))})})}),Y(t=>t.value!==void 0&&this.isConfigurationCreated(t.value)),E(t=>this.configuratorUtilsService.getConfigurationFromState(t)))}readConfigurationForOrderEntry(e){return this.store.pipe(we(Rt(e.key)),ye(t=>{if(this.configurationNeedsReading(t)){let n=this.commonConfigUtilsService.decomposeOwnerId(e.id);this.userIdService.getUserId().pipe(w(1)).subscribe(r=>{let c={userId:r,orderId:n.documentId,orderEntryNumber:n.entryNumber,owner:e};this.store.dispatch(new pn(c))})}}),Y(t=>t.value!==void 0&&this.isConfigurationCreated(t.value)),E(t=>this.configuratorUtilsService.getConfigurationFromState(t)))}addToCart(e,t,n,r){this.activeCartService.requireLoadedCart().pipe(w(1)).subscribe(c=>{this.userIdService.getUserId().pipe(w(1)).subscribe(f=>{let T={userId:f,cartId:this.commonConfigUtilsService.getCartId(c),productCode:e,quantity:r??1,configId:t,owner:n};this.store.dispatch(new fn(T))})})}updateCartEntry(e){this.activeCartService.requireLoadedCart().pipe(w(1)).subscribe(t=>{this.userIdService.getUserId().pipe(w(1)).subscribe(n=>{let r={userId:n,cartId:this.commonConfigUtilsService.getCartId(t),cartEntryNumber:e.owner.id,configuration:e};this.store.dispatch(new mn(r))})})}activeCartHasIssues(){return this.activeCartService.requireLoadedCart().pipe(E(e=>e?e.entries:[]),E(e=>e?e.filter(t=>this.commonConfigUtilsService.getNumberOfIssues(t)):[]),E(e=>e.length>0))}getEntry(e){return this.activeCartService.requireLoadedCart().pipe(E(t=>t.entries?t.entries:[]),E(t=>{let n=t.filter(r=>r.entryNumber?.toString()===e);return n?n[n.length-1]:void 0}))}removeCartBoundConfigurations(){this.store.dispatch(new _n)}isConfigurationCreated(e){return e.configId.length!==0}configurationNeedsReading(e){let t=e.value;return t===void 0||!this.isConfigurationCreated(t)&&!e.loading&&!e.error}static{this.\u0275fac=function(t){return new(t||i)(D(ut),D(Xt),D(rt),D(to),D(Mr),D(Ut))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),ie=(()=>{class i{constructor(e,t,n,r,c){this.store=e,this.commonConfigUtilsService=t,this.configuratorCartService=n,this.activeCartService=r,this.configuratorUtils=c,this.logger=X(Ne)}hasPendingChanges(e){return this.store.pipe(we(yi(e.key)))}isConfigurationLoading(e){return this.store.pipe(we(Rt(e.key)),E(t=>t.loading??!1))}getConfiguration(e){return this.store.pipe(we(Mt(e.key)),Y(t=>this.configuratorUtils.isConfigurationCreated(t)))}getOrCreateConfiguration(e,t){switch(e.type){case oe.OwnerType.CART_ENTRY:return this.configuratorCartService.readConfigurationForCartEntry(e);case oe.OwnerType.ORDER_ENTRY:case oe.OwnerType.QUOTE_ENTRY:case oe.OwnerType.SAVED_CART_ENTRY:return this.configuratorCartService.readConfigurationForOrderEntry(e);default:return this.getOrCreateConfigurationForProduct(e,t)}}updateConfiguration(e,t,n){n||(n=d.UpdateType.ATTRIBUTE),this.activeCartService.getActive().pipe(w(1),R(r=>this.activeCartService.isStable().pipe(w(1),ye(c=>{Ke()&&r.code&&!c&&this.logger.warn("Cart is busy, no configuration updates possible")}),Y(c=>!r.code||c),R(()=>this.store.pipe(we(Mt(e)),w(1)))))).subscribe(r=>{this.store.dispatch(new Tn(this.configuratorUtils.createConfigurationExtract(t,r,n)))})}getConfigurationWithOverview(e){return this.filterNotLoadingAndCreatedConfiguration(this.store.pipe(we(Rt(e.owner.key)))).pipe(ye(t=>{this.hasConfigurationOverview(t)||this.store.dispatch(new Fn(e))}),Y(t=>this.hasConfigurationOverview(t)))}filterNotLoadingAndCreatedConfiguration(e){return e.pipe(Y(t=>t.loading===!1),Y(t=>this.configuratorUtils.isConfigurationCreated(t.value)),E(t=>t.value))}updateConfigurationOverview(e){this.store.dispatch(new Pn(e))}removeConfiguration(e){this.store.dispatch(new Pt({ownerKey:e.key}))}dismissConflictSolverDialog(e){this.store.dispatch(new kn(e.key))}checkConflictSolverDialog(e){this.store.dispatch(new $n(e.key))}hasConflicts(e){return this.getConfiguration(e).pipe(E(t=>t.immediateConflictResolution===!1&&t.groups[0]?.groupType===d.GroupType.CONFLICT_HEADER_GROUP))}forceNewConfiguration(e){this.store.dispatch(new Pt({ownerKey:e.key})),this.store.dispatch(new xi({owner:e,configIdTemplate:void 0,forceReset:!0}))}getOrCreateConfigurationForProduct(e,t){return this.store.pipe(we(Rt(e.key)),ye(n=>{(n.value===void 0||!this.configuratorUtils.isConfigurationCreated(n.value))&&n.loading!==!0&&n.error!==!0&&this.store.dispatch(new xi({owner:e,configIdTemplate:t}))}),Y(n=>n.value!==void 0&&this.configuratorUtils.isConfigurationCreated(n.value)),E(n=>this.configuratorUtils.getConfigurationFromState(n)))}hasConfigurationOverview(e){return e.overview!==void 0}removeProductBoundConfigurations(){this.store.dispatch(new Ln)}static{this.\u0275fac=function(t){return new(t||i)(D(ut),D(rt),D(Yn),D(Xt),D(Ut))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Zo=(()=>{class i{constructor(e,t){this.store=e,this.configuratorUtilsService=t}isGroupVisited(e,t){return this.store.select(Lp(e.key,t))}getFirstIncompleteGroup(e){return e.flatGroups?e.flatGroups.filter(t=>t.groupType!==d.GroupType.CONFLICT_GROUP).find(t=>!t.complete):void 0}setGroupStatusVisited(e,t){let n=this.configuratorUtilsService.getGroupById(e.groups,t),r=this.configuratorUtilsService.getParentGroup(e.groups,this.configuratorUtilsService.getGroupById(e.groups,t)),c=[];c.push(n.id),r&&this.getParentGroupStatusVisited(e,n.id,r,c),this.store.dispatch(new Bn({entityKey:e.owner.key,visitedGroups:c}))}areGroupsVisited(e,t){return this.store.select(kp(e.key,t))}getParentGroupStatusVisited(e,t,n,r){let c=[];n.subGroups.forEach(f=>{f.id!==t&&c.push(f.id)}),this.areGroupsVisited(e.owner,c).pipe(w(1)).subscribe(f=>{if(f){r.push(n.id);let T=this.configuratorUtilsService.getParentGroup(e.groups,this.configuratorUtilsService.getGroupById(e.groups,n.id));T&&this.getParentGroupStatusVisited(e,n.id,T,r)}})}static{this.\u0275fac=function(t){return new(t||i)(D(ut),D(Ut))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Ze=(()=>{class i{constructor(e,t,n,r){this.store=e,this.configuratorCommonsService=t,this.configuratorUtilsService=n,this.configuratorGroupStatusService=r}getCurrentGroupId(e){return this.configuratorCommonsService.getConfiguration(e).pipe(E(t=>t.interactionState.currentGroup?t.interactionState.currentGroup:t.groups[0]?.id))}getFirstConflictGroup(e){return e.flatGroups.find(t=>t.groupType===d.GroupType.CONFLICT_GROUP)}navigateToFirstIncompleteGroup(e){this.configuratorCommonsService.getConfiguration(e).pipe(w(1)).subscribe(t=>{let n=this.configuratorGroupStatusService.getFirstIncompleteGroup(t)?.id;n&&this.navigateToGroup(t,n,!0)})}navigateToConflictSolver(e){this.configuratorCommonsService.getConfiguration(e).pipe(w(1)).subscribe(t=>{let n=this.getFirstConflictGroup(t)?.id;n&&this.navigateToGroup(t,n,!0,!0)})}getMenuParentGroup(e){return this.configuratorCommonsService.getConfiguration(e).pipe(E(t=>{let n=t.interactionState.menuParentGroup;return n?this.configuratorUtilsService.getOptionalGroupById(t.groups,n):void 0}))}setMenuParentGroup(e,t){this.store.dispatch(new Oi({entityKey:e.key,menuParentGroup:t}))}getCurrentGroup(e){return this.getCurrentGroupId(e).pipe(R(t=>this.configuratorCommonsService.getConfiguration(e).pipe(E(n=>this.configuratorUtilsService.getGroupById(n.groups,t)))))}getConflictGroupForImmediateConflictResolution(e){return this.configuratorCommonsService.getConfiguration(e).pipe(Be(0),E(t=>{if(t.interactionState.showConflictSolverDialog)return t.flatGroups.find(n=>n.groupType===d.GroupType.CONFLICT_GROUP)}))}setGroupStatusVisited(e,t){this.configuratorCommonsService.getConfiguration(e).pipe(E(n=>this.configuratorGroupStatusService.setGroupStatusVisited(n,t)),w(1)).subscribe()}navigateToGroup(e,t,n=!0,r=!1){n&&this.getCurrentGroup(e.owner).pipe(w(1)).subscribe(f=>{this.configuratorGroupStatusService.setGroupStatusVisited(e,f.id)});let c=this.configuratorUtilsService.getParentGroup(e.groups,this.configuratorUtilsService.getGroupById(e.groups,t));this.store.dispatch(new Ei({configuration:e,groupId:t,parentGroupId:c?c.id:void 0,conflictResolutionMode:r}))}getNextGroupId(e){return this.getNeighboringGroupId(e,1)}getPreviousGroupId(e){return this.getNeighboringGroupId(e,-1)}isGroupVisited(e,t){return this.configuratorGroupStatusService.isGroupVisited(e,t)}getParentGroup(e,t){return this.configuratorUtilsService.getParentGroup(e,t)}hasSubGroups(e){return this.configuratorUtilsService.hasSubGroups(e)}isConflictGroupInImmediateConflictResolutionMode(e,t=!1){return e?e===d.GroupType.CONFLICT_GROUP&&t:!1}getNeighboringGroupId(e,t){return this.getCurrentGroupId(e).pipe(R(n=>this.configuratorCommonsService.getConfiguration(e).pipe(E(r=>{let c;return r.flatGroups.forEach((f,T)=>{f.id===n&&r.flatGroups&&r.flatGroups[T+t]&&!this.isConflictGroupInImmediateConflictResolutionMode(r.flatGroups[T+t]?.groupType,r.immediateConflictResolution)&&(c=r.flatGroups[T+t].id)}),c}),w(1))))}isConflictGroupType(e){return e===d.GroupType.CONFLICT_HEADER_GROUP||e===d.GroupType.CONFLICT_GROUP}static{this.\u0275fac=function(t){return new(t||i)(D(ut),D(ie),D(Ut),D(Zo))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),de=(()=>{class i{constructor(e,t,n){this.configuratorGroupsService=e,this.windowRef=t,this.keyboardFocusService=n,this.productService=X(Xe),this.routingService=X(tt),this.CX_PREFIX="cx",this.SEPARATOR="--",this.ADD_TO_CART_BUTTON_HEIGHT=82,this.logger=X(Ne)}isCartEntryOrGroupVisited(e,t){return this.configuratorGroupsService.isGroupVisited(e,t).pipe(w(1),E(n=>n?!0:e.type===oe.OwnerType.CART_ENTRY))}assembleValuesForMultiSelectAttributes(e,t){let n=[];for(let r=0;r<e.length;r++){let c=t.values?t.values[r]:void 0;if(c){let f={valueCode:c.valueCode};f.name=c.name,f.quantity=c.quantity,f.selected=e[r].value,n.push(f)}else Ke()&&this.logger.warn("ControlArray does not match values, at least one value could not been found")}return n}scroll(e){let t=0;e instanceof HTMLElement&&(t=e.offsetTop),this.windowRef.nativeWindow?.scroll(0,t)}scrollToConfigurationElement(e){if(this.windowRef.isBrowser()){let t=this.getElement(e);t&&this.scroll(t)}}focusFirstAttribute(){this.focusFirstActiveElement("cx-configurator-form")}focusFirstActiveElement(e){if(!this.windowRef.isBrowser())return;let t=this.getElement(e);if(t){let n=this.keyboardFocusService.findFocusable(t);n&&n.length>0&&n[0].focus()}}getFocusableElementById(e,t){return e.find(n=>{if(t&&(n.nodeName.toLocaleLowerCase().indexOf(t)!==-1||n.id.indexOf(t)!==-1))return n})}getFocusableConflictDescription(e){return this.getFocusableElementById(e,"cx-configurator-conflict-description")}getFocusableElementByValueUiKey(e,t){return this.getFocusableElementById(e,t)}getFocusableElementByAttributeId(e,t){return this.getFocusableElementById(e,t)}createAttributeValueUiKey(e,t){return e+this.SEPARATOR+t}focusValue(e){if(!this.windowRef.isBrowser())return;let t=this.getElement("cx-configurator-form");if(t){let n=this.keyboardFocusService.findFocusable(t);n.length>0&&this.focusOnElements(n,e)}}focusOnElements(e,t){let n=this.getFocusableConflictDescription(e);n||(n=this.focusOnElementForConflicting(t,n,e)),n&&n.focus()}focusOnElementForConflicting(e,t,n){let r=e.values?.find(c=>c.selected);if(r){let c=this.createAttributeValueUiKey(e.name,r.valueCode);t=this.getFocusableElementByValueUiKey(n,c)}return t||(t=this.getFocusableElementByAttributeId(n,e.name)),t}getPrefixId(e,t){return e?e+this.SEPARATOR+t:this.CX_PREFIX+this.SEPARATOR+t}createGroupId(e){if(e)return e+"-group"}createOvGroupId(e,t){return this.getPrefixId(e,t)+"-ovGroup"}createOvMenuItemId(e,t){return this.getPrefixId(e,t)+"-ovMenuItem"}setFocus(e,t){e&&this.keyboardFocusService.set(e,t)}changeStyling(e,t,n){let r=this.getElement(e);r&&r.style.setProperty(t,n)}removeStyling(e,t){let n=this.getElement(e);n&&n.style.removeProperty(t)}getElement(e){if(this.windowRef.isBrowser())return this.windowRef.document.querySelector(e)}getElements(e){if(this.windowRef.isBrowser())return Array.from(this.windowRef.document.querySelectorAll(e))}getVerticallyScrolledPixels(){if(this.windowRef.isBrowser())return this.windowRef.nativeWindow?.scrollY}hasScrollbar(e){let t=this.getElement(e);return t?t.scrollHeight>t.clientHeight:!1}isInViewport(e){if(e){let t=e.getBoundingClientRect(),n=e.offsetHeight,r=e.offsetWidth;return t.top>=-n&&t.left>=-r&&t.right<=(this.windowRef.nativeWindow?.innerWidth||e.clientWidth)+r&&t.bottom<=(this.windowRef.nativeWindow?.innerHeight||e.clientHeight)+n}return!1}getHeight(e){let t=this.getElement(e);return this.isInViewport(t)&&t?.offsetHeight?t?.offsetHeight:0}getSpareViewportHeight(){if(this.windowRef.isBrowser()){let e=this.getHeight("header"),t=this.getHeight(".VariantConfigOverviewHeader"),n=this.getHeight("cx-configurator-add-to-cart-button")!==0?this.getHeight("cx-configurator-add-to-cart-button"):this.ADD_TO_CART_BUTTON_HEIGHT,r=e+t+n*2;return this.windowRef.nativeWindow?this.windowRef.nativeWindow.innerHeight-r:0}return 0}ensureElementVisible(e,t){let n=this.getElement(e);if(t&&n)if(t.offsetTop>n.scrollTop){let r=t.offsetTop+t.offsetHeight;r>n.scrollTop&&(n.scrollTop=r-n.offsetHeight)}else n.scrollTop=t.getBoundingClientRect()?.top-10}isDisplayOnlyVariant(){return this.routingService.getRouterState().pipe(R(e=>e.state.params.displayOnly&&e.state.queryParams.productCode?this.productService.get(e.state.queryParams.productCode,"list"):me(void 0)),E(e=>(e&&!!e.baseProduct)??!1))}setLastSelected(e,t){this.lastSelected={attributeName:e,valueCode:t}}isLastSelected(e,t){return!!this.lastSelected&&this.lastSelected.attributeName===e&&this.lastSelected.valueCode===t}static{this.\u0275fac=function(t){return new(t||i)(D(Ze),D(Ot),D(ft))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Jo=(()=>{class i{constructor(){this._quantity=new oi(1)}setQuantity(e){this._quantity.next(e)}getQuantity(){return this._quantity}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),ao="cx-configurator-add-to-cart-button",$p=(()=>{class i{constructor(e,t,n,r,c,f,T,h,C,Q,re){this.routingService=e,this.configuratorCommonsService=t,this.configuratorCartService=n,this.configuratorGroupsService=r,this.configRouterExtractorService=c,this.globalMessageService=f,this.orderHistoryFacade=T,this.commonConfiguratorUtilsService=h,this.configUtils=C,this.intersectionService=Q,this.configuratorQuantityService=re,this.subscription=new Qe,this.multiCartFacade=X(Jr),this.focusService=X(ft),this.activeCartFacade=X(Xt),this.quantityControl=new Oe(1),this.iconType=pe,this.container$=this.configRouterExtractorService.extractRouterData().pipe(R(Tt=>this.configuratorCommonsService.getConfiguration(Tt.owner).pipe(E(Bt=>({routerData:Tt,configuration:Bt}))).pipe(R(Bt=>this.configuratorCommonsService.hasPendingChanges(Bt.configuration.owner).pipe(E(Ia=>({routerData:Bt.routerData,configuration:Bt.configuration,hasPendingChanges:Ia})))))))}ngOnInit(){this.makeAddToCartButtonSticky(),this.configuratorQuantityService.getQuantity().pipe(w(1)).subscribe(e=>{this.quantityControl.setValue(e)}),this.subscription.add(this.quantityControl.valueChanges.pipe(kt()).subscribe(()=>this.configuratorQuantityService.setQuantity(this.quantityControl.value)))}navigateToCart(){this.routingService.go("cart")}navigateToOverview(e,t,n){this.routingService.go({cxRoute:"configureOverview"+e,params:{ownerType:"cartEntry",entityKey:t.id}},{queryParams:{productCode:n}}).then(()=>{this.focusOverviewInTabBar()})}focusOverviewInTabBar(){this.configRouterExtractorService.extractRouterData().pipe(R(e=>this.configuratorCommonsService.getConfiguration(e.owner)),Y(e=>e.overview!=null),w(1),Be(0)).subscribe(()=>{this.focusService.clear(),this.configUtils.focusFirstActiveElement("cx-configurator-tab-bar")})}displayConfirmationMessage(e){this.globalMessageService.add({key:e},ji.MSG_TYPE_CONFIRMATION)}isQuoteCartActive(){return this.activeCartFacade.getActive().pipe(E(e=>e.quoteCode!==void 0))}getTranslationKeyForAddToCart(e){return this.isQuoteCartActive().pipe(E(t=>t?"configurator.addToCart.confirmationQuoteUpdate":e?"configurator.addToCart.confirmation":"configurator.addToCart.confirmationUpdate"))}performNavigation(e,t,n,r,c,f){r?this.navigateToCart():this.navigateToOverview(e,t,f),c&&this.getTranslationKeyForAddToCart(n).pipe(w(1)).subscribe(T=>{this.displayConfirmationMessage(T)})}getButtonResourceKey(e,t,n=!1){return(e.isOwnerCartEntry||n)&&t.isCartEntryUpdateRequired?"configurator.addToCart.buttonUpdateCart":e.isOwnerCartEntry&&!t.isCartEntryUpdateRequired?n?"configurator.addToCart.buttonForQuote":"configurator.addToCart.buttonAfterAddToCart":"configurator.addToCart.button"}isCartEntry(e){return e.isOwnerCartEntry?e.isOwnerCartEntry:!1}onAddToCart(e,t){let n=t.pageType,r=e.owner.configuratorType,c=n===vt.PageType.OVERVIEW,f=t.owner.type===oe.OwnerType.CART_ENTRY,T=e.owner,h=t.productCode?t.productCode:e.productCode,C=e.interactionState.currentGroup;C&&this.configuratorGroupsService.setGroupStatusVisited(e.owner,C),this.container$.pipe(Y(Q=>!Q.hasPendingChanges),w(1)).subscribe(()=>{f?this.onUpdateCart(e,r,T,c,h):this.onAddToCartForProduct(T,e,r,c,h)})}onAddToCartForProduct(e,t,n,r,c){let f=this.quantityControl.value;this.configuratorCartService.addToCart(e.id,t.configId,e,f),this.configuratorCommonsService.getConfiguration(e).pipe(Y(T=>T.nextOwner!==void 0),w(1)).subscribe(T=>{this.navigateForProductBound(T,n,r,c)})}navigateForProductBound(e,t,n,r){let c=e.nextOwner??He.createInitialOwner();this.performNavigation(t,c,!0,n,!0,r),n||this.configuratorCommonsService.removeConfiguration(c)}onUpdateCart(e,t,n,r,c){e.isCartEntryUpdateRequired&&this.configuratorCartService.updateCartEntry(e),this.performNavigation(t,n,!1,r,e.isCartEntryUpdateRequired??!1,c),e.isCartEntryUpdateRequired&&!r&&this.configuratorCommonsService.removeConfiguration(n)}leaveConfigurationOverview(){this.container$.pipe(w(1)).subscribe(e=>{e.routerData.owner.type===oe.OwnerType.ORDER_ENTRY?this.goToOrderDetails(e.routerData.owner):e.routerData.owner.type===oe.OwnerType.QUOTE_ENTRY?this.goToQuoteDetails(e.routerData.owner):e.routerData.owner.type===oe.OwnerType.SAVED_CART_ENTRY?this.goToSavedCartDetails(e.routerData.owner):e.routerData.owner.type===oe.OwnerType.CART_ENTRY&&!e.routerData.navigateToCheckout?this.routingService.go({cxRoute:"cart"}):e.routerData.owner.type===oe.OwnerType.PRODUCT?this.routingService.go({cxRoute:"product",params:{code:e.routerData.owner.id}}):this.routingService.go({cxRoute:"checkoutReviewOrder"})})}goToOrderDetails(e){this.orderHistoryFacade.loadOrderDetails(this.commonConfiguratorUtilsService.decomposeOwnerId(e.id).documentId),this.orderHistoryFacade.getOrderDetails().pipe(Y(t=>t!==void 0),w(1)).subscribe(t=>this.routingService.go({cxRoute:"orderDetails",params:t}))}goToQuoteDetails(e){let t=this.commonConfiguratorUtilsService.decomposeOwnerId(e.id);this.routingService.go({cxRoute:"quoteDetails",params:{quoteId:t.documentId}})}goToSavedCartDetails(e){let t=this.commonConfiguratorUtilsService.decomposeOwnerId(e.id);this.multiCartFacade.getCart(t.documentId).pipe(w(1)).subscribe(n=>{this.routingService.go({cxRoute:"quoteDetails",params:{quoteId:n.quoteCode}})})}extractConfigPrices(e){let t=e.priceSummary,n=t?.basePrice?.formattedValue,r=t?.selectedOptions?.formattedValue,c=t?.currentTotal?.formattedValue,f={basePrice:n,selectedOptions:r,totalPrice:c};return(!n||n==="-")&&(f.basePrice="0"),(!r||r==="-")&&(f.selectedOptions="0"),(!c||c==="-")&&(f.totalPrice="0"),f}makeAddToCartButtonSticky(){let e={rootMargin:"9999px 0px -100px 0px"};this.subscription.add(this.container$.pipe(w(1),Be(0),E(()=>this.configUtils.getElement("cx-configurator-price-summary")),R(t=>t?this.intersectionService.isIntersecting(t,e):me(void 0)),Y(t=>t!==void 0)).subscribe(t=>{t?this.configUtils.changeStyling(ao,"position","sticky"):this.configUtils.changeStyling(ao,"position","fixed")}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(t){return new(t||i)(_(tt),_(ie),_(Yn),_(Ze),_(he),_(Qi),_(eo),_(rt),_(de),_(jr),_(Jo))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-add-to-cart-button"]],decls:2,vars:3,consts:[["displayOnly",""],[4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"cx-add-to-cart-btn-container"],[1,"cx-quantity-add-to-cart-container"],[1,"cx-quantity-add-to-cart-row"],[1,"cx-quantity"],[3,"control"],[1,"cx-btn","btn","btn-block","btn-primary","cx-add-to-cart-btn",3,"click","title"],[3,"type"],[1,"cx-btn","btn","btn-block","btn-primary","cx-add-to-cart-btn",3,"click"],[1,"cx-display-only-btn-container"],[1,"cx-btn","btn","btn-block","btn-secondary","cx-display-only-btn",3,"click"]],template:function(t,n){t&1&&(v(0,Aa,4,2,"ng-container",1),g(1,"async")),t&2&&s("ngIf",m(1,1,n.container$))},dependencies:[W,tn,Se,ee,te],encapsulation:2,changeDetection:0})}}return i})(),qp=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({cmsComponents:{ConfiguratorAddToCartButton:{component:$p}}})],imports:[B,H,hi,Ee]})}}return i})(),jp=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=$({token:i,factory:function(t){let n=null;return t?n=new(t||i):n=D(ke),n},providedIn:"root"})}}return i})(),De=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac})}}return i})(),Qp=(()=>{class i{constructor(e,t){this.vcr=e,this.configuratorAttributeCompositionConfig=t,this.logger=X(Ne),this.featureConfigService=X(pt),this.attrComponentAssignment=this.configuratorAttributeCompositionConfig.productConfigurator?.assignment??[]}ngOnInit(){if(!this.featureConfigService.isEnabled("productConfiguratorDeltaRendering")){let e=this.context.componentKey;this.renderComponent(this.attrComponentAssignment[e],e)}}ngOnChanges(){if(this.featureConfigService.isEnabled("productConfiguratorDeltaRendering")){let e=!Ki.deepEqualObjects(this.lastRenderedAttribute,this.context.attribute),t=this.lastRenderedGroupId!==this.context.group.id;if(e||t){let n=this.context.componentKey;this.renderComponent(this.attrComponentAssignment[n],n)}}}renderComponent(e,t){e?(this.lastRenderedAttribute=this.context.attribute,this.lastRenderedGroupId=this.context.group.id,this.vcr.clear(),this.vcr.createComponent(e,{injector:this.getComponentInjector()})):Ke()&&this.logger.warn("No attribute type component available for: "+t)}getComponentInjector(){return _r.create({providers:[{provide:De,useValue:this.context}],parent:this.vcr.injector})}static{this.\u0275fac=function(t){return new(t||i)(_(hr),_(jp))}}static{this.\u0275dir=si({type:i,selectors:[["","cxConfiguratorAttributeComponent",""]],inputs:{context:[vr.None,"cxConfiguratorAttributeComponent","context"]},features:[Ui]})}}return i})(),ea=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({imports:[B]})}}return i})(),Vt=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=$({token:i,factory:function(t){let n=null;return t?n=new(t||i):n=D(ke),n},providedIn:"root"})}}return i})(),ot=(()=>{class i{constructor(){this.configuratorRouterExtractorService=X(he),this.configuratorCommonsService=X(ie)}getChangedPrices(e){let t=!0;return this.configuratorRouterExtractorService.extractRouterData().pipe(R(n=>this.configuratorCommonsService.getConfiguration(n.owner).pipe(Y(r=>t||!!r.priceSupplements),R(r=>{if(!r.priceSupplements)return me({});let c=this.checkForValuePriceChanges(r,e);return c?me(c):Pi}),ye(()=>t=!1))),fr({bufferSize:1,refCount:!0}))}checkForValuePriceChanges(e,t){let n=e.priceSupplements?.find(c=>c.attributeUiKey===t);if(!Ki.deepEqualObjects(this.lastAttributeSupplement??{},n??{})){let c={};return this.lastAttributeSupplement=n,n?.valueSupplements.forEach(f=>c[f.attributeValueKey]=f.priceValue),c}}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac})}}return i})(),Ye=(()=>{class i{constructor(){this.configuratorUISettingsConfig=X(Vt),this.translation=X(Te),this.configuratorAttributePriceChangeService=X(ot,{optional:!0}),this.configuratorStorefrontUtilsService=X(de),this._featureConfigService=X(pt),this.changedPrices$=me({})}static{this.SEPERATOR="--"}static{this.PREFIX="cx-configurator"}static{this.PREFIX_LABEL="label"}static{this.PREFIX_OPTION_PRICE_VALUE="price--optionsPriceValue"}static{this.PREFIX_DDLB_OPTION_PRICE_VALUE="option--price"}static{this.MAX_IMAGE_LABEL_CHARACTERS=16}initPriceChangedEvent(e=!1,t){e&&this.configuratorAttributePriceChangeService&&this._featureConfigService.isEnabled("productConfiguratorDeltaRendering")&&(this.listenForPriceChanges=!0,this.changedPrices$=this.configuratorAttributePriceChangeService.getChangedPrices(t))}createValueUiKey(e,t,n){return this.createAttributeUiKey(e,t)+i.SEPERATOR+n}createAttributeValueIdForConfigurator(e,t){return this.createValueUiKey(this.getUiType(e),e.name,t)}getUiType(e){return e.uiType?e.uiType:d.UiType.NOT_IMPLEMENTED}createAttributeUiKey(e,t){return i.PREFIX+i.SEPERATOR+e+i.SEPERATOR+t}createAttributeIdForConfigurator(e){return this.createAttributeUiKey(this.getUiType(e),e.name)}createAriaLabelledBy(e,t,n,r){let c=this.createAttributeUiKey(i.PREFIX_LABEL,t);return n&&(c+=" "+this.createAttributeUiKey(e,t)+i.SEPERATOR+n+" ",typeof r=="boolean"&&!r?c+=this.createAttributeUiKey(i.PREFIX_DDLB_OPTION_PRICE_VALUE,t)+i.SEPERATOR+n:c+=this.createAttributeUiKey(i.PREFIX_OPTION_PRICE_VALUE,t)+i.SEPERATOR+n),c}createFocusId(e,t){return`${e}--${t}--focus`}getLabel(e,t,n,r){let c=t||"";return e&&n&&(c+=` / [${n}]`),c+=this.getValuePrice(r),c}getImageLabel(e,t,n,r){let c=this.getLabel(e,t,n,r);return c?.trim().length>=i.MAX_IMAGE_LABEL_CHARACTERS?c.substring(0,i.MAX_IMAGE_LABEL_CHARACTERS).concat("..."):c}getImage(e){let t=e.images;return t?t[0]:void 0}getAriaLabelForValueWithPrice(e){return e?"configurator.a11y.readOnlyValueOfAttributeFullWithPrice":"configurator.a11y.valueOfAttributeFullWithPrice"}getAriaLabelForValue(e){return e?"configurator.a11y.readOnlyValueOfAttributeFull":"configurator.a11y.valueOfAttributeFull"}getImgStyleClasses(e,t,n){return this.isReadOnly(e)||(n+=" cx-img-hover",t.selected&&(n+=" cx-img-selected")),n}getValuePrice(e){if(e?.valuePrice?.value&&!e.selected){if(e.valuePrice.value<0)return` [${e.valuePrice?.formattedValue}]`;if(e.valuePrice.value>0)return` [+${e.valuePrice?.formattedValue}]`}return""}getAttributeCode(e){let t=e.attrCode;if(t)return t;throw new Error("No attribute code for: "+e.name)}isWithAdditionalValues(e){let t=e.uiType;return t===d.UiType.RADIOBUTTON_ADDITIONAL_INPUT||t===d.UiType.DROPDOWN_ADDITIONAL_INPUT}isRequiredErrorMsg(e){return e.required&&e.incomplete||!1}isUserInput(e){return e.uiType===d.UiType.STRING||e.uiType===d.UiType.NUMERIC}isDropDown(e){return e.uiType===d.UiType.DROPDOWN||e.uiType===d.UiType.DROPDOWN_PRODUCT}getSelectedValue(e){return e.values?.find(t=>t.selected)}isNoValueSelected(e){let t=this.getSelectedValue(e);return t?t.valueCode===d.RetractValueCode:!0}getValueDescriptionLength(){return this.configuratorUISettingsConfig.productConfigurator?.descriptions?.valueDescriptionLength??70}isReadOnly(e){return e.uiType?e.uiType===d.UiType.READ_ONLY||e.uiType===d.UiType.READ_ONLY_SINGLE_SELECTION_IMAGE||e.uiType===d.UiType.READ_ONLY_MULTI_SELECTION_IMAGE:!1}isValueDisplayed(e,t){return this.isReadOnly(e)&&t.selected||!this.isReadOnly(e)}getAriaLabelGeneric(e,t,n=!1){let r="";if(t){let c={value:t.valueDisplay,attribute:e.label},f=n&&t.selected,T=f?"configurator.a11y.selectedValueOfAttributeFullWithPrice":this.getAriaLabelForValueWithPrice(this.isReadOnly(e));t.valuePriceTotal&&t.valuePriceTotal?.value!==0?c.price=t.valuePriceTotal.formattedValue:t.valuePrice&&t.valuePrice?.value!==0?c.price=t.valuePrice.formattedValue:T=f?"configurator.a11y.selectedValueOfAttributeFull":this.getAriaLabelForValue(this.isReadOnly(e)),this.translation.translate(T,c).pipe(w(1)).subscribe(h=>r=h)}return r}extractValuePriceFormulaParameters(e){return{quantity:e?.quantity,price:e?.valuePrice,priceTotal:e?.valuePriceTotal,isLightedUp:e?.selected}}enrichValueWithPrice(e,t){if(e&&t&&e.valueCode in t){let n=t[e.valueCode];n&&(e=F(A({},e),{valuePrice:n}))}return e}isLastSelected(e,t){return this.configuratorStorefrontUtilsService.isLastSelected(e,t)}}return i})(),Kp=(()=>{class i extends Ye{constructor(e,t){super(),this.configUtils=e,this.attributeComponentContext=t,this.iconType=pe,this.attribute=t.attribute,this.owner=t.owner,this.groupId=t.group.id}ngOnInit(){this.showRequiredMessageForUserInput$=this.configUtils.isCartEntryOrGroupVisited(this.owner,this.groupId).pipe(E(e=>e?this.needsRequiredAttributeErrorMsg():!1))}needsRequiredAttributeErrorMsg(){return this.needsUserInputMsg()||this.needsDropDownMsg()}needsDropDownMsg(){return this.isRequiredErrorMsg(this.attribute)&&this.isDropDown(this.attribute)&&this.isNoValueSelected(this.attribute)}isUserInputEmpty(e){return e!==void 0&&(!e.trim()||e.length===0)}needsUserInputMsg(){return this.isRequiredErrorMsg(this.attribute)&&this.isUserInput(this.attribute)&&this.isUserInputEmpty(this.attribute.userInput)}static{this.\u0275fac=function(t){return new(t||i)(_(de),_(De))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-attribute-footer"]],features:[xe],decls:2,vars:3,consts:[["class","cx-required-error-msg","aria-live","assertive","aria-atomic","true","role","alert",3,"id",4,"ngIf"],["aria-live","assertive","aria-atomic","true","role","alert",1,"cx-required-error-msg",3,"id"],[3,"type"],[4,"ngIf"]],template:function(t,n){t&1&&(v(0,Ra,6,9,"div",0),g(1,"async")),t&2&&s("ngIf",m(1,1,n.showRequiredMessageForUserInput$))},dependencies:[W,Se,ee,te],encapsulation:2,changeDetection:0})}}return i})(),Hp=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({productConfigurator:{assignment:{Footer:Kp}}})],imports:[ue,le,B,H,Ee]})}}return i})(),Ct=(()=>{class i{constructor(e){this.cdRef=e,this.showMore=!1,this.showHiddenText=!1,this.config=X(ke),this.textSize=60,this.tabIndex=-1,it("productConfiguratorAttributeTypesV2")}ngAfterViewInit(){this.textNormalized=this.normalize(this.text),this.textNormalized.length>this.textSize?(this.showMore=!0,this.textToShow=this.textNormalized.substring(0,this.textSize)):this.textToShow=this.textNormalized,this.cdRef.detectChanges()}toggleShowMore(){this.showHiddenText=!this.showHiddenText,this.showHiddenText?this.textToShow=this.textNormalized:this.textToShow=this.textNormalized.substring(0,this.textSize),this.cdRef.detectChanges()}normalize(e=""){return e.replace(/<[^>]*>/g,"")}static{this.\u0275fac=function(t){return new(t||i)(_(br))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-show-more"]],inputs:{text:"text",textSize:"textSize",productName:"productName",tabIndex:"tabIndex"},decls:1,vars:1,consts:[["less",""],[4,"ngIf"],[3,"innerHTML"],[3,"tabindex","click",4,"ngIf"],[3,"click","tabindex"],[4,"ngIf","ngIfElse"]],template:function(t,n){t&1&&v(0,Va,4,8,"ng-container",1),t&2&&s("ngIf",n.text&&(n.config.features==null?null:n.config.features.productConfiguratorAttributeTypesV2))},dependencies:[W,te],encapsulation:2,changeDetection:0})}}return i})(),Wp=(()=>{class i extends Ye{constructor(e,t,n,r,c){super(),this.configUtils=e,this.configuratorCommonsService=t,this.configuratorGroupsService=n,this.configuratorUiSettings=r,this.attributeComponentContext=c,this.iconTypes=pe,this.logger=X(Ne),this.attribute=c.attribute,this.owner=c.owner,this.groupId=c.group.id,this.groupType=c.group.groupType??d.GroupType.ATTRIBUTE_GROUP,this.expMode=c.expMode,this.isNavigationToGroupEnabled=c.isNavigationToGroupEnabled??!1}ngOnInit(){this.showRequiredMessageForDomainAttribute$=this.configUtils.isCartEntryOrGroupVisited(this.owner,this.groupId).pipe(E(e=>e&&this.needsRequiredAttributeErrorMsg()))}getRequiredMessageKey(){return this.isSingleSelection()?this.isWithAdditionalValues(this.attribute)?"configurator.attribute.singleSelectAdditionalRequiredMessage":"configurator.attribute.singleSelectRequiredMessage":this.isMultiSelection?"configurator.attribute.multiSelectRequiredMessage":"configurator.attribute.singleSelectRequiredMessage"}get isMultiSelection(){switch(this.attribute.uiType){case d.UiType.CHECKBOXLIST:case d.UiType.CHECKBOXLIST_PRODUCT:case d.UiType.MULTI_SELECTION_IMAGE:return!0}return!1}isSingleSelection(){switch(this.attribute.uiType){case d.UiType.RADIOBUTTON:case d.UiType.RADIOBUTTON_ADDITIONAL_INPUT:case d.UiType.RADIOBUTTON_PRODUCT:case d.UiType.CHECKBOX:case d.UiType.DROPDOWN_ADDITIONAL_INPUT:case d.UiType.SINGLE_SELECTION_IMAGE:return!0}return!1}isAttributeWithoutErrorMsg(e){switch(e){case d.UiType.NOT_IMPLEMENTED:case d.UiType.STRING:case d.UiType.NUMERIC:case d.UiType.CHECKBOX:case d.UiType.DROPDOWN:case d.UiType.DROPDOWN_PRODUCT:return!1}return!0}needsRequiredAttributeErrorMsg(){return this.isRequiredAttributeWithoutErrorMsg()}isRequiredAttributeWithoutErrorMsg(){return this.isRequiredErrorMsg(this.attribute)&&this.isAttributeWithoutErrorMsg(this.attribute.uiType)}isAttributeGroup(){return d.GroupType.ATTRIBUTE_GROUP===this.groupType}isConflictResolutionActive(){return this.isAttributeGroup()&&this.isNavigationToGroupEnabled}getConflictMessageKey(){return this.groupType===d.GroupType.CONFLICT_GROUP?"configurator.conflict.viewConfigurationDetails":this.isNavigationToConflictEnabled()?"configurator.conflict.viewConflictDetails":"configurator.conflict.conflictDetected"}get hasImage(){let e=this.attribute.images;return e?e.length>0:!1}get image(){let e=this.attribute.images;return e&&this.hasImage?e[0]:void 0}navigateToGroup(){this.configuratorCommonsService.getConfiguration(this.owner).pipe(w(1)).subscribe(e=>{let t;this.groupType===d.GroupType.CONFLICT_GROUP?t=this.attribute.groupId:t=this.findConflictGroupId(e,this.attribute),t?(this.configuratorGroupsService.navigateToGroup(e,t),this.focusValue(this.attribute),this.scrollToAttribute(this.attribute.name)):this.logError('Attribute was not found in any conflict group. Note that for this navigation, commerce 22.05 or later is required. Consider to disable setting "enableNavigationToConflict"')})}scrollToAttribute(e){this.onNavigationCompleted(()=>this.configUtils.scrollToConfigurationElement("#"+this.createAttributeUiKey("label",e)))}findConflictGroupId(e,t){return e.flatGroups.filter(n=>n.groupType===d.GroupType.CONFLICT_GROUP).find(n=>n.attributes?.find(r=>r.key===t.key))?.id}logError(e){Ke()&&this.logger.error(e)}focusValue(e){this.onNavigationCompleted(()=>this.configUtils.focusValue(e))}onNavigationCompleted(e){this.configuratorCommonsService.isConfigurationLoading(this.owner).pipe(Y(t=>t),w(1),R(()=>this.configuratorCommonsService.isConfigurationLoading(this.owner).pipe(Y(t=>!t),w(1),Be(0)))).subscribe(e)}isNavigationToConflictEnabled(){return(this.isNavigationToGroupEnabled&&this.configuratorUISettingsConfig.productConfigurator?.enableNavigationToConflict)??!1}getAttributeDescriptionLength(){return this.configuratorUISettingsConfig.productConfigurator?.descriptions?.attributeDescriptionLength??100}static{this.\u0275fac=function(t){return new(t||i)(_(de),_(ie),_(Ze),_(Vt),_(De))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-attribute-header"]],features:[xe],decls:16,vars:27,consts:[["conflictGroup",""],["withoutLink",""],["class","cx-hidden-msg",4,"ngIf"],[3,"id"],[3,"text","textSize","productName","tabIndex",4,"ngIf"],["class","cx-conflict-msg",3,"id",4,"ngIf"],["class","cx-required-error-msg",3,"id",4,"ngIf"],["class","cx-attribute-img",3,"src","alt",4,"ngIf"],[1,"cx-hidden-msg"],["aria-hidden","true",3,"type"],[3,"text","textSize","productName","tabIndex"],[1,"cx-conflict-msg",3,"id"],["aria-hidden","true",3,"type",4,"ngIf"],[4,"ngIf","ngIfElse"],["tabindex","0","role","link",1,"link","cx-action-link",3,"click","keydown.enter"],[1,"cx-required-error-msg",3,"id"],[3,"type"],[1,"cx-attribute-img",3,"src","alt"],["class","link cx-action-link","tabindex","0","role","link",3,"click","keydown.enter",4,"ngIf"],[1,"cx-conflict-msg"]],template:function(t,n){t&1&&(v(0,Ba,4,4,"div",2),l(1,"label",3),g(2,"async"),g(3,"cxTranslate"),g(4,"cxTranslate"),l(5,"span"),y(6),p()(),v(7,La,1,4,"cx-configurator-show-more",4)(8,ja,4,10,"div",5)(9,Qa,5,8,"div",6),g(10,"async"),v(11,Ka,1,2,"img",7)(12,Wa,1,1,"ng-template",null,0,ge)(14,Ya,3,3,"ng-template",null,1,ge)),t&2&&(s("ngIf",!n.attribute.visible),a(),se("cx-required-error",m(2,13,n.showRequiredMessageForDomainAttribute$)),O("id",n.createAttributeUiKey("label",n.attribute.name)),M("aria-label",n.attribute.required?Z(4,18,"configurator.a11y.requiredAttribute",L(25,Ga,n.attribute.label)):Z(3,15,"configurator.a11y.attribute",L(23,_t,n.attribute.label))),a(4),se("cx-required-icon",n.attribute.required),M("aria-describedby",n.createAttributeUiKey("label",n.attribute.name)),a(),ne(n.getLabel(n.expMode,n.attribute.label,n.attribute.name)),a(),s("ngIf",n.attribute.description),a(),s("ngIf",n.attribute.hasConflicts),a(),s("ngIf",m(10,21,n.showRequiredMessageForDomainAttribute$)),a(2),s("ngIf",n.hasImage))},dependencies:[W,Se,Ct,ee,te],encapsulation:2,changeDetection:0})}}return i})(),ht=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({imports:[B,H]})}}return i})(),Yp=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({productConfigurator:{assignment:{Header:Wp}}})],imports:[ue,le,B,H,Ee,nt,ht]})}}return i})(),yt=(()=>{class i{constructor(e){this.config=e,this.quantity=new Oe(1),this.optionsChangeSub=new Qe,this.quantityChangeSub=new Qe,this.changeQuantity=new $t}ngOnInit(){this.quantity.setValue(this.quantityOptions?.initialQuantity),this.optionsChangeSub.add(this.quantityOptions.disableQuantityActions$?.pipe(pr()).subscribe(e=>{e?(this.quantity.disable(),this.quantityChangeSub.unsubscribe()):(this.quantity.enable(),this.quantityChangeSub.add(this.subscribeToQuantityChange()))}))}subscribeToQuantityChange(){return this.quantity.valueChanges.pipe(ci(()=>ai(this.config.productConfigurator?.updateDebounceTime?.quantity??0)),w(1)).subscribe(()=>this.onChangeQuantity())}ngOnDestroy(){this.optionsChangeSub.unsubscribe(),this.quantityChangeSub.unsubscribe()}onChangeQuantity(){this.changeQuantity.emit(this.quantity?.value)}static{this.\u0275fac=function(t){return new(t||i)(_(Vt))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-attribute-quantity"]],inputs:{quantityOptions:"quantityOptions"},outputs:{changeQuantity:"changeQuantity"},decls:5,vars:6,consts:[[1,"cx-quantity"],[3,"allowZero","control","min"]],template:function(t,n){if(t&1&&(l(0,"div",0)(1,"label"),y(2),g(3,"cxTranslate"),p(),x(4,"cx-item-counter",1),p()),t&2){let r;a(2),ne(m(3,4,"configurator.attribute.quantity")),a(2),s("allowZero",(r=n.quantityOptions.allowZero)!==null&&r!==void 0?r:!1)("control",n.quantity)("min",n.quantityOptions.allowZero?0:1)}},dependencies:[tn,te],encapsulation:2,changeDetection:0})}}return i})(),Ue=(()=>{class i{constructor(e){this.directionService=e,it("productConfiguratorAttributeTypesV2")}isRTLDirection(){return this.directionService.getDirection()===vi.RTL}removeSign(e,t){return e?e.replace(t,""):""}addSign(e,t,n){return e?n?t+e:e+t:""}compileFormattedValue(e,t,n){if(e>0)return this.addSign(t,"+",!n);if(n){let r=this.removeSign(t,"-");return this.addSign(r,"-",!1)}return t??""}get price(){return this.formula.priceTotal?this.priceTotal:this.compileFormattedValue(this.formula.price?.value??0,this.formula.price?.formattedValue,this.isRTLDirection())}get priceTotal(){return this.compileFormattedValue(this.formula.priceTotal?.value??0,this.formula.priceTotal?.formattedValue,this.isRTLDirection())}displayQuantityAndPrice(){let e=this.formula.quantity;return e?this.formula.price?.value!==0&&e>=1:!1}displayPriceOnly(){let e=this.formula.price?.value??0,t=this.formula.priceTotal?.value??0;return(e!==0||t!==0)&&!this.displayQuantityAndPrice()}displayFormula(){return(this.formula.quantity&&this.formula.quantity!==0||this.formula.price&&this.formula.price?.value!==0||this.formula.priceTotal&&this.formula.priceTotal?.value!==0)??!1}quantityWithPrice(e){return e+"x("+this.formula.price?.formattedValue+")"}isPriceLightedUp(){return this.formula.isLightedUp??!1}get styleClass(){let e="cx-price";return this.isPriceLightedUp()||(e+=" cx-greyed-out"),e}static{this.\u0275fac=function(t){return new(t||i)(_(nn))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-price"]],inputs:{formula:"formula"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngClass"],[1,"cx-quantity-price"],[1,"cx-price-total"]],template:function(t,n){t&1&&v(0,Za,3,2,"ng-container",0),t&2&&s("ngIf",n.displayFormula())},dependencies:[Ge,W,te,Hi],encapsulation:2,changeDetection:0})}}return i})(),zn=(()=>{class i extends Ye{constructor(e,t,n){super(),this.productService=e,this.keyBoardFocus=t,this.translation=n,this.loading$=new Lt(!0),this.showDeselectionNotPossible=!1,this.handleDeselect=new $t,this.handleQuantity=new $t,this.handleSelect=new $t,this.iconType=pe}ngOnInit(){this.loading$.next(!0);let e=this.productCardOptions.productBoundValue.productSystemId;this.product$=this.productService.get(e||"",io.CONFIGURATOR_PRODUCT_CARD).pipe(E(t=>t||this.transformToProductType(this.productCardOptions.productBoundValue)),ye(()=>this.loading$.next(!1)))}get showQuantity(){return(this.productCardOptions.withQuantity&&this.productCardOptions.productBoundValue.selected&&this.productCardOptions.multiSelect)??!1}get focusConfig(){return{key:this.createFocusId(this.productCardOptions.attributeId.toString(),this.productCardOptions.productBoundValue.valueCode)}}onHandleSelect(){this.loading$.next(!0),this.productCardOptions.hideRemoveButton&&this.productCardOptions.fallbackFocusId&&this.keyBoardFocus.set(this.productCardOptions.fallbackFocusId),this.handleSelect.emit(this.productCardOptions.productBoundValue.valueCode)}onHandleDeselect(){{if(this.productCardOptions.productBoundValue.selected&&this.productCardOptions.hideRemoveButton){this.showDeselectionNotPossibleMessage();return}this.loading$.next(!0),this.handleDeselect.emit(this.productCardOptions.productBoundValue.valueCode)}}onChangeQuantity(e){e?this.onHandleQuantity(e):this.onHandleDeselect()}isProductCardSelected(){return(this.productCardOptions.productBoundValue&&this.productCardOptions.productBoundValue.selected&&!this.productCardOptions.singleDropdown)??!1}hasPriceDisplay(){return!!(this.productCardOptions.productBoundValue.valuePrice||this.productCardOptions.productBoundValue.quantity||this.productCardOptions.productBoundValue.valuePriceTotal)}extractPriceFormulaParameters(){return this.productCardOptions.multiSelect?{quantity:this.productCardOptions.productBoundValue.quantity,price:this.productCardOptions.productBoundValue.valuePrice,priceTotal:this.productCardOptions.productBoundValue.valuePriceTotal,isLightedUp:this.productCardOptions.productBoundValue.selected}:{price:this.productCardOptions.productBoundValue.valuePrice,isLightedUp:this.productCardOptions.productBoundValue.selected}}extractQuantityParameters(){let e=this.productCardOptions.productBoundValue.quantity,t=this.productCardOptions.loading$?sr([this.loading$,this.productCardOptions.loading$]).pipe(E(n=>n[0]||n[1])):this.loading$;return{allowZero:!this.productCardOptions.hideRemoveButton,initialQuantity:e||0,disableQuantityActions$:t}}isValueCodeDefined(e){return!!(e&&e!==d.RetractValueCode)}transformToProductType(e){return{code:e?.productSystemId,description:e?.description,images:{},name:e?.valueDisplay}}onHandleQuantity(e){this.loading$.next(!0),this.handleQuantity.emit({quantity:e,valueCode:this.productCardOptions.productBoundValue.valueCode})}showDeselectionNotPossibleMessage(){this.showDeselectionNotPossible=!0}getAriaLabelSingleUnselected(e){let t="",n=this.productCardOptions.itemIndex+1;return this.isValueCodeDefined(this.productCardOptions?.productBoundValue?.valueCode)?this.hasPriceDisplay()&&this.productCardOptions.productBoundValue.valuePrice?.value!==0?this.translation.translate("configurator.a11y.itemOfAttributeUnselectedWithPrice",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:n,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe(w(1)).subscribe(r=>t=r):this.translation.translate("configurator.a11y.itemOfAttributeUnselected",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:n,itemCount:this.productCardOptions.itemCount}).pipe(w(1)).subscribe(r=>t=r):this.translation.translate("configurator.a11y.selectNoItemOfAttribute",{attribute:this.productCardOptions?.attributeLabel,itemIndex:n,itemCount:this.productCardOptions.itemCount}).pipe(w(1)).subscribe(r=>t=r),t}getAriaLabelSingleSelected(e){let t="",n=this.productCardOptions.itemIndex+1;return this.hasPriceDisplay()&&this.productCardOptions.productBoundValue.valuePrice?.value!==0?this.translation.translate("configurator.a11y.itemOfAttributeSelectedPressToUnselectWithPrice",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:n,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe(w(1)).subscribe(r=>t=r):this.translation.translate("configurator.a11y.itemOfAttributeSelectedPressToUnselect",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:n,itemCount:this.productCardOptions.itemCount}).pipe(w(1)).subscribe(r=>t=r),t}getAriaLabelSingleSelectedNoButton(e){let t="",n=this.productCardOptions.itemIndex+1;return this.hasPriceDisplay()&&this.productCardOptions.productBoundValue.valuePrice?.value!==0?this.translation.translate("configurator.a11y.itemOfAttributeSelectedWithPrice",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:n,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe(w(1)).subscribe(r=>t=r):this.translation.translate("configurator.a11y.itemOfAttributeSelected",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:n,itemCount:this.productCardOptions.itemCount}).pipe(w(1)).subscribe(r=>t=r),t}getAriaLabelMultiSelected(e){let t="",n=this.productCardOptions.itemIndex+1;return this.hasPriceDisplay()&&this.productCardOptions.productBoundValue.valuePrice?.value!==0?this.translation.translate("configurator.a11y.itemOfAttributeSelectedPressToUnselectWithPrice",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:n,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe(w(1)).subscribe(r=>t=r):this.translation.translate("configurator.a11y.itemOfAttributeSelectedPressToUnselect",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:n,itemCount:this.productCardOptions.itemCount}).pipe(w(1)).subscribe(r=>t=r),t}getAriaLabelMultiUnselected(e){let t="",n=this.productCardOptions.itemIndex+1;return this.hasPriceDisplay()&&this.productCardOptions.productBoundValue.valuePrice?.value!==0?this.translation.translate("configurator.a11y.itemOfAttributeUnselectedWithPrice",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:n,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe(w(1)).subscribe(r=>t=r):this.translation.translate("configurator.a11y.itemOfAttributeUnselected",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:n,itemCount:this.productCardOptions.itemCount}).pipe(w(1)).subscribe(r=>t=r),t}static{this.\u0275fac=function(t){return new(t||i)(_(Xe),_(ft),_(Te))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-attribute-product-card"]],inputs:{productCardOptions:"productCardOptions"},outputs:{handleDeselect:"handleDeselect",handleQuantity:"handleQuantity",handleSelect:"handleSelect"},features:[xe],decls:2,vars:3,consts:[["single",""],["select",""],["deselect",""],[4,"ngIf"],[1,"cx-product-card",3,"ngClass"],[1,"cx-product-card-rows"],[1,"cx-product-card-imgs"],["format","product","aria-hidden","true",3,"container"],[1,"cx-product-card-info"],[1,"cx-product-card-name"],["class","cx-product-card-code",4,"ngIf"],[3,"text","textSize","productName","tabIndex",4,"ngIf"],["class","cx-product-card-rows column",4,"ngIf"],[1,"cx-product-card-code"],[3,"text","textSize","productName","tabIndex"],[1,"cx-product-card-rows","column"],[1,"cx-product-card-quantity-price"],[1,"cx-product-card-quantity"],[3,"quantityOptions","changeQuantity",4,"ngIf"],[1,"cx-product-card-price"],[3,"formula"],[1,"cx-product-card-action"],["class","cx-product-card-action-btn",4,"ngIf"],[3,"changeQuantity","quantityOptions"],[1,"cx-product-card-action-btn"],[4,"ngIf","ngIfElse"],["class","btn btn-secondary",3,"cxFocus","click",4,"ngIf","ngIfElse"],[1,"btn","btn-secondary",3,"click","cxFocus"],[1,"btn","btn-primary",3,"click","disabled","cxFocus"],["class","btn btn-primary",3,"disabled","cxFocus","click",4,"ngIf","ngIfElse"],["class","btn btn-secondary",3,"disabled","cxFocus","click",4,"ngIf"],["class","cx-visually-hidden","tabindex","0",4,"ngIf"],[1,"btn","btn-secondary",3,"click","disabled","cxFocus"],["tabindex","0",1,"cx-visually-hidden"],["aria-live","assertive","aria-atomic","true","role","alert",1,"cx-product-card-rows","deselection-error-message",3,"id"],["type","ERROR",1,"deselection-error-symbol"]],template:function(t,n){t&1&&(v(0,mc,14,15,"ng-container",3),g(1,"async")),t&2&&s("ngIf",m(1,1,n.product$))},dependencies:[Ge,W,Ct,yt,_i,Ue,Ae,Se,ee,te],encapsulation:2,changeDetection:0})}}return i})(),Ve=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({imports:[B,H]})}}return i})(),zp={productConfigurator:{updateDebounceTime:{quantity:750,input:500,date:1500},addRetractOption:!1,enableNavigationToConflict:!0,descriptions:{attributeDescriptionLength:100,valueDescriptionLength:70}}},bt=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z(zp)],imports:[B,H,hi,ve]})}}return i})(),Xn=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({imports:[B,ht,bt,H,lt,gt,ue,le,Ci,Ve,ve,Ee]})}}return i})(),Gt=(()=>{class i{disableQuantityActions(e){return!e||e==="0"||e===d.RetractValueCode}disableQuantityActionsMultiSelection(e){return e.dataType===d.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL&&(!e.values||!e.values.find(t=>t.selected)||e.quantity===0)}withQuantityOnAttributeLevel(e){return e.dataType===d.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL}withQuantity(e,t){switch(t){case d.UiType.DROPDOWN_PRODUCT:case d.UiType.DROPDOWN:case d.UiType.RADIOBUTTON_PRODUCT:case d.UiType.RADIOBUTTON:return e===d.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL;case d.UiType.CHECKBOXLIST:case d.UiType.CHECKBOXLIST_PRODUCT:return e===d.DataType.USER_SELECTION_QTY_VALUE_LEVEL;default:return!1}}allowZeroValueQuantity(e){let t=e.values?e.values.filter(n=>n.selected).length:0;return!(e.required&&t<2)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Di=(()=>{class i extends Ye{constructor(e,t,n,r,c){super(),this.quantityService=e,this.translation=t,this.attributeComponentContext=n,this.configuratorCommonsService=r,this.configuratorStorefrontUtilsService=c,this.loading$=new Lt(!1),this.showRequiredErrorMessage$=me(!1),this.attribute=n.attribute,this.ownerKey=n.owner.key,this.ownerType=n.owner.type,this.language=n.language,this.expMode=n.expMode,this.showRequiredErrorMessage$=this.configuratorStorefrontUtilsService.isCartEntryOrGroupVisited(n.owner,n.group.id).pipe(E(f=>f&&this.isRequiredErrorMsg(this.attribute)&&this.isDropDown(this.attribute)&&this.isNoValueSelected(this.attribute)||!1)),this.initPriceChangedEvent(n.isPricingAsync,n.attribute.key)}get withQuantity(){return this.quantityService.withQuantity(this.attribute.dataType??d.DataType.NOT_IMPLEMENTED,this.attribute.uiType??d.UiType.NOT_IMPLEMENTED)}get disableQuantityActions(){return this.quantityService.disableQuantityActions(this.attribute.selectedSingleValue)}onSelect(e){this.loading$.next(!0),this.configuratorCommonsService.updateConfiguration(this.ownerKey,F(A({},this.attribute),{selectedSingleValue:e}),d.UpdateType.ATTRIBUTE)}onSelectAdditionalValue(e){let t=e.changedAttribute.userInput;t&&(this.loading$.next(!0),e.changedAttribute.selectedSingleValue=t,this.configuratorCommonsService.updateConfiguration(e.ownerKey,e.changedAttribute,d.UpdateType.ATTRIBUTE))}onHandleQuantity(e){this.loading$.next(!0),this.configuratorCommonsService.updateConfiguration(this.ownerKey,F(A({},this.attribute),{quantity:e}),d.UpdateType.ATTRIBUTE_QUANTITY)}onChangeQuantity(e,t){e?this.onHandleQuantity(e):(t&&t.setValue("0"),this.onSelect(""))}getInitialQuantity(e){let t=this.attribute.quantity??0;return e?e.value!=="0"?t:0:this.attribute.selectedSingleValue?t:0}extractQuantityParameters(e){let t=this.getInitialQuantity(e),n=this.loading$.pipe(E(r=>r||this.disableQuantityActions));return{allowZero:!this.attribute.required,initialQuantity:t,disableQuantityActions$:n}}extractPriceFormulaParameters(){return{quantity:this.attribute.quantity,price:this.getSelectedValuePrice(),priceTotal:this.attribute.attributePriceTotal,isLightedUp:!0}}extractValuePriceFormulaParameters(e){return{price:e?.valuePrice,isLightedUp:e?e.selected:!1}}getSelectedValuePrice(){return this.attribute.values?.find(e=>e.selected)?.valuePrice}get isAdditionalValueNumeric(){return this.isWithAdditionalValues(this.attribute)&&this.attribute.validationType===d.ValidationType.NUMERIC}get isAdditionalValueAlphaNumeric(){return this.isWithAdditionalValues(this.attribute)&&this.attribute.validationType===d.ValidationType.NONE}getAriaLabel(e,t){let n=this.getAriaLabelWithoutAdditionalValue(e,t);if(this.isWithAdditionalValues(this.attribute)){let r=this.getAdditionalValueAriaLabel();return n+" "+r}else return n}getAdditionalValueAriaLabel(){let e="";return this.translation.translate("configurator.a11y.additionalValue").pipe(w(1)).subscribe(t=>e=t),e}getAriaLabelWithoutAdditionalValue(e,t){return this.getAriaLabelGeneric(t,e,!0)}static{this.\u0275fac=function(t){return new(t||i)(_(Gt),_(Te),_(De),_(ie),_(de))}}static{this.\u0275dir=si({type:i,features:[xe]})}}return i})(),ta=(()=>{class i extends Ye{constructor(e,t,n){super(),this.quantityService=e,this.attributeComponentContext=t,this.configuratorCommonsService=n,this.loading$=new Lt(!1),this.attribute=t.attribute,this.ownerKey=t.owner.key,this.expMode=t.expMode,this.initPriceChangedEvent(t.isPricingAsync,t.attribute.key)}get withQuantityOnAttributeLevel(){return this.quantityService.withQuantityOnAttributeLevel(this.attribute)}get withQuantity(){return this.quantityService.withQuantity(this.attribute.dataType??d.DataType.NOT_IMPLEMENTED,this.attribute.uiType??d.UiType.NOT_IMPLEMENTED)}get disableQuantityActions(){return this.quantityService.disableQuantityActionsMultiSelection(this.attribute)}extractQuantityParameters(e,t){let n=this.loading$.pipe(E(r=>r||this.disableQuantityActions));return{allowZero:t??!this.attribute.required,initialQuantity:e,disableQuantityActions$:n}}onHandleAttributeQuantity(e){this.loading$.next(!0),this.configuratorCommonsService.updateConfiguration(this.ownerKey,F(A({},this.attribute),{quantity:e}),d.UpdateType.ATTRIBUTE_QUANTITY)}extractPriceFormulaParameters(){return{quantity:0,price:{value:0,currencyIso:""},priceTotal:this.attribute.attributePriceTotal,isLightedUp:!0}}static{this.\u0275fac=function(t){return new(t||i)(_(Gt),_(De),_(ie))}}static{this.\u0275dir=si({type:i,features:[xe]})}}return i})(),Xp=(()=>{class i extends ta{constructor(e,t,n,r){super(t,n,r),this.configUtilsService=e,this.quantityService=t,this.attributeComponentContext=n,this.configuratorCommonsService=r,this.attributeCheckBoxForms=new Array,this.logger=X(Ne),this.group=n.group.id}ngOnInit(){for(let e of this.attribute.values??[]){let t;e.selected?t=new Oe(!0):t=new Oe(!1),this.attributeCheckBoxForms.push(t)}}get allowZeroValueQuantity(){return this.quantityService.allowZeroValueQuantity(this.attribute)}onSelect(e){let t=this.configUtilsService.assembleValuesForMultiSelectAttributes(this.attributeCheckBoxForms,this.attribute);e&&this.listenForPriceChanges&&this.configUtilsService.setLastSelected(this.attribute.name,e),this.configuratorCommonsService.updateConfiguration(this.ownerKey,F(A({},this.attribute),{values:t}),d.UpdateType.ATTRIBUTE)}onChangeValueQuantity(e,t,n){if(e===0){this.attributeCheckBoxForms[n].setValue(!1),this.onSelect(t);return}let r=this.configUtilsService.assembleValuesForMultiSelectAttributes(this.attributeCheckBoxForms,this.attribute).find(c=>c.valueCode===t);if(!r){Ke()&&this.logger.warn("no value for event:",e);return}r.quantity=e,this.configuratorCommonsService.updateConfiguration(this.ownerKey,F(A({},this.attribute),{values:[r]}),d.UpdateType.VALUE_QUANTITY)}onChangeQuantity(e){e?this.onHandleAttributeQuantity(e):(this.attributeCheckBoxForms.forEach((t,n)=>this.attributeCheckBoxForms[n].setValue(!1)),this.onSelect())}static{this.\u0275fac=function(t){return new(t||i)(_(de),_(Gt),_(De),_(ie))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-attribute-checkbox-list"]],features:[Je([ot]),xe],decls:5,vars:4,consts:[[2,"display","none"],[3,"id",4,"ngIf"],[3,"id"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"cx-attribute-level-quantity-price"],[3,"changeQuantity","quantityOptions"],[3,"formula"],[1,"form-check"],[1,"cx-value-label-pair"],["type","checkbox",1,"form-check-input",3,"change","id","cxFocus","value","formControl","name"],["aria-hidden","true",1,"cx-configurator-attribute-value-label","form-check-label",3,"id","for"],[3,"text","textSize","productName","tabIndex",4,"ngIf"],[1,"cx-value-price"],[3,"quantityOptions","changeQuantity",4,"ngIf"],[3,"text","textSize","productName","tabIndex"]],template:function(t,n){t&1&&(l(0,"fieldset")(1,"legend",0),y(2),p(),v(3,yc,3,3,"div",1),g(4,"async"),p()),t&2&&(a(2),ne(n.attribute.label),a(),s("ngIf",m(4,2,n.changedPrices$)))},dependencies:[Ae,Yt,$e,qe,be,W,yt,Ue,Ct,ee],encapsulation:2,changeDetection:0})}}return i})(),Zp=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({productConfigurator:{assignment:{AttributeType_checkBoxList:Xp}}})],imports:[ve,ue,le,B,H,bt,Ve,ht]})}}return i})(),Jp=(()=>{class i extends Ye{constructor(e,t){super(),this.attributeComponentContext=e,this.configuratorCommonsService=t,this.attributeCheckBoxForm=new Oe(""),this.attribute=e.attribute,this.group=e.group.id,this.ownerKey=e.owner.key,this.expMode=e.expMode,this.initPriceChangedEvent(e.isPricingAsync,e.attribute.key)}ngOnInit(){this.attributeCheckBoxForm.setValue(this.attribute.selectedSingleValue),this.attributeValue=this.getValueFromAttribute()}onSelect(e){let t=this.assembleSingleValue();e&&this.listenForPriceChanges&&this.configuratorStorefrontUtilsService.setLastSelected(this.attribute.name,e),this.configuratorCommonsService.updateConfiguration(this.ownerKey,F(A({},this.attribute),{values:t}),d.UpdateType.ATTRIBUTE)}getValueFromAttribute(){return this.attribute.values?this.attribute.values[0]:{valueCode:""}}assembleSingleValue(){let e=[],t=this.getValueFromAttribute(),n={valueCode:t.valueCode};return n.name=t.name,n.selected=this.attributeCheckBoxForm.value,e.push(n),e}static{this.\u0275fac=function(t){return new(t||i)(_(De),_(ie))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-attribute-checkbox"]],features:[Je([ot]),xe],decls:7,vars:5,consts:[[2,"display","none"],[3,"id"],["class","form-check",4,"ngIf"],[1,"form-check"],[1,"cx-value-label-pair"],["type","checkbox",1,"form-check-input",3,"change","id","value","cxFocus","formControl","name"],["aria-hidden","true",1,"form-check-label",3,"id","for"],[3,"text","textSize","productName","tabIndex",4,"ngIf"],[1,"cx-value-price"],[3,"formula"],[3,"text","textSize","productName","tabIndex"]],template:function(t,n){t&1&&(b(0),l(1,"fieldset")(2,"legend",0),y(3),p(),l(4,"div",1),v(5,Ic,8,15,"div",2),g(6,"async"),p()(),I()),t&2&&(a(3),ne(n.attribute.label),a(),O("id",n.createAttributeIdForConfigurator(n.attribute)),a(),s("ngIf",m(6,3,n.changedPrices$)))},dependencies:[Ae,Yt,$e,qe,W,Ue,Ct,ee],encapsulation:2,changeDetection:0})}}return i})(),ed=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({productConfigurator:{assignment:{AttributeType_checkBox:Jp}}})],imports:[ve,ue,le,B,H,Ve,ht]})}}return i})(),ii=(()=>{class i extends Ye{constructor(e,t,n,r){super(),this.config=e,this.attributeComponentContext=t,this.configuratorCommonsService=n,this.configuratorStorefrontUtilsService=r,this.attributeInputForm=new Oe(""),this.showRequiredErrorMessage$=me(!1),this.debounceForDateActive=!1,this.FALLBACK_DEBOUNCE_TIME=500,this.FALLBACK_DEBOUNCE_TIME_DATE=1500,this.attribute=t.attribute,this.group=t.group.id,this.owner=t.owner,this.ownerKey=t.owner.key,this.ownerType=t.owner.type,this.compileShowRequiredErrorMessage()}ngOnInit(){this.attributeInputForm.setValue(this.attribute.userInput),this.ownerType===oe.OwnerType.CART_ENTRY&&this.attribute.required&&this.attribute.incomplete&&!this.attributeInputForm.value&&this.attributeInputForm.markAsTouched(),this.sub=this.attributeInputForm.valueChanges.pipe(ci(()=>ai(this.calculateDebounceTime()))).subscribe(()=>{this.onChange()})}onChange(){this.attributeInputForm.invalid||this.configuratorCommonsService.updateConfiguration(this.ownerKey,F(A({},this.attribute),{userInput:this.attributeInputForm.value,selectedSingleValue:this.attributeInputForm.value}),d.UpdateType.ATTRIBUTE)}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}get isUserInputEmpty(){return!this.attribute.userInput||this.attribute.userInput.trim().length===0}get isRequired(){return this.isUserInput(this.attribute)?this.attribute.required??!1:!1}get inputType(){return this.isDateBased(this.attribute)?"date":"text"}activateDebounceDate(){this.debounceForDateActive=!0}isDateBased(e){return e.uiType===d.UiType.SAP_DATE||this.isWithAdditionalValues(e)&&e.validationType===d.ValidationType.SAP_DATE}compileShowRequiredErrorMessage(){this.showRequiredErrorMessage$=this.configuratorStorefrontUtilsService.isCartEntryOrGroupVisited(this.owner,this.group).pipe(E(e=>e?this.isRequiredErrorMsg(this.attribute)&&this.isUserInput(this.attribute):!1))}calculateDebounceTime(){return this.isDateBased(this.attribute)?this.debounceForDateActive?this.config.productConfigurator?.updateDebounceTime?.date??this.FALLBACK_DEBOUNCE_TIME_DATE:0:this.config.productConfigurator?.updateDebounceTime?.input??this.FALLBACK_DEBOUNCE_TIME}static{this.\u0275fac=function(t){return new(t||i)(_(Vt),_(De),_(ie),_(de))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-attribute-input-field"]],features:[xe],decls:6,vars:28,consts:[[1,"form-group",3,"id"],["class","cx-visually-hidden",3,"id",4,"ngIf"],[1,"form-control",3,"keydown","formControl","type","ngClass","maxlength","cxFocus"],[1,"cx-visually-hidden",3,"id"]],template:function(t,n){t&1&&(l(0,"div",0),v(1,xc,3,13,"label",1),l(2,"input",2),g(3,"async"),g(4,"cxTranslate"),g(5,"cxTranslate"),U("keydown",function(){return n.activateDebounceDate()}),p()()),t&2&&(O("id",n.createAttributeIdForConfigurator(n.attribute)),a(),s("ngIf",n.inputType==="date"),a(),se("ng-invalid",n.isRequired&&n.isUserInputEmpty),O("type",n.inputType),O("maxlength",n.attribute.maxlength),s("formControl",n.attributeInputForm)("ngClass",L(19,ni,m(3,11,n.showRequiredErrorMessage$)))("cxFocus",L(21,Me,n.createAttributeIdForConfigurator(n.attribute))),M("aria-label",n.isUserInputEmpty?Z(4,13,"configurator.a11y.valueOfAttributeBlank",L(23,_t,n.attribute.label)):Z(5,16,"configurator.a11y.valueOfAttributeFull",Le(25,ei,n.attribute.userInput,n.attribute.label)))("aria-describedby",n.inputType==="date"?n.createAttributeUiKey("labelForDate",n.attribute.name):n.createAttributeUiKey("label",n.attribute.name)))},dependencies:[Ae,zt,$e,Zi,qe,Ge,W,ee,te],encapsulation:2,changeDetection:0})}}return i})(),td=(()=>{class i{performValidationAccordingToMetaData(e,t,n,r,c){let f="\\",T=new RegExp(f+t,"g"),h=e.replace(T,""),C=h.split(n);return C.length>2?!0:C.length===1?h.length>r-c:C[0].length>r-c||C[1].length>c}formatIntervalValue(e,t,n){return t===void 0&&(t=0),$i(e,n,"1."+t+"-"+t)}getIntervals(e){let t=[];return e&&e.length>0&&e.forEach(n=>{let r=this.getInterval(n);r&&Object.keys(r).length!==0&&t.push(r)}),t}getInterval(e){let t={minValue:void 0,maxValue:void 0,minValueIncluded:!1,maxValueIncluded:!1};if(!e||!e.name||e.selected)return;let n,r;return e.name.includes(" - ")?{minVal:n,maxVal:r}=this.handleStandardInterval(e.name,t):{minVal:n,maxVal:r}=this.handleSingleOrInfinite(e.name,t),n&&n.length>0&&(t.minValue=+n),r&&r.length>0&&(t.maxValue=+r),t}handleSingleOrInfinite(e,t){let n="",r="";return e.includes(">")&&(n=e,t.minValueIncluded=!1,n=n.replace(">","")),e.includes("<")&&(r=e,t.maxValueIncluded=!1,r=r.replace("<","")),e.includes("\u2265")&&(n=e,t.minValueIncluded=!0,n=n.replace("\u2265","")),e.includes("\u2264")&&(r=e,t.maxValueIncluded=!0,r=r.replace("\u2264","")),!e.includes(">")&&!e.includes("<")&&!e.includes("\u2264")&&!e.includes("\u2265")&&(n=e,r=e,t.maxValueIncluded=!0,t.minValueIncluded=!0),{minVal:n,maxVal:r}}handleStandardInterval(e,t){let n=e.indexOf(" - "),r=e.substring(0,n),c=e.substring(n+3,e.length);return t.minValueIncluded=!0,t.maxValueIncluded=!0,r.includes(">")&&(t.minValueIncluded=!1,r=r.replace(">","")),c.includes("<")&&(t.maxValueIncluded=!1,c=c.replace("<","")),{minVal:r,maxVal:c}}getPatternForValidationMessage(e,t,n,r){let c=(10**t-1).toString();e>0&&(c=c.substring(0,t-e)+"."+c.substring(t-e,t));let f=Number(c),T=$i(f,r,"1."+e+"-"+e).replace(/9/g,"#");return n&&(T="-"+T),T}getNumberFormatValidator(e,t,n,r){return c=>{let f=c.value?.trim();return f?this.getValidationErrorsNumericFormat(f,e,t,n,r):null}}getValidationErrorsNumericFormat(e,t,n,r,c){let f=Qt(t,jt.Group),T=Qt(t,jt.Decimal),h=c?"^-?":"^";return new RegExp(h+"[0123456789"+f+T+"]*$").test(e)?this.createValidationError(this.performValidationAccordingToMetaData(e,f,T,r+(e.includes("-")?1:0),n)):this.createValidationError(!0)}getIntervalValidator(e,t,n,r,c,f){return T=>{let h=T.value?.trim();return h&&h!==f&&c.length!==0&&this.getValidationErrorsNumericFormat(h,e,t,n,r)==null?this.createIntervalValidationError(!this.checkIfPartOfIntervals(h,e,c)):null}}checkIfPartOfIntervals(e,t,n){return n.find(r=>this.inputMatchesInterval(e,t,r))!==void 0}inputMatchesInterval(e,t,n){let r=this.parseInput(e,t),c=!0;n.minValue&&(c=n.minValueIncluded?n.minValue<=r:n.minValue<r);let f=!0;return n.maxValue&&(f=n.maxValueIncluded?n.maxValue>=r:n.maxValue>r),c&&f}parseInput(e,t){let n=Qt(t,jt.Group),r=Qt(t,jt.Decimal);return this.parseInputForSeparators(e,n,r)}parseInputForSeparators(e,t,n){let r="\\",c=new RegExp(r+t,"g"),f=e.replace(c,"").replace(n,".");return parseFloat(f)}createValidationError(e){return e?{wrongFormat:{}}:null}createIntervalValidationError(e){return e?{intervalNotMet:{}}:null}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Zn=(()=>{class i extends ii{constructor(e,t,n,r,c,f){super(t,r,c,f),this.configAttributeNumericInputFieldService=e,this.config=t,this.translation=n,this.attributeComponentContext=r,this.configuratorCommonsService=c,this.configuratorStorefrontUtilsService=f,this.iconType=pe,this.intervals=[],this.logger=X(Ne),this.language=r.language}mustDisplayValidationMessage(){return(this.attributeInputForm.dirty||this.attributeInputForm.touched)&&this.attributeInputForm.errors?.wrongFormat}mustDisplayIntervalMessage(){return(this.attributeInputForm.dirty||this.attributeInputForm.touched)&&this.attributeInputForm.errors?.intervalNotMet}ngOnInit(){this.initializeValidation(),this.attribute.userInput&&this.attributeInputForm.setValue(this.attribute.userInput),this.ownerType===oe.OwnerType.CART_ENTRY&&this.attribute.required&&this.attribute.incomplete&&!this.attributeInputForm.value&&this.attributeInputForm.markAsTouched(),this.sub=this.attributeInputForm.valueChanges.pipe(ci(()=>ai(this.config.productConfigurator?.updateDebounceTime?.input??this.FALLBACK_DEBOUNCE_TIME))).subscribe(()=>this.onChange())}initializeValidation(){this.locale=this.getInstalledLocale(this.language);let e=this.attribute.numDecimalPlaces,t=this.attribute.numTotalLength,n=this.attribute.negativeAllowed;if(e===void 0||t===void 0||n===void 0){let f=this.getDefaultSettings();e=f.numDecimalPlaces,t=f.numTotalLength,n=f.negativeAllowed,Ke()&&this.logger.warn("Meta data for numeric attribute not present, falling back to defaults")}this.attribute.intervalInDomain&&(this.intervals=this.configAttributeNumericInputFieldService.getIntervals(this.attribute.values));let c=[this.configAttributeNumericInputFieldService.getNumberFormatValidator(this.locale,e,t,n),this.configAttributeNumericInputFieldService.getIntervalValidator(this.locale,e,t,n,this.intervals,this.attribute.userInput)];this.attributeInputForm=new Oe("",c),this.numericFormatPattern=this.configAttributeNumericInputFieldService.getPatternForValidationMessage(e,t,n,this.locale)}ngOnDestroy(){super.ngOnDestroy()}getHelpTextForInterval(){let e="",t="";return this.intervals.forEach((n,r)=>{e=this.getIntervalText(n),r>0?(e=e.charAt(0).toLowerCase()+e.slice(1),this.translation.translate("configurator.a11y.combinedIntervalsText",{combinedInterval:t,newInterval:e}).pipe(w(1)).subscribe(c=>t=c)):t=e}),t.trim()}getAriaLabelComplete(){let e="";return this.attribute.userInput?.length===0?this.translation.translate("configurator.a11y.valueOfAttributeBlank",{attribute:this.attribute.label}).pipe(w(1)).subscribe(t=>e=t):this.translation.translate("configurator.a11y.valueOfAttributeFull",{value:this.attribute.userInput,attribute:this.attribute.label}).pipe(w(1)).subscribe(t=>e=t),e+=" ",e+=this.getHelpTextForInterval(),e}getIntervalText(e){let t="",n="",r="";if(e.minValue&&(n=this.configAttributeNumericInputFieldService.formatIntervalValue(e.minValue,this.attribute.numDecimalPlaces,this.locale)),e.maxValue&&(r=this.configAttributeNumericInputFieldService.formatIntervalValue(e.maxValue,this.attribute.numDecimalPlaces,this.locale)),e.minValue&&e.maxValue){if(e.minValue===e.maxValue)return this.translation.translate("configurator.a11y.numericIntervalSingleValue",{value:n}).pipe(w(1)).subscribe(c=>t=c),t;t=this.getTextForRealInterval(n,r,t,e)}else t=this.getTextForPartialInterval(e,t,n,r);return t}getTextForPartialInterval(e,t,n,r){return e.minValue?e.minValueIncluded?t=this.getInfiniteIntervalText("configurator.a11y.numericInfiniteIntervalMinValueIncluded",n):t=this.getInfiniteIntervalText("configurator.a11y.numericInfiniteIntervalMinValue",n):e.maxValue&&(e.maxValueIncluded?t=this.getInfiniteIntervalText("configurator.a11y.numericInfiniteIntervalMaxValueIncluded",r):t=this.getInfiniteIntervalText("configurator.a11y.numericInfiniteIntervalMaxValue",r)),t}getTextForRealInterval(e,t,n,r){let c=n;return this.translation.translate("configurator.a11y.numericIntervalStandard",{minValue:e,maxValue:t}).pipe(w(1)).subscribe(f=>c=f),(!r.minValueIncluded||!r.maxValueIncluded)&&(!r.minValueIncluded&&!r.maxValueIncluded?(c+=" ",c+=this.getAdditionalIntervalText("configurator.a11y.numericIntervalStandardOpen")):(r.minValueIncluded||(c+=" ",c+=this.getAdditionalIntervalText("configurator.a11y.numericIntervalStandardLowerEndpointNotIncluded")),r.maxValueIncluded||(c+=" ",c+=this.getAdditionalIntervalText("configurator.a11y.numericIntervalStandardUpperEndpointNotIncluded")))),c}getAdditionalIntervalText(e){let t="";return this.translation.translate(e).pipe(w(1)).subscribe(n=>t=n),t}getInfiniteIntervalText(e,t){let n="";return this.translation.translate(e,{value:t}).pipe(w(1)).subscribe(r=>n=r),n}getDefaultSettings(){return{numDecimalPlaces:2,numTotalLength:6,negativeAllowed:!1}}getInstalledLocale(e){try{return li(e),e}catch{return this.reportMissingLocaleData(e),"en"}}reportMissingLocaleData(e){Ke()&&this.logger.warn(`ConfigAttributeNumericInputFieldComponent: No locale data registered for '${e}' (see https://angular.io/api/common/registerLocaleData).`)}static{this.\u0275fac=function(t){return new(t||i)(_(td),_(Vt),_(Te),_(De),_(ie),_(de))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-attribute-numeric-input-field"]],features:[xe],decls:6,vars:20,consts:[["class","cx-intervalHelpText",4,"ngIf"],[1,"form-group",3,"id"],[1,"form-control",3,"change","formControl","ngClass","maxlength","cxFocus"],["class","cx-validation-msg","aria-live","assertive","aria-atomic","true","role","alert",3,"id",4,"ngIf"],[1,"cx-intervalHelpText"],["aria-live","assertive","aria-atomic","true","role","alert",1,"cx-validation-msg",3,"id"],[3,"type"]],template:function(t,n){t&1&&(v(0,Sc,2,1,"label",0),l(1,"div",1)(2,"input",2),g(3,"async"),U("change",function(){return n.onChange()}),p()(),v(4,Ec,4,8,"div",3)(5,Oc,4,5,"div",3)),t&2&&(s("ngIf",n.attribute.intervalInDomain),a(),O("id",n.createAttributeIdForConfigurator(n.attribute)),a(),se("ng-invalid",n.isRequired&&n.isUserInputEmpty),O("maxlength",n.attribute.maxlength),s("formControl",n.attributeInputForm)("ngClass",L(16,ni,m(3,14,n.showRequiredErrorMessage$)))("cxFocus",L(18,Me,n.createAttributeIdForConfigurator(n.attribute))),M("aria-describedby",n.mustDisplayValidationMessage()?n.createAttributeUiKey("label",n.attribute.name)+" "+n.createAttributeUiKey("attribute-msg",n.attribute.name):n.createAttributeUiKey("label",n.attribute.name))("role",n.attribute.dataType)("required",n.attribute.required===!0?"required":null)("aria-label",n.getAriaLabelComplete()),a(2),s("ngIf",n.mustDisplayValidationMessage()),a(),s("ngIf",n.mustDisplayIntervalMessage()))},dependencies:[Ae,zt,$e,Zi,qe,Ge,W,Se,ee,te],encapsulation:2,changeDetection:0})}}return i})(),co=(()=>{class i extends Di{constructor(e,t,n,r,c){super(e,t,n,r,c),this.quantityService=e,this.translation=t,this.attributeComponentContext=n,this.configuratorCommonsService=r,this.configuratorStorefrontUtilsService=c,this.attributeDropDownForm=new Oe(""),this.config=X(ke),this.group=n.group.id,it("productConfiguratorAttributeTypesV2")}ngOnInit(){this.attributeDropDownForm.setValue(this.attribute.selectedSingleValue)}getSelectedValue(){return this.attribute.values?.find(e=>e?.selected)}getSelectedValueDescription(){return this.getSelectedValue()?.description??""}static{this.\u0275fac=function(t){return new(t||i)(_(Gt),_(Te),_(De),_(ie),_(de))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-attribute-drop-down"]],features:[Je([ot]),xe],decls:4,vars:5,consts:[[4,"ngIf"],["class","cx-configurator-attribute-additional-value",4,"ngIf"],["class","form-group",4,"ngIf"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[1,"form-group"],[1,"cx-visually-hidden",3,"for"],["class","cx-value-price",4,"ngIf"],[1,"form-control",3,"change","id","ngClass","formControl","cxFocus"],[3,"selected","label","value",4,"ngFor","ngForOf"],[3,"selected","label","value"],[1,"cx-value-label-pair"],[3,"text","textSize","productName","tabIndex",4,"ngIf"],[3,"text","textSize","productName","tabIndex"],[1,"cx-value-price"],[3,"formula"],[1,"cx-attribute-level-quantity-price"],[3,"changeQuantity","quantityOptions"],[3,"formula",4,"ngIf"],[1,"cx-configurator-attribute-additional-value"]],template:function(t,n){t&1&&(v(0,Vc,3,2,"ng-container",0),g(1,"async"),v(2,Gc,2,3,"cx-configurator-attribute-numeric-input-field",1)(3,Bc,2,3,"cx-configurator-attribute-input-field",1)),t&2&&(s("ngIf",m(1,3,n.changedPrices$)),a(2),s("ngIf",n.isAdditionalValueNumeric),a(),s("ngIf",n.isAdditionalValueAlphaNumeric))},dependencies:[Ge,be,W,yt,zi,Xi,Yi,$e,Ae,qe,Ue,Zn,ii,Ct,ee,te],encapsulation:2,changeDetection:0})}}return i})(),Jn=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({productConfigurator:{assignment:{AttributeType_string:ii,AttributeType_sap_date:ii}}})],imports:[ve,ue,le,B,H]})}}return i})(),er=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({productConfigurator:{assignment:{AttributeType_numeric:Zn}}})],imports:[ve,ue,le,B,H,Ee]})}}return i})(),id=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({productConfigurator:{assignment:{AttributeType_dropdown:co,AttributeType_dropdown_add:co}}})],imports:[B,bt,ue,H,ve,nt,le,Ve,er,Jn,ht,Wt]})}}return i})(),nd=(()=>{class i extends ta{constructor(){super(...arguments),this.preventAction$=new Lt(!1),this.multipleSelectionValues=[]}ngOnInit(){this.initialize()}initialize(){this.attribute.values&&this.attribute.values.length>0&&(this.multipleSelectionValues=this.attribute.values.map(({name:e,quantity:t,selected:n,valueCode:r})=>({name:e,quantity:t,selected:n,valueCode:r}))),this.attribute.required&&this.multipleSelectionValues.filter(e=>e.selected).length<2&&this.preventAction$.next(!0)}updateMultipleSelectionValues(e,t){let n=this.multipleSelectionValues.findIndex(c=>c.valueCode===e);return this.multipleSelectionValues[n]=F(A({},this.multipleSelectionValues[n]),{selected:t}),{changedAttribute:F(A({},this.attribute),{values:this.multipleSelectionValues}),ownerKey:this.ownerKey,updateType:d.UpdateType.ATTRIBUTE}}updateMultipleSelectionValuesQuantity(e){let t=this.multipleSelectionValues.find(r=>r.valueCode===e.valueCode);return t?(t.quantity=e.quantity,{changedAttribute:F(A({},this.attribute),{values:[t]}),ownerKey:this.ownerKey,updateType:d.UpdateType.VALUE_QUANTITY}):void 0}onSelect(e){this.loading$.next(!0);let t=this.updateMultipleSelectionValues(e,!0);this.configuratorCommonsService.updateConfiguration(t.ownerKey,t.changedAttribute,t.updateType)}onDeselect(e){this.loading$.next(!0);let t=this.updateMultipleSelectionValues(e,!1);this.configuratorCommonsService.updateConfiguration(t.ownerKey,t.changedAttribute,t.updateType)}onDeselectAll(){this.loading$.next(!0),this.configuratorCommonsService.updateConfiguration(this.ownerKey,F(A({},this.attribute),{values:[]}),d.UpdateType.ATTRIBUTE)}onChangeValueQuantity(e){this.loading$.next(!0);let t=this.updateMultipleSelectionValuesQuantity(e);t&&this.configuratorCommonsService.updateConfiguration(t.ownerKey,t.changedAttribute,t.updateType)}onChangeAttributeQuantity(e){this.loading$.next(!0),e?this.onHandleAttributeQuantity(e):this.onDeselectAll()}extractPriceFormulaParameters(){return{quantity:0,price:{value:0,currencyIso:""},priceTotal:this.attribute.attributePriceTotal,isLightedUp:!0}}extractProductCardParameters(e,t,n,r){return{disableAllButtons:e??!1,hideRemoveButton:t??!1,productBoundValue:n,multiSelect:!0,withQuantity:this.withQuantity,loading$:this.loading$,attributeId:this.getAttributeCode(this.attribute),attributeLabel:this.attribute.label,attributeName:this.attribute.name,itemCount:this.attribute.values?.length?this.attribute.values.length:0,itemIndex:r}}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=Vi(i)))(n||i)}})()}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-attribute-multi-selection-bundle"]],features:[xe],decls:1,vars:1,consts:[[3,"id",4,"ngIf"],[3,"id"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[3,"id","productCardOptions","handleDeselect","handleQuantity","handleSelect",4,"ngFor","ngForOf"],[1,"cx-attribute-level-quantity-price"],[3,"changeQuantity","quantityOptions"],[3,"formula"],[3,"handleDeselect","handleQuantity","handleSelect","id","productCardOptions"]],template:function(t,n){t&1&&v(0,$c,3,3,"div",0),t&2&&s("ngIf",n.attribute==null||n.attribute.values==null?null:n.attribute.values.length)},dependencies:[be,W,zn,yt,Ue,ee],encapsulation:2,changeDetection:0})}}return i})(),rd=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({productConfigurator:{assignment:{AttributeType_checkBoxListProduct:nd}}})],imports:[B,Xn,ue,H,ve,le,lt,gt,bt,Ve]})}}return i})(),so=(()=>{class i extends Ye{constructor(e,t,n){super(),this.configUtilsService=e,this.attributeComponentContext=t,this.configuratorCommonsService=n,this.iconTypes=pe,this.config=X(ke),this.attributeCheckBoxForms=new Array,this.attribute=t.attribute,this.ownerKey=t.owner.key,this.expMode=t.expMode,this.initPriceChangedEvent(t.isPricingAsync,t.attribute.key),it("productConfiguratorAttributeTypesV2")}ngOnInit(){let e=this.attribute.values;if(e)for(let t of e){let n;t.selected?n=new Oe(!0):n=new Oe(!1),this.attributeCheckBoxForms.push(n)}}onSelect(e){this.attributeCheckBoxForms[e].setValue(!this.attributeCheckBoxForms[e].value);let t=this.configUtilsService.assembleValuesForMultiSelectAttributes(this.attributeCheckBoxForms,this.attribute);this.listenForPriceChanges&&this.configUtilsService.setLastSelected(this.attribute.name,t[e].valueCode),this.configuratorCommonsService.updateConfiguration(this.ownerKey,F(A({},this.attribute),{values:t}),d.UpdateType.ATTRIBUTE)}static{this.\u0275fac=function(t){return new(t||i)(_(de),_(De),_(ie))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-attribute-multi-selection-image"]],features:[Je([ot]),xe],decls:5,vars:7,consts:[[1,"cx-row",3,"id"],[4,"ngIf"],["class","cx-configurator-select",3,"id",4,"ngFor","ngForOf"],[1,"cx-configurator-select",3,"id"],["type","checkbox",1,"form-input",3,"click","id","value","formControl","name","cxFocus"],[1,"cx-label-container"],["aria-hidden","true",1,"form-check-label",3,"id","for"],["class","cx-img",3,"src","alt",4,"ngIf"],["class","cx-img-dummy",4,"ngIf"],[3,"formula"],[1,"cx-img",3,"src","alt"],[1,"cx-img-dummy"],[4,"ngFor","ngForOf"],["class","cx-configurator-select",3,"id",4,"ngIf"],["aria-hidden","true",1,"form-check-label",3,"id","for","title"],[3,"ngClass","src","alt",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"cxPopover","cxPopoverOptions",4,"ngIf"],[3,"ngClass","src","alt"],[3,"ngClass"],[3,"cxPopover","cxPopoverOptions"],[3,"type"]],template:function(t,n){t&1&&(l(0,"div",0),v(1,Hc,2,1,"ng-container",1),g(2,"async"),v(3,Jc,2,1,"ng-container",1),g(4,"async"),p()),t&2&&(O("id",n.createAttributeIdForConfigurator(n.attribute)),a(),s("ngIf",!(n.config.features!=null&&n.config.features.productConfiguratorAttributeTypesV2)&&m(2,3,n.changedPrices$)),a(2),s("ngIf",(n.config.features==null?null:n.config.features.productConfiguratorAttributeTypesV2)&&m(4,5,n.changedPrices$)))},dependencies:[Ae,Yt,$e,qe,Ge,be,W,Se,Ue,Ji,ee,te],encapsulation:2,changeDetection:0})}}return i})(),od=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({productConfigurator:{assignment:{AttributeType_multi_selection_image:so,AttributeType_read_only_multi_selection_image:so}}})],imports:[ve,ue,le,B,H,Ee,Ve,en]})}}return i})(),ad=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-attribute-not-supported"]],decls:3,vars:3,template:function(t,n){t&1&&(l(0,"em"),y(1),g(2,"cxTranslate"),p()),t&2&&(a(),ne(m(2,1,"configurator.attribute.notSupported")))},dependencies:[te],encapsulation:2,changeDetection:0})}}return i})(),cd=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({productConfigurator:{assignment:{AttributeType_not_implemented:ad}}})],imports:[B,H]})}}return i})(),uo=(()=>{class i extends Di{constructor(e,t,n,r,c){super(e,t,n,r,c),this.quantityService=e,this.translation=t,this.attributeComponentContext=n,this.configuratorCommonsService=r,this.configuratorStorefrontUtilsService=c,this.attributeRadioButtonForm=new Oe("")}ngOnInit(){this.attributeRadioButtonForm.setValue(this.attribute.selectedSingleValue)}static{this.\u0275fac=function(t){return new(t||i)(_(Gt),_(Te),_(De),_(ie),_(de))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-attribute-radio-button"]],features:[Je([ot]),xe],decls:9,vars:8,consts:[[2,"display","none"],[3,"id"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[4,"ngIf"],["class","cx-configurator-attribute-additional-value",4,"ngIf"],[1,"cx-attribute-level-quantity-price"],[3,"changeQuantity","quantityOptions"],[3,"formula",4,"ngIf"],[3,"formula"],["class","form-check",4,"ngFor","ngForOf"],[1,"form-check"],[1,"cx-value-label-pair"],["type","radio","formcontrolname","attributeRadioButtonForm",1,"form-check-input",3,"change","id","formControl","value","name","cxFocus"],["aria-hidden","true",1,"form-check-label","form-radio-label",3,"id","for"],[3,"text","textSize","productName","tabIndex",4,"ngIf"],[1,"cx-value-price"],[3,"text","textSize","productName","tabIndex"],[1,"cx-configurator-attribute-additional-value"]],template:function(t,n){t&1&&(l(0,"fieldset")(1,"legend",0),y(2),p(),l(3,"div",1),v(4,ts,3,2,"div",2)(5,rs,2,1,"ng-container",3),g(6,"async"),v(7,os,1,0,"cx-configurator-attribute-numeric-input-field",4)(8,as,1,0,"cx-configurator-attribute-input-field",4),p()()),t&2&&(a(2),ne(n.attribute.label),a(),O("id",n.createAttributeIdForConfigurator(n.attribute)),a(),s("ngIf",n.withQuantity),a(),s("ngIf",m(6,6,n.changedPrices$)),a(2),s("ngIf",n.isAdditionalValueNumeric),a(),s("ngIf",n.isAdditionalValueAlphaNumeric))},dependencies:[be,W,yt,zt,Wi,$e,Ae,qe,Ue,Zn,ii,Ct,ee],encapsulation:2,changeDetection:0})}}return i})(),sd=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({productConfigurator:{assignment:{AttributeType_radioGroup:uo,AttributeType_radioGroup_add:uo}}})],imports:[B,bt,ue,H,ve,le,Ve,er,Jn,ht]})}}return i})(),ud=(()=>{class i extends Ye{constructor(e,t){super(),this.translationService=e,this.attributeComponentContext=t,this.attribute=t.attribute,this.group=t.group.id,this.expMode=t.expMode,this.initPriceChangedEvent(t.isPricingAsync,t.attribute.key)}getCurrentValueName(e,t){let n="";return e.selectedSingleValue&&!t?n=e.selectedSingleValue:e.userInput&&!t?n=e.userInput:t&&t.valueDisplay&&(n=t?.valueDisplay),n}getAriaLabel(e,t){let n="";if(t){let r=this.getCurrentValueName(e,t);t.valuePrice&&t.valuePrice?.value!==0?t.valuePriceTotal&&t.valuePriceTotal?.value!==0?n=this.translate("configurator.a11y.readOnlyValueOfAttributeFullWithPrice",r,e,t.valuePriceTotal?.formattedValue):n=this.translate("configurator.a11y.readOnlyValueOfAttributeFullWithPrice",r,e,t.valuePrice?.formattedValue):n=this.translate("configurator.a11y.readOnlyValueOfAttributeFull",r,e)}else{let r=this.getCurrentValueName(e);n=this.translate("configurator.a11y.readOnlyValueOfAttributeFull",r,e)}return n}translate(e,t,n,r){let c="",f=r?{value:t,attribute:n.label,price:r}:{value:t,attribute:n.label};return this.translationService.translate(e,f).pipe(w(1)).subscribe(T=>c=T),c}static{this.\u0275fac=function(t){return new(t||i)(_(Te),_(De))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-attribute-read-only"]],features:[Je([ot]),xe],decls:5,vars:3,consts:[["noStaticDomain",""],[3,"id"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],["class","form-check",4,"ngIf"],[1,"form-check"],["role","note","tabindex","0",1,"cx-visually-hidden",3,"id"],[1,"cx-value-label-pair"],["aria-hidden","true",1,"cx-read-only-attribute-label",3,"id"],[3,"text","textSize","productName","tabIndex",4,"ngIf"],[1,"cx-value-price"],[3,"formula"],[3,"text","textSize","productName","tabIndex"],[4,"ngIf"],["aria-hidden","true",1,"cx-read-only-attribute-label"],["aria-hidden","true"]],template:function(t,n){if(t&1&&(l(0,"fieldset")(1,"div",1),v(2,ls,2,1,"ng-container",2)(3,gs,2,2,"ng-template",null,0,ge),p()()),t&2){let r=ce(4);a(),O("id",n.createAttributeIdForConfigurator(n.attribute)),a(),s("ngIf",n.attribute.values&&n.attribute.values.length>0)("ngIfElse",r)}},dependencies:[Ue,Ct,be,W,ee],encapsulation:2,changeDetection:0})}}return i})(),ld=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({productConfigurator:{assignment:{AttributeType_readonly:ud}}})],imports:[ve,ue,le,Ve,ht,B,H]})}}return i})(),pd=(()=>{class i extends Di{constructor(e,t,n,r,c){super(e,t,n,r,c),this.quantityService=e,this.translation=t,this.attributeComponentContext=n,this.configuratorCommonsService=r,this.configuratorStorefrontUtilsService=c,this.RETRACT_VALUE_CODE=d.RetractValueCode,this.attributeDropDownForm=new Oe(""),this.group=n.group.id,it("productConfiguratorAttributeTypesV2")}ngOnInit(){this.attributeDropDownForm.setValue(this.attribute.selectedSingleValue);let e=this.attribute.values;if(e&&e.length>0){let t=e.find(n=>n.selected);t&&(this.selectionValue=t)}}get selectedValue(){let e;if(this.selectionValue)e=this.selectionValue;else throw new Error("selectedValue called without a defined selectionValue");return e}extractProductCardParameters(){return{hideRemoveButton:!0,productBoundValue:this.selectedValue,singleDropdown:!0,withQuantity:!1,loading$:this.loading$,attributeId:this.getAttributeCode(this.attribute),attributeName:this.attribute.name,itemCount:0,itemIndex:0}}isNotRetractValue(){return(this.selectionValue&&this.selectionValue?.valueCode!==d.RetractValueCode)??!1}isRetractValue(e){return e===d.RetractValueCode}static{this.\u0275fac=function(t){return new(t||i)(_(Gt),_(Te),_(De),_(ie),_(de))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-attribute-single-selection-bundle-dropdown"]],features:[xe],decls:3,vars:3,consts:[["class","form-group",4,"ngIf"],[3,"id","productCardOptions","handleDeselect",4,"ngIf"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[1,"form-group"],[1,"cx-visually-hidden",3,"for"],[1,"form-control",3,"change","id","ngClass","formControl","cxFocus"],[3,"label","selected","value",4,"ngFor","ngForOf"],[3,"label","selected","value"],[3,"handleDeselect","id","productCardOptions"],[1,"cx-attribute-level-quantity-price"],[3,"changeQuantity","quantityOptions"],[3,"formula"]],template:function(t,n){t&1&&v(0,ms,7,19,"div",0)(1,vs,1,2,"cx-configurator-attribute-product-card",1)(2,_s,3,2,"div",2),t&2&&(s("ngIf",n.attribute==null||n.attribute.values==null?null:n.attribute.values.length),a(),s("ngIf",n.isNotRetractValue()),a(),s("ngIf",n.withQuantity))},dependencies:[Ge,be,W,zn,zi,Xi,Yi,$e,Ae,qe,yt,Ue,ee,te],encapsulation:2,changeDetection:0})}}return i})(),dd=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({productConfigurator:{assignment:{AttributeType_dropdownProduct:pd}}})],imports:[B,Xn,ue,H,ve,nt,le,bt,Ve]})}}return i})(),gd=(()=>{class i extends Di{extractProductCardParameters(e,t){return{hideRemoveButton:this.attribute.required,fallbackFocusId:this.getFocusIdOfNearestValue(e),productBoundValue:e,loading$:this.loading$,attributeId:this.getAttributeCode(this.attribute),attributeLabel:this.attribute.label,attributeName:this.attribute.name,itemCount:this.attribute.values?.length?this.attribute.values.length:0,itemIndex:t}}getFocusIdOfNearestValue(e){if(!this.attribute.values)return"n/a";let t=this.attribute.values.findIndex(n=>n.valueCode===e.valueCode);return t--,t<0&&(t=this.attribute.values.length>1?1:0),this.createFocusId(this.getAttributeCode(this.attribute).toString(),this.attribute.values[t].valueCode)}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=Vi(i)))(n||i)}})()}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-attribute-single-selection-bundle"]],features:[xe],decls:1,vars:1,consts:[[3,"id",4,"ngIf"],[3,"id"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[3,"id","productCardOptions","handleDeselect","handleSelect",4,"ngFor","ngForOf"],[1,"cx-attribute-level-quantity-price"],[3,"changeQuantity","quantityOptions"],[3,"formula"],[3,"handleDeselect","handleSelect","id","productCardOptions"]],template:function(t,n){t&1&&v(0,ys,3,3,"div",0),t&2&&s("ngIf",n.attribute==null||n.attribute.values==null?null:n.attribute.values.length)},dependencies:[be,W,zn,yt,Ue],encapsulation:2,changeDetection:0})}}return i})(),fd=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({productConfigurator:{assignment:{AttributeType_radioGroupProduct:gd}}})],imports:[B,Xn,bt,ue,H,hi,ve,le,lt,gt,Ve]})}}return i})(),lo=(()=>{class i extends Ye{constructor(e,t){super(),this.attributeComponentContext=e,this.configuratorCommonsService=t,this.attributeRadioButtonForm=new Oe(""),this.iconTypes=pe,this.config=X(ke),this.featureConfigService=X(pt),this.attribute=e.attribute,this.ownerKey=e.owner.key,this.expMode=e.expMode,it("productConfiguratorAttributeTypesV2"),this.initPriceChangedEvent(e.isPricingAsync,e.attribute.key)}ngOnInit(){this.attributeRadioButtonForm.setValue(this.attribute.selectedSingleValue)}onClick(e){this.configuratorCommonsService.updateConfiguration(this.ownerKey,F(A({},this.attribute),{selectedSingleValue:e}),d.UpdateType.ATTRIBUTE)}extractValuePriceFormulaParameters(e){return{price:e?.valuePrice,isLightedUp:e?e.selected:!1}}getValueDescriptionStyleClasses(){return this.featureConfigService?.isEnabled("a11yImproveContrast")?"cx-value-description santorini-updated":"cx-value-description"}static{this.\u0275fac=function(t){return new(t||i)(_(De),_(ie))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-attribute-single-selection-image"]],features:[Je([ot]),xe],decls:5,vars:7,consts:[["role","radiogroup",1,"cx-row",3,"id"],[4,"ngIf"],["class","cx-configurator-select",3,"id",4,"ngFor","ngForOf"],[1,"cx-configurator-select",3,"id"],["type","radio","formcontrolname","attributeRadioButtonForm","role","radio",1,"form-input",3,"click","id","value","formControl","name","cxFocus"],[1,"cx-label-container"],["aria-hidden","true",1,"form-check-label","form-radio-label",3,"id","for"],["class","cx-img",3,"src","alt",4,"ngIf"],["class","cx-img-dummy",4,"ngIf"],[3,"formula"],[1,"cx-img",3,"src","alt"],[1,"cx-img-dummy"],[4,"ngFor","ngForOf"],["class","cx-configurator-select",3,"id",4,"ngIf"],["aria-hidden","true",1,"form-check-label","form-radio-label",3,"id","for","title"],[3,"ngClass","src","alt",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"cxPopover","cxPopoverOptions",4,"ngIf"],[3,"ngClass","src","alt"],[3,"ngClass"],[3,"cxPopover","cxPopoverOptions"],[3,"type"]],template:function(t,n){t&1&&(l(0,"div",0),v(1,Ss,2,1,"ng-container",1),g(2,"async"),v(3,Fs,2,1,"ng-container",1),g(4,"async"),p()),t&2&&(O("id",n.createAttributeIdForConfigurator(n.attribute)),a(),s("ngIf",!(n.config.features!=null&&n.config.features.productConfiguratorAttributeTypesV2)&&m(2,3,n.changedPrices$)),a(2),s("ngIf",(n.config.features==null?null:n.config.features.productConfiguratorAttributeTypesV2)&&m(4,5,n.changedPrices$)))},dependencies:[Ae,zt,Wi,$e,qe,Ge,be,W,Se,Ue,Ji,ee,te],encapsulation:2,changeDetection:0})}}return i})(),md=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({productConfigurator:{assignment:{AttributeType_single_selection_image:lo,AttributeType_read_only_single_selection_image:lo}}})],imports:[ve,ue,le,B,H,Ee,Ve,en]})}}return i})(),wi=class{},vd=(()=>{class i{toggleWarnings(){this.showWarnings=!this.showWarnings}toggleErrors(){this.showErrors=!this.showErrors}constructor(e,t){this.configuratorCommonsService=e,this.configRouterExtractorService=t,this.iconTypes=pe,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe(R(n=>this.configuratorCommonsService.getConfiguration(n.owner))),this.showWarnings=!1,this.showErrors=!1}static{this.\u0275fac=function(t){return new(t||i)(_(ie),_(he))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configuration-conflict-and-error-messages"]],decls:2,vars:3,consts:[[4,"ngIf"],["aria-live","assertive","aria-atomic","true",1,"alert-message","alert-message-invalid-warning"],[1,"alert-icon"],["type","WARNING"],["class","cx-warning-text",4,"ngIf"],["class","cx-warning-toggle",3,"click",4,"ngIf"],[1,"cx-warning-messages"],["class","cx-warning-message",3,"open",4,"ngFor","ngForOf"],[1,"cx-warning-text"],[1,"cx-warning-toggle",3,"click"],["type","CARET_DOWN"],["type","CARET_UP"],[1,"cx-warning-message"],["aria-live","assertive","aria-atomic","true","role","alert",1,"alert-message","alert-message-error"],["type","ERROR"],["class","cx-error-text",4,"ngIf"],["class","cx-error-toggle",3,"click",4,"ngIf"],[1,"cx-error-messages"],["class","cx-error-message",3,"open",4,"ngFor","ngForOf"],[1,"cx-error-text"],[1,"cx-error-toggle",3,"click"],[1,"cx-error-message"]],template:function(t,n){t&1&&(v(0,js,3,2,"ng-container",0),g(1,"async")),t&2&&s("ngIf",m(1,1,n.configuration$))},dependencies:[be,W,Se,ee,te],encapsulation:2,changeDetection:0})}}return i})(),_d=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({cmsComponents:{CpqConfiguratorConflictAndErrorMessagesComponent:{component:vd}}})],imports:[B,lt,gt,H,Ee]})}}return i})(),Cd=(()=>{class i{constructor(){this.groupType=d.GroupType,this.iconTypes=pe,this.tabindex="0",this.role="note"}displayConflictDescription(e){return e.groupType===d.GroupType.CONFLICT_GROUP}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-conflict-description"]],hostVars:2,hostBindings:function(t,n){t&2&&Bi("tabindex",n.tabindex)("role",n.role)},inputs:{currentGroup:"currentGroup"},decls:1,vars:1,consts:[[4,"ngIf"],["aria-hidden","true",3,"type"]],template:function(t,n){t&1&&v(0,Qs,3,2,"ng-container",0),t&2&&s("ngIf",n.displayConflictDescription(n.currentGroup))},dependencies:[W,Se],encapsulation:2,changeDetection:0})}}return i})(),hd=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({imports:[B,Ee]})}}return i})(),yd=(()=>{class i{constructor(){this.groupType=d.GroupType,this.tabindex="0",this.role="note"}displayConflictSuggestion(e){return e.groupType===d.GroupType.CONFLICT_GROUP&&e.attributes?e.attributes.length>0:!1}createSuggestionUiKey(){return"suggestion--"+this.suggestionNumber}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-conflict-suggestion"]],hostVars:2,hostBindings:function(t,n){t&2&&Bi("tabindex",n.tabindex)("role",n.role)},inputs:{currentGroup:"currentGroup",attribute:"attribute",suggestionNumber:"suggestionNumber"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"cx-title"],["aria-hidden","true"]],template:function(t,n){t&1&&v(0,Ks,10,23,"ng-container",0),t&2&&s("ngIf",n.displayConflictSuggestion(n.currentGroup))},dependencies:[W,te],encapsulation:2,changeDetection:0})}}return i})(),bd=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({imports:[B,H]})}}return i})(),Id=(()=>{class i{constructor(e,t,n,r,c,f,T){this.productService=e,this.routingService=t,this.configRouterExtractorService=n,this.configuratorCommonsService=r,this.breakpointService=c,this.windowRef=f,this.location=T,this.container$=this.configRouterExtractorService.extractRouterData().pipe(R(h=>this.configuratorCommonsService.getConfiguration(h.owner).pipe(E(C=>({routerData:h,configuration:C}))).pipe(R(C=>this.productService.get(C.configuration.productCode).pipe(E(Q=>({routerData:C.routerData,configuration:C.configuration,product:Q})))))))}navigateToCart(){this.routingService.go("cart")}exitConfiguration(){this.container$.pipe(w(1)).subscribe(e=>{e.routerData.owner.type===oe.OwnerType.CART_ENTRY?this.navigateToCart():this.routingService.go({cxRoute:"product",params:e.product})})}isDesktop(){return this.breakpointService.isUp(wt.md)}isMobile(){return this.breakpointService.isDown(wt.sm)}static{this.\u0275fac=function(t){return new(t||i)(_(Xe),_(tt),_(he),_(ie),_(At),_(Ot),_(Ir))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-exit-button"]],decls:2,vars:3,consts:[[4,"ngIf"],["tabindex","0",1,"btn","btn-tertiary",3,"click"]],template:function(t,n){t&1&&(v(0,Js,6,7,"ng-container",0),g(1,"async")),t&2&&s("ngIf",m(1,1,n.container$))},dependencies:[W,ee,te],encapsulation:2})}}return i})(),xd=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({cmsComponents:{ConfiguratorExitButton:{component:Id}}}),Ot],imports:[B,H]})}}return i})(),It=(()=>{class i{constructor(){this._expModeRequested=new oi(1),this._expModeActive=new oi(1)}setExpModeRequested(e){this._expModeRequested.next(e)}getExpModeRequested(){return this._expModeRequested}setExpModeActive(e){this._expModeActive.next(e)}getExpModeActive(){return this._expModeActive}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),tr=(()=>{class i{constructor(e,t,n,r,c){this.configuratorCommonsService=e,this.configuratorGroupsService=t,this.languageService=n,this.configUtils=r,this.configExpertModeService=c,this.typePrefix="AttributeType_",this.activeLanguage$=this.languageService.getActive(),this.uiType=d.UiType,this.featureConfigService=X(pt),this.trackByFn=(f,T)=>this.featureConfigService.isEnabled("productConfiguratorDeltaRendering")?T.key:T}updateConfiguration(e){this.configuratorCommonsService.updateConfiguration(e.ownerKey,e.changedAttribute,e.updateType)}isConflictGroupType(e){return e?this.configuratorGroupsService.isConflictGroupType(e):!1}displayConflictDescription(e){return e.groupType!==void 0&&this.configuratorGroupsService.isConflictGroupType(e.groupType)&&e.name!==""}createGroupId(e){return this.configUtils.createGroupId(e)}get expMode(){return this.configExpertModeService.getExpModeActive()}getComponentKey(e){return e.uiTypeVariation?.includes(d.CustomUiTypeIndicator)?this.typePrefix+e.uiTypeVariation:this.typePrefix+e.uiType}static{this.\u0275fac=function(t){return new(t||i)(_(ie),_(Ze),_(fi),_(de),_(It))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-group"]],inputs:{group:"group",owner:"owner",isNavigationToGroupEnabled:"isNavigationToGroupEnabled",isPricingAsync:"isPricingAsync"},decls:3,vars:4,consts:[["role","tabpanel",3,"id"],[4,"ngIf"],["class","cx-group-attribute",3,"cx-hidden",4,"ngFor","ngForOf","ngForTrackBy"],[3,"currentGroup"],[1,"cx-group-attribute"],[3,"currentGroup","attribute","suggestionNumber"],[3,"cxConfiguratorAttributeComponent"]],template:function(t,n){t&1&&(l(0,"div",0),v(1,nu,2,1,"ng-container",1)(2,au,4,6,"div",2),p()),t&2&&(O("id",n.createGroupId(n.group.id)),a(),s("ngIf",n.displayConflictDescription(n.group)),a(),s("ngForOf",n.group.attributes)("ngForTrackBy",n.trackByFn))},dependencies:[be,W,Cd,yd,Qp,ee],encapsulation:2,changeDetection:0})}}return i})(),Td=(()=>{class i{constructor(e,t,n,r){this.configuratorStorefrontUtilsService=e,this.configuratorCommonsService=t,this.launchDialogService=n,this.focusService=r,this.iconTypes=pe,this.uiType=d.UiType,this.focusConfig={trap:!0,block:!0,autofocus:!0,focusOnEscape:!0},this.subscription=new Qe}init(e,t){this.focusService.clear(),this.conflictGroup$=e,this.routerData$=t}ngOnInit(){this.subscription.add(this.launchDialogService.data$.subscribe(e=>{this.init(e.conflictGroup,e.routerData)}))}ngOnDestroy(){this.subscription?.unsubscribe()}dismissModal(e){this.routerData$.pipe(w(1)).subscribe(t=>this.configuratorCommonsService.dismissConflictSolverDialog(t.owner)),this.launchDialogService.closeDialog(e),this.configuratorStorefrontUtilsService.scrollToConfigurationElement(".VariantConfigurationTemplate"),this.configuratorStorefrontUtilsService.focusFirstAttribute()}static{this.\u0275fac=function(t){return new(t||i)(_(de),_(ie),_(mt),_(ft))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-conflict-solver-dialog"]],decls:20,vars:20,consts:[["role","dialog","aria-modal","true","aria-labelledby","dialogTitle",1,"cx-modal-container"],["aria-atomic","true","aria-live","assertive","role","alert","aria-relevant","additions",1,"cx-visually-hidden"],[1,"cx-modal-content",3,"cxFocus"],[1,"cx-dialog-header","modal-header"],["id","dialogTitle","class","cx-dialog-title modal-title","tabindex","0",4,"cxFeature"],["type","button",1,"close",3,"click","title"],["aria-hidden","true"],[3,"type"],[1,"cx-dialog-body","modal-body"],[1,"cx-msg-warning"],[4,"ngIf"],["id","dialogTitle","tabindex","0",1,"cx-dialog-title","modal-title"],[3,"group","owner","isNavigationToGroupEnabled"]],template:function(t,n){t&1&&(l(0,"div",0)(1,"div",1),y(2),g(3,"cxTranslate"),p(),l(4,"div",2)(5,"div",3),v(6,cu,3,3,"h3",4)(7,su,3,3,"div",4),l(8,"button",5),g(9,"cxTranslate"),g(10,"cxTranslate"),U("click",function(){return n.dismissModal("Close conflict solver dialog")}),l(11,"span",6),x(12,"cx-icon",7),p()()(),l(13,"div",8)(14,"div",9),x(15,"cx-icon",7),y(16),g(17,"cxTranslate"),p(),v(18,lu,3,3,"ng-container",10),g(19,"async"),p()()()),t&2&&(a(2),S(" ",m(3,10,"configurator.header.conflictWarning")," "),a(2),s("cxFocus",n.focusConfig),a(2),s("cxFeature","a11yDialogsHeading"),a(),s("cxFeature","!a11yDialogsHeading"),a(),O("title",m(9,12,"configurator.a11y.closeConflictSolverModal")),M("aria-label",m(10,14,"configurator.a11y.closeConflictSolverModal")),a(4),s("type",n.iconTypes.CLOSE),a(3),s("type",n.iconTypes.ERROR),a(),S(" ",m(17,16,"configurator.header.conflictWarning")," "),a(2),s("ngIf",m(19,18,n.routerData$)))},dependencies:[W,Se,tr,Ae,gi,ee,te],encapsulation:2,changeDetection:0})}}return i})(),Sd=(()=>{class i{constructor(e,t,n){this.launchDialogService=e,this.configRouterExtractorService=t,this.configuratorGroupsService=n,this.subscription=new Qe,this.routerData$=this.configRouterExtractorService.extractRouterData(),this.conflictGroupAndRouterData$=this.routerData$.pipe(R(r=>this.configuratorGroupsService.getConflictGroupForImmediateConflictResolution(r.owner).pipe(E(c=>({conflictGroup:c,routerData:r})))),Be(0)),this.controlDialog()}controlDialog(){this.subscription.add(this.conflictGroupAndRouterData$.pipe(Y(e=>!!e.conflictGroup),kt((e,t)=>e.conflictGroup===t.conflictGroup&&e.routerData.navigationId===t.routerData.navigationId)).subscribe(()=>{this.openModal(),this.subscribeToCloseDialog()}))}subscribeToCloseDialog(){this.subscription.add(this.conflictGroupAndRouterData$.pipe(gr(e=>!e.conflictGroup)).subscribe(()=>this.closeModal("CLOSE_NO_CONFLICTS_EXIST")))}openModal(){this.launchDialogService.openDialogAndSubscribe("CONFLICT_SOLVER",void 0,{conflictGroup:this.conflictGroupAndRouterData$.pipe(E(e=>e.conflictGroup)),routerData:this.routerData$})}closeModal(e){this.launchDialogService.closeDialog(e)}ngOnDestroy(){this.subscription?.unsubscribe()}static{this.\u0275fac=function(t){return new(t||i)(D(mt),D(he),D(Ze))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),ir=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({cmsComponents:{ConfiguratorForm:{component:tr}}})],imports:[ue,le,B,H,nt,cd,Jn,Hp,er,Yp,sd,fd,rd,ld,md,dd,ed,Zp,id,od,hd,bd,ea]})}}return i})(),Ed={launch:{CONFLICT_SOLVER:{inlineRoot:!0,component:Td,dialogType:mi.DIALOG}}},Od=(()=>{class i{constructor(e){}static{this.\u0275fac=function(t){return new(t||i)(D(Sd))}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z(Ed)],imports:[B,Ee,H,ir,ve,Wt]})}}return i})(),wd=(()=>{class i{constructor(e,t,n,r,c,f){this.configuratorCommonsService=e,this.configuratorGroupsService=t,this.configRouterExtractorService=n,this.configExpertModeService=r,this.launchDialogService=c,this.globalMessageService=f,this.subscription=new Qe,this.routerData$=this.configRouterExtractorService.extractRouterData(),this.configuration$=this.routerData$.pipe(Y(T=>T.pageType===vt.PageType.CONFIGURATION),R(T=>this.configuratorCommonsService.getOrCreateConfiguration(T.owner,T.configIdTemplate))),this.currentGroup$=this.routerData$.pipe(R(T=>this.configuratorGroupsService.getCurrentGroup(T.owner)))}ngOnDestroy(){this.subscription.unsubscribe()}listenForConflictResolution(){this.subscription.add(this.routerData$.pipe(R(e=>this.configuratorCommonsService.hasConflicts(e.owner)),kt(),mr(1),Y(e=>!e)).subscribe(()=>this.displayConflictResolvedMessage()))}displayConflictResolvedMessage(){this.globalMessageService.add({key:"configurator.header.conflictsResolved"},ji.MSG_TYPE_CONFIRMATION)}ngOnInit(){this.listenForConflictResolution(),this.routerData$.pipe(R(e=>this.configuratorCommonsService.getConfiguration(e.owner)),w(1)).subscribe(e=>{this.configuratorCommonsService.checkConflictSolverDialog(e.owner)}),this.routerData$.pipe(Y(e=>e.displayRestartDialog===!0),R(e=>this.configuratorCommonsService.getConfiguration(e.owner)),w(1),Y(e=>e.interactionState.newConfiguration===!1),Be(0)).subscribe(e=>{this.launchDialogService.openDialogAndSubscribe("CONFIGURATOR_RESTART_DIALOG",void 0,{owner:e.owner})}),this.routerData$.pipe(w(1)).subscribe(e=>{e.resolveIssues&&this.configuratorCommonsService.hasConflicts(e.owner).pipe(w(1)).subscribe(t=>{t&&!e.skipConflicts?this.configuratorGroupsService.navigateToConflictSolver(e.owner):this.configuratorGroupsService.navigateToFirstIncompleteGroup(e.owner)}),e.expMode&&this.configExpertModeService?.setExpModeRequested(e.expMode)})}isNavigationToGroupEnabled(e){return!e.immediateConflictResolution}isDialogActive(e){return e.interactionState.showConflictSolverDialog??!1}static{this.\u0275fac=function(t){return new(t||i)(_(ie),_(Ze),_(he),_(It),_(mt),_(Qi))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-form"]],decls:4,vars:4,consts:[["ghostForm",""],[4,"ngIf","ngIfElse"],[4,"ngIf"],[3,"group","owner","isNavigationToGroupEnabled","isPricingAsync"],[4,"ngFor","ngForOf"],[1,"cx-ghost-attribute"],[1,"cx-ghost-header"],[1,"cx-ghost-title","ghost"],[1,"cx-ghost-icon","ghost"],[1,"cx-ghost-body"],[1,"cx-ghost-text","ghost"],[1,"cx-ghost-price","ghost"],[1,"cx-ghost-description-box"],[1,"cx-ghost-description","ghost"],["class","cx-ghost-radiobutton-value",4,"ngFor","ngForOf"],[1,"cx-ghost-radiobutton-value"],[1,"cx-ghost-value-label-pair"],[1,"cx-ghost-value-icon","ghost"],[1,"cx-ghost-label","ghost"],[1,"cx-ghost-value-price","ghost"],[1,"cx-ghost-price"]],template:function(t,n){if(t&1&&(v(0,gu,2,2,"ng-container",1),g(1,"async"),v(2,_u,1,2,"ng-template",null,0,ge)),t&2){let r=ce(3);s("ngIf",m(1,2,n.configuration$))("ngIfElse",r)}},dependencies:[be,W,tr,ee],encapsulation:2,changeDetection:0})}}return i})();var Ad=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({cmsComponents:{ConfiguratorForm:{component:wd}}})],imports:[B,H,nt,ir]})}}return i})(),Dd=(()=>{class i{constructor(e){this.windowRef=e}getFocusedGroupIndex(e){if(e){let t=e.find(n=>n.nativeElement?.id===this.windowRef?.document?.activeElement?.id);if(t)return e.toArray().indexOf(t)}}updateCurrentGroupIndex(e,t){return t&&t!==e?t:e}focusNextGroup(e,t){let n=this.getFocusedGroupIndex(t);e=this.updateCurrentGroupIndex(e,n),t&&(e===t.length-1?t.first?.nativeElement?.focus():t.toArray()[e+1]?.nativeElement.focus())}focusPreviousGroup(e,t){let n=this.getFocusedGroupIndex(t);e=this.updateCurrentGroupIndex(e,n),t&&(e===0?t.last?.nativeElement?.focus():t.toArray()[e-1]?.nativeElement?.focus())}switchGroupOnArrowPress(e,t,n){e.preventDefault(),e.code==="ArrowUp"?this.focusPreviousGroup(t,n):e.code==="ArrowDown"&&this.focusNextGroup(t,n)}isBackBtnFocused(e){if(e)return e.first?.nativeElement?.classList?.value?.indexOf("cx-menu-back")!==-1&&this.windowRef?.document?.activeElement===e.first?.nativeElement}isActiveGroupInGroupList(e){let t;return e&&(t=e.find(n=>n.nativeElement?.classList?.value?.indexOf("active")!==-1)),t!==void 0}static{this.\u0275fac=function(t){return new(t||i)(D(Ot))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Fd=(()=>{class i{constructor(e,t,n,r,c,f,T,h,C){this.configCommonsService=e,this.configuratorGroupsService=t,this.hamburgerMenuService=n,this.configRouterExtractorService=r,this.configUtils=c,this.configGroupMenuService=f,this.directionService=T,this.translation=h,this.configExpertModeService=C,this.breakpointService=X(At),this.featureConfigService=X(pt),this.routerData$=this.configRouterExtractorService.extractRouterData(),this.configuration$=this.routerData$.pipe(R(Q=>this.configCommonsService.getConfiguration(Q.owner).pipe(E(re=>({routerData:Q,configuration:re})),Y(re=>re.configuration.complete&&re.configuration.consistent||re.configuration.interactionState.issueNavigationDone||!re.routerData.resolveIssues)).pipe(E(re=>re.configuration)))),this.currentGroup$=this.routerData$.pipe(R(Q=>this.configuratorGroupsService.getCurrentGroup(Q.owner))),this.displayedParentGroup$=this.configuration$.pipe(R(Q=>this.configuratorGroupsService.getMenuParentGroup(Q.owner)),R(Q=>Q?this.getCondensedParentGroup(Q):me(Q))),this.displayedGroups$=this.displayedParentGroup$.pipe(R(Q=>this.configuration$.pipe(E(re=>Q?this.condenseGroups(Q.subGroups):this.condenseGroups(re.groups))))),this.iconTypes=pe,this.ERROR=" ERROR",this.COMPLETE=" COMPLETE",this.WARNING=" WARNING",this.ICON="ICON",this.trackByFn=(Q,re)=>this.featureConfigService.isEnabled("productConfiguratorDeltaRendering")?re.id:re}click(e,t){this.configuration$.pipe(w(1)).subscribe(n=>{n.interactionState.currentGroup!==e.id&&(this.configuratorGroupsService.hasSubGroups(e)?(this.configuratorGroupsService.setMenuParentGroup(n.owner,e.id),t&&this.setFocusForSubGroup(e,t.id)):(this.configuratorGroupsService.navigateToGroup(n,e.id),this.hamburgerMenuService.toggle(!0),this.configUtils.scrollToConfigurationElement(".VariantConfigurationTemplate, .CpqConfigurationTemplate")))})}navigateUp(e){this.displayedParentGroup$.pipe(w(1)).subscribe(t=>{if(t){let n=this.getParentGroup(t);this.configuration$.pipe(w(1)).subscribe(r=>{n.pipe(w(1)).subscribe(c=>{this.configuratorGroupsService.setMenuParentGroup(r.owner,c?c.id:void 0)})})}}),e&&this.setFocusForMainMenu(e.id)}getConflictNumber(e){return e&&e.groupType===d.GroupType.CONFLICT_HEADER_GROUP?"("+e.subGroups.length+")":""}hasSubGroups(e){return this.configuratorGroupsService.hasSubGroups(e)}getParentGroup(e){return this.configuration$.pipe(E(t=>this.configuratorGroupsService.getParentGroup(t.groups,e)))}getCondensedParentGroup(e){return e&&e.subGroups&&e.subGroups.length===1&&e.groupType!==d.GroupType.CONFLICT_HEADER_GROUP?this.getParentGroup(e).pipe(R(t=>t?this.getCondensedParentGroup(t):me(t))):me(e)}condenseGroups(e){return e.flatMap(t=>t.subGroups.length===1&&t.groupType!==d.GroupType.CONFLICT_HEADER_GROUP?this.condenseGroups(t.subGroups):t)}isGroupVisited(e,t){return this.configuratorGroupsService.isGroupVisited(t.owner,e.id).pipe(E(n=>n&&!this.isConflictGroupType(e.groupType??d.GroupType.ATTRIBUTE_GROUP)),w(1))}isConflictGroupType(e){return e?this.configuratorGroupsService.isConflictGroupType(e):!1}isConflictHeader(e){return e&&e.groupType===d.GroupType.CONFLICT_HEADER_GROUP}isConflictGroup(e){return e&&e.groupType===d.GroupType.CONFLICT_GROUP}getGroupStatusStyles(e,t){return this.isGroupVisited(e,t).pipe(E(n=>{let r="CLOUDCPQCONFIGURATOR",c="cx-menu-item";return t.owner.configuratorType!==r&&!e.consistent&&(c=c+this.WARNING),t.owner.configuratorType!==r&&e.complete&&e.consistent&&n&&(c=c+this.COMPLETE),!e.complete&&n&&(c=c+this.ERROR),c}))}isLTRDirection(){return this.directionService.getDirection()===vi.LTR}isRTLDirection(){return this.directionService.getDirection()===vi.RTL}isForwardsNavigation(e){return e.code==="ArrowRight"&&this.isLTRDirection()||e.code==="ArrowLeft"&&this.isRTLDirection()}isBackNavigation(e){return e.code==="ArrowLeft"&&this.isLTRDirection()||e.code==="ArrowRight"&&this.isRTLDirection()}switchGroupOnArrowPress(e,t,n,r){this.handleFocusLoopInMobileMode(e),e.code==="ArrowUp"||e.code==="ArrowDown"?this.configGroupMenuService.switchGroupOnArrowPress(e,t,this.groups):this.isForwardsNavigation(e)?n&&this.hasSubGroups(n)&&this.click(n,r):this.isBackNavigation(e)&&this.configGroupMenuService.isBackBtnFocused(this.groups)&&this.navigateUp(r)}handleFocusLoopInMobileMode(e){this.breakpointService.isDown(wt.md).pipe(w(1)).subscribe(t=>{t&&e.code==="Tab"&&!e.shiftKey&&(this.configGroupMenuService.isBackBtnFocused(this.groups)?this.configGroupMenuService.isActiveGroupInGroupList(this.groups)||(e.preventDefault(),this.configUtils.focusFirstActiveElement("cx-hamburger-menu")):(e.preventDefault(),this.configUtils.focusFirstActiveElement("cx-hamburger-menu")))})}setFocusForMainMenu(e){let t=e;this.configuration$.pipe(w(1)).subscribe(n=>{n.groups?.forEach(r=>{r.subGroups?.length!==1&&(this.isGroupSelected(r.id,e)||this.containsSelectedGroup(r,e))&&(t=r.id)})}),this.configUtils.setFocus(t)}setFocusForSubGroup(e,t){let n="cx-menu-back";this.containsSelectedGroup(e,t)&&(n=t),this.configUtils.setFocus(n)}containsSelectedGroup(e,t){let n=!1;return e.subGroups?.forEach(r=>{this.isGroupSelected(r.id,t)&&(n=!0)}),n}getTabIndex(e,t){return!this.isGroupSelected(e.id,t)&&!this.containsSelectedGroup(e,t)?-1:0}isGroupSelected(e,t){return e===t}createAriaControls(e){return this.configUtils.createGroupId(e)}getAriaLabel(e){let t="";return e&&e.groupType&&this.isConflictGroupType(e.groupType)?this.isConflictHeader(e)?this.translation.translate("configurator.a11y.conflictsInConfiguration",{numberOfConflicts:this.getConflictNumber(e)}).pipe(w(1)).subscribe(n=>t=n):t=e.description?e.description:"":this.translation.translate("configurator.a11y.groupName",{group:e.description}).pipe(w(1)).subscribe(n=>t=n),t}createIconId(e,t){return this.ICON+e+t}getAriaDescribedby(e,t){return this.isGroupVisited(e,t).pipe(E(n=>{let r="CLOUDCPQCONFIGURATOR",c="";return t.owner.configuratorType!==r&&!e.consistent&&e.groupType&&!this.isConflictGroupType(e.groupType)&&(c=c+this.createIconId(pe.WARNING,e.id)),t.owner.configuratorType!==r&&e.complete&&e.consistent&&n&&(c=c+" "+this.createIconId(pe.SUCCESS,e.id)),!e.complete&&n&&(c=c+" "+this.createIconId(pe.ERROR,e.id)),this.hasSubGroups(e)&&(c=c+" "+this.createIconId(pe.CARET_RIGHT,e.id)),c=c+" inListOfGroups",c}))}getGroupMenuTitle(e){let t=e.description;return!this.isConflictHeader(e)&&!this.isConflictGroup(e)&&this.configExpertModeService.getExpModeActive().pipe(w(1)).subscribe(n=>{n&&(t+=` / [${e.name}]`)}),t}displayMenuItem(e){return this.configuration$.pipe(E(t=>{let n=!0;return t.immediateConflictResolution&&e.groupType===d.GroupType.CONFLICT_HEADER_GROUP&&(n=!1),n}))}isDialogActive(e){return e.interactionState.showConflictSolverDialog??!1}static{this.\u0275fac=function(t){return new(t||i)(_(ie),_(Ze),_(rn),_(he),_(de),_(Dd),_(nn),_(Te),_(It))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-group-menu"]],viewQuery:function(t,n){if(t&1&&at(Cu,5),t&2){let r;ct(r=st())&&(n.groups=r)}},decls:4,vars:4,consts:[["ghostGroups",""],["groupItem",""],[4,"ngIf","ngIfElse"],["role","tablist",1,"cx-group-menu"],["id","listOfGroups",1,"cx-visually-hidden"],["id","inListOfGroups","aria-hidden","true",1,"cx-visually-hidden"],[4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","cx-menu-back","role","tab","aria-describedby","listOfGroups",3,"cxFocus","click","keydown",4,"ngIf"],["role","tab","aria-describedby","listOfGroups",1,"cx-menu-back",3,"click","keydown","cxFocus"],[3,"type"],["role","tab",3,"click","keydown","id","ngClass","cxFocus","tabindex"],[3,"title"],[1,"groupIndicators"],[1,"conflictNumberIndicator"],[1,"groupStatusIndicator"],[1,"WARNING",3,"type","id","title"],[1,"ERROR",3,"type","id","title"],[1,"COMPLETE",3,"type","id","title"],[1,"subGroupIndicator"],[3,"type","id","title",4,"ngIf"],[3,"type","id","title"],[1,"cx-ghost-group-menu"],["class","cx-ghost-menu-item",4,"ngFor","ngForOf"],[1,"cx-ghost-menu-item"],[1,"cx-ghost-item-title","ghost"]],template:function(t,n){if(t&1&&(v(0,Au,2,2,"ng-container",2),g(1,"async"),v(2,Fu,2,2,"ng-template",null,0,ge)),t&2){let r=ce(3);s("ngIf",m(1,2,n.configuration$))("ngIfElse",r)}},dependencies:[Ge,be,W,Se,Ae,ee,te],encapsulation:2,changeDetection:0})}}return i})(),Rd=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({cmsComponents:{ConfiguratorMenu:{component:Fd}}})],imports:[B,H,Ee,ve]})}}return i})(),Nd=(()=>{class i{constructor(e,t,n,r,c,f,T){this.configuratorCommonsService=e,this.configuratorGroupsService=t,this.configRouterExtractorService=n,this.configExpertModeService=r,this.breakpointService=c,this.configuratorStorefrontUtilsService=f,this.hamburgerMenuService=T,this.ghostStyle=!0,this.subscription=new Qe,this.PRE_HEADER=".PreHeader",this.ADD_TO_CART_BUTTON="cx-configurator-add-to-cart-button",this.focusFirstElementInMobileGroupList=!1,this.displayedGroup$=this.configRouterExtractorService.extractRouterData().pipe(R(h=>this.configuratorGroupsService.getCurrentGroup(h.owner).pipe(ye(()=>{this.ghostStyle=!1})))),this.iconTypes=pe}ngOnInit(){this.subscription.add(this.hamburgerMenuService.isExpanded.subscribe(e=>{e?(this.configuratorStorefrontUtilsService.changeStyling(this.PRE_HEADER,"display","block"),this.configuratorStorefrontUtilsService.changeStyling(this.ADD_TO_CART_BUTTON,"z-index","0"),this.focusFirstElementInMobileGroupList=!0):(this.configuratorStorefrontUtilsService.changeStyling(this.PRE_HEADER,"display","none"),this.configuratorStorefrontUtilsService.changeStyling(this.ADD_TO_CART_BUTTON,"z-index","calc(var(--cx-popover-z-index) + 10)"),this.configuratorStorefrontUtilsService.focusFirstActiveElement(".cx-group-title"))}))}ngAfterContentChecked(){this.focusFirstElementInMobileGroupList&&(this.configuratorStorefrontUtilsService.focusFirstActiveElement("cx-configurator-group-menu"),this.focusFirstElementInMobileGroupList=!1)}ngOnDestroy(){this.subscription.unsubscribe(),this.configuratorStorefrontUtilsService.removeStyling(this.PRE_HEADER,"display")}getGroupTitle(e){let t=e.description;return e.groupType!==d.GroupType.CONFLICT_GROUP&&this.configExpertModeService.getExpModeActive().pipe(w(1)).subscribe(n=>{n&&(t+=` / [${e.name}]`)}),t}isMobile(){return this.breakpointService.isDown(wt.md)}static{this.\u0275fac=function(t){return new(t||i)(_(ie),_(Ze),_(he),_(It),_(At),_(de),_(rn))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-group-title"]],hostVars:2,hostBindings:function(t,n){t&2&&se("ghost",n.ghostStyle)},decls:4,vars:4,consts:[["ghostGroup",""],[4,"ngIf","ngIfElse"],[1,"cx-group-title"],[4,"ngIf"],[1,"cx-ghost-group-title"]],template:function(t,n){if(t&1&&(v(0,Nu,5,4,"ng-container",1),g(1,"async"),v(2,Pu,1,0,"ng-template",null,0,ge)),t&2){let r=ce(3);s("ngIf",m(1,2,n.displayedGroup$))("ngIfElse",r)}},dependencies:[W,Yr,ee],encapsulation:2,changeDetection:0})}}return i})(),Pd=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({cmsComponents:{ConfiguratorGroupTitle:{component:Nd}}})],imports:[B,zr]})}}return i})(),Md=(()=>{class i{constructor(e){this.breakpointService=e}extractPriceFormulaParameters(){return{quantity:this.attributeOverview.quantity,price:this.attributeOverview.valuePrice,priceTotal:this.attributeOverview.valuePriceTotal,isLightedUp:!0}}isDesktop(){return this.breakpointService.isUp(wt.md)}static{this.\u0275fac=function(t){return new(t||i)(_(At))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-overview-attribute"]],inputs:{attributeOverview:"attributeOverview"},decls:11,vars:26,consts:[["mobile",""],[1,"cx-visually-hidden"],["aria-hidden","true",1,"cx-attribute-value"],[4,"ngIf","ngIfElse"],["aria-hidden","true",1,"cx-attribute-label"],["aria-hidden","true",1,"cx-attribute-price"],[3,"formula"]],template:function(t,n){if(t&1&&(l(0,"span",1),y(1),g(2,"cxTranslate"),g(3,"cxTranslate"),g(4,"cxTranslate"),p(),l(5,"div",2),y(6),p(),v(7,Mu,5,2,"ng-container",3),g(8,"async"),v(9,Uu,4,2,"ng-template",null,0,ge)),t&2){let r=ce(10);a(),S(" ",n.attributeOverview.valuePrice&&(n.attributeOverview.valuePrice==null?null:n.attributeOverview.valuePrice.value)!==0?n.attributeOverview.valuePriceTotal&&(n.attributeOverview.valuePriceTotal==null?null:n.attributeOverview.valuePriceTotal.value)!==0?Z(2,4,"configurator.a11y.valueOfAttributeFullWithPrice",Et(15,an,n.attributeOverview.value,n.attributeOverview.attribute,n.attributeOverview.valuePriceTotal.formattedValue)):Z(3,7,"configurator.a11y.valueOfAttributeFullWithPrice",Et(19,an,n.attributeOverview.value,n.attributeOverview.attribute,n.attributeOverview.valuePrice.formattedValue)):Z(4,10,"configurator.a11y.valueOfAttributeFull",Le(23,ei,n.attributeOverview.value,n.attributeOverview.attribute)),`
`),a(5),S(" ",n.attributeOverview.value,`
`),a(),s("ngIf",m(8,13,n.isDesktop()))("ngIfElse",r)}},dependencies:[W,Ue,ee,te],encapsulation:2,changeDetection:0})}}return i})(),ia=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({imports:[B,H,Ve]})}}return i})(),Ud=(()=>{class i{constructor(e,t){this.productService=e,this.translation=t}ngOnInit(){let e={images:{}};this.attributeOverview.productCode?this.product$=this.productService.get(this.attributeOverview.productCode,"list").pipe(E(t=>t||e)):this.product$=me(e)}getProductPrimaryImage(e){return e?.images?.PRIMARY}extractPriceFormulaParameters(){return{quantity:this.attributeOverview.quantity,price:this.attributeOverview.valuePrice,priceTotal:this.attributeOverview.valuePriceTotal,isLightedUp:!0}}displayQuantity(){let e=this.attributeOverview.quantity;return e!==void 0&&e>0}displayPrice(){return this.attributeOverview.valuePrice?.value!==void 0&&this.attributeOverview.valuePrice?.value>0}getAriaLabel(){let e="";return this.displayQuantity()?this.attributeOverview.valuePrice?.value!==void 0&&this.attributeOverview.valuePrice?.value!==0?this.translation.translate("configurator.a11y.itemOfAttributeFullWithPriceAndQuantity",{item:this.attributeOverview.value,attribute:this.attributeOverview.attribute,price:this.attributeOverview.valuePriceTotal?.formattedValue,quantity:this.attributeOverview.quantity}).pipe(w(1)).subscribe(t=>e=t):this.translation.translate("configurator.a11y.itemOfAttributeFullWithQuantity",{item:this.attributeOverview.value,attribute:this.attributeOverview.attribute,quantity:this.attributeOverview.quantity}).pipe(w(1)).subscribe(t=>e=t):this.attributeOverview.valuePrice?.value!==void 0&&this.attributeOverview.valuePrice?.value!==0?this.translation.translate("configurator.a11y.itemOfAttributeFullWithPrice",{item:this.attributeOverview.value,attribute:this.attributeOverview.attribute,price:this.attributeOverview.valuePriceTotal?.formattedValue}).pipe(w(1)).subscribe(t=>e=t):this.translation.translate("configurator.a11y.itemOfAttributeFull",{item:this.attributeOverview.value,attribute:this.attributeOverview.attribute}).pipe(w(1)).subscribe(t=>e=t),e}static{this.\u0275fac=function(t){return new(t||i)(_(Xe),_(Te))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-cpq-overview-attribute"]],inputs:{attributeOverview:"attributeOverview"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"cx-value-container"],[1,"cx-thumbnail"],["format","product","aria-hidden","true",3,"container"],[1,"cx-visually-hidden"],["aria-hidden","true",1,"cx-value-info"],["class","cx-code",4,"ngIf"],["class","cx-quantity",4,"ngIf"],["class","cx-price",4,"ngIf"],["aria-hidden","true",1,"cx-attribute-price-container"],[1,"cx-attribute-label"],[3,"formula"],[1,"cx-code"],[1,"cx-quantity"],[1,"cx-identifier"],[1,"cx-item"],[1,"cx-price"]],template:function(t,n){t&1&&(v(0,Lu,16,8,"ng-container",0),g(1,"async")),t&2&&s("ngIf",m(1,1,n.product$))},dependencies:[W,_i,Ue,ee,te,Hi],encapsulation:2,changeDetection:0})}}return i})(),Vd=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({imports:[B,Ci,H,Ve]})}}return i})(),na=(()=>{class i{constructor(e){this.configuratorCommonsService=e,this.iconTypes=pe,this.attributeFilterTypes=d.OverviewFilter}getGroupFilterDescription(e,t){return e.possibleGroups?.find(n=>n.id===t)?.groupDescription??""}onAttrFilterRemove(e,t){let[n,r]=this.getInputFilters(e.overview);n=n.filter(c=>t!==c),this.configuratorCommonsService.updateConfigurationOverview(this.createInputConfig(e,n,r))}onGroupFilterRemove(e,t){let[n,r]=this.getInputFilters(e.overview);r=r.filter(c=>t!==c),this.configuratorCommonsService.updateConfigurationOverview(this.createInputConfig(e,n,r))}isShowRemoveAll(e){return(e.attributeFilters?.length??0)+(e.groupFilters?.length??0)>1}onRemoveAll(e){this.configuratorCommonsService.updateConfigurationOverview(this.createInputConfig(e,[],[]))}getInputFilters(e){return[e.attributeFilters??[],e.groupFilters??[]]}createInputConfig(e,t,n){return F(A({},e),{overview:{configId:e.configId,productCode:e.productCode,attributeFilters:t,groupFilters:n,possibleGroups:e.overview?.possibleGroups}})}static{this.\u0275fac=function(t){return new(t||i)(_(ie))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-overview-filter-bar"]],inputs:{config:"config"},decls:3,vars:3,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"cx-overview-filter-applied",3,"click","title"],["aria-hidden","true"],[3,"type"]],template:function(t,n){t&1&&v(0,ku,7,7,"ng-container",0)(1,$u,6,8,"ng-container",0)(2,qu,7,7,"ng-container",1),t&2&&(s("ngForOf",n.config.overview.attributeFilters),a(),s("ngForOf",n.config.overview.groupFilters),a(),s("ngIf",n.isShowRemoveAll(n.config.overview)))},dependencies:[be,W,Se,te],encapsulation:2})}}return i})(),ra=(()=>{class i{constructor(e){this.configuratorCommonsService=e,this.configuratorStorefrontUtilsService=X(de),this.showFilterBar=!0,this.priceFilter=new Oe(""),this.mySelectionsFilter=new Oe(""),this.groupFilters=new Array}ngOnChanges(){this.extractAttrFilterState(this.config),this.extractGroupFilterState(this.config)}onFilter(e){let t=this.createInputConfig(e,this.collectAttrFilters(),this.collectGroupFilters(e.overview));this.configuratorCommonsService.updateConfigurationOverview(t)}isDisplayOnlyVariant(){return this.configuratorStorefrontUtilsService.isDisplayOnlyVariant()}extractGroupFilterState(e){this.groupFilters=[],e.overview.possibleGroups?.forEach(t=>{let n=!1;e.overview.groupFilters&&(n=e.overview.groupFilters.indexOf(t.id)>=0),this.groupFilters.push(new Oe(n))})}extractAttrFilterState(e){if(e.overview.attributeFilters){let t=e.overview.attributeFilters.indexOf(d.OverviewFilter.PRICE_RELEVANT)>=0;this.priceFilter.setValue(t);let n=e.overview.attributeFilters.indexOf(d.OverviewFilter.USER_INPUT)>=0;this.mySelectionsFilter.setValue(n)}}collectGroupFilters(e){let t=[],n=0;return this.groupFilters.forEach(r=>{r.value&&e?.possibleGroups&&t.push(e.possibleGroups[n].id),n++}),t}collectAttrFilters(){let e=[];return this.priceFilter.value&&e.push(d.OverviewFilter.PRICE_RELEVANT),this.mySelectionsFilter.value&&e.push(d.OverviewFilter.USER_INPUT),e}createInputConfig(e,t,n){return F(A({},e),{overview:{configId:e.configId,productCode:e.productCode,attributeFilters:t,groupFilters:n,possibleGroups:e.overview?.possibleGroups}})}static{this.\u0275fac=function(t){return new(t||i)(_(ie))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-overview-filter"]],inputs:{showFilterBar:"showFilterBar",config:"config"},features:[Ui],decls:6,vars:8,consts:[[4,"ngIf"],["class","cx-no-overview-filters-available",4,"ngIf"],[3,"config"],[1,"cx-overview-filter-header"],[1,"cx-overview-filter-option"],[1,"form-check"],["id","cx-configurator-overview-filter-option-price","type","checkbox","name","config-overview-price-filter",1,"form-check-input",3,"change","formControl"],["for","cx-configurator-overview-filter-option-price",1,"form-check-label"],["id","cx-configurator-overview-filter-option-mySelections","type","checkbox","name","config-overview-my-selection-filter",1,"form-check-input",3,"change","formControl"],["for","cx-configurator-overview-filter-option-mySelections",1,"form-check-label"],[4,"ngFor","ngForOf"],["type","checkbox",1,"form-check-input",3,"change","id","formControl","name"],[1,"form-check-label",3,"for"],[1,"cx-no-overview-filters-available"]],template:function(t,n){t&1&&(v(0,Qu,2,1,"ng-container",0)(1,Ku,18,17,"ng-container",0),g(2,"async"),v(3,Wu,5,4,"ng-container",0)(4,Yu,3,3,"div",1),g(5,"async")),t&2&&(s("ngIf",n.showFilterBar),a(),s("ngIf",!m(2,4,n.isDisplayOnlyVariant())),a(2),s("ngIf",n.config.overview.possibleGroups&&n.config.overview.possibleGroups.length>1),a(),s("ngIf",m(5,6,n.isDisplayOnlyVariant())&&(n.config.overview.possibleGroups==null?null:n.config.overview.possibleGroups.length)===1))},dependencies:[be,W,Yt,$e,qe,na,ee,te],encapsulation:2})}}return i})(),oa=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({imports:[B,H,Ee,ue,le]})}}return i})(),nr=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({imports:[B,H,ue,le,oa]})}}return i})(),Gd=(()=>{class i{constructor(e,t,n){this.launchDialogService=e,this.configuratorCommonsService=t,this.configRouterExtractorService=n,this.configuratorStorefrontUtilsService=X(de),this.ghostStyle=!0,this.configurationWithOv$=this.configRouterExtractorService.extractRouterData().pipe(R(r=>this.configuratorCommonsService.getConfiguration(r.owner)),Y(r=>r.overview!=null),ye(()=>{this.ghostStyle=!1}))}getNumFilters(e){return(e.attributeFilters?.length??0)+(e.groupFilters?.length??0)}openFilterModal(e){this.launchDialogService.openDialogAndSubscribe("CONFIGURATOR_OV_FILTER",this.filterButton,e)}isDisplayOnlyVariant(){return this.configuratorStorefrontUtilsService.isDisplayOnlyVariant()}static{this.\u0275fac=function(t){return new(t||i)(_(mt),_(ie),_(he))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-overview-filter-button"]],viewQuery:function(t,n){if(t&1&&at(zu,5),t&2){let r;ct(r=st())&&(n.filterButton=r.first)}},hostVars:2,hostBindings:function(t,n){t&2&&se("ghost",n.ghostStyle)},decls:4,vars:4,consts:[["ghostFilterButton",""],["filterButton",""],[4,"ngIf","ngIfElse"],[4,"ngIf"],[3,"config"],["tabindex","0",1,"btn","btn-secondary","cx-config-filter-button",3,"click","title"],[1,"cx-ghost-filter-button","ghost"]],template:function(t,n){if(t&1&&(v(0,Zu,4,4,"ng-container",2),g(1,"async"),v(2,Ju,1,0,"ng-template",null,0,ge)),t&2){let r=ce(3);s("ngIf",m(1,2,n.configurationWithOv$))("ngIfElse",r)}},dependencies:[W,na,ee,te],encapsulation:2})}}return i})(),Bd=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({cmsComponents:{ConfiguratorOverviewFilterButton:{component:Gd}}})],imports:[B,H,oa]})}}return i})(),Ld=(()=>{class i{constructor(e){this.launchDialogService=e,this.config$=this.launchDialogService.data$,this.iconTypes=pe,this.focusConfig={trap:!0,block:!0,autofocus:"button",focusOnEscape:!0}}closeFilterModal(){this.launchDialogService.closeDialog("Close Filtering")}static{this.\u0275fac=function(t){return new(t||i)(_(mt))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-overview-filter-dialog"]],decls:11,vars:10,consts:[["role","dialog","aria-labelledby","dialogTitle",1,"cx-configurator-overview-filter-dialog","cx-modal-container",3,"click"],[1,"cx-modal-content",3,"click","esc","cxFocus"],[1,"cx-dialog-header","modal-header"],["id","dialogTitle","class","cx-dialog-title modal-title",4,"cxFeature"],["type","button",1,"close",3,"click","title"],["aria-hidden","true"],[3,"type"],[4,"ngIf"],["id","dialogTitle",1,"cx-dialog-title","modal-title"],[1,"cx-dialog-body","modal-body"],[3,"config","showFilterBar"]],template:function(t,n){t&1&&(l(0,"div",0),U("click",function(){return n.closeFilterModal()}),l(1,"div",1),U("click",function(c){return c.stopPropagation()})("esc",function(){return n.closeFilterModal()}),l(2,"div",2),v(3,el,3,3,"h3",3)(4,tl,3,3,"div",3),l(5,"button",4),g(6,"cxTranslate"),U("click",function(){return n.closeFilterModal()}),l(7,"span",5),x(8,"cx-icon",6),p()()(),v(9,il,3,2,"ng-container",7),g(10,"async"),p()()),t&2&&(a(),s("cxFocus",n.focusConfig),a(2),s("cxFeature","a11yDialogsHeading"),a(),s("cxFeature","!a11yDialogsHeading"),a(),O("title",m(6,6,"configurator.a11y.closeFilterMenu")),a(3),s("type",n.iconTypes.CLOSE),a(),s("ngIf",m(10,8,n.config$)))},dependencies:[W,Se,ra,Ae,gi,ee,te],encapsulation:2})}}return i})(),kd={launch:{CONFIGURATOR_OV_FILTER:{inlineRoot:!0,component:Ld,dialogType:mi.DIALOG}}},$d=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z(kd)],imports:[B,H,Ee,nr,ve,Wt]})}}return i})(),qd=(()=>{class i{constructor(e,t,n){this.configuratorCommonsService=e,this.configRouterExtractorService=t,this.configuratorStorefrontUtilsService=n,this.ghostStyle=!0,this.attributeOverviewType=d.AttributeOverviewType,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe(R(r=>this.configuratorCommonsService.getOrCreateConfiguration(r.owner)),dr("configId"),R(r=>this.configuratorCommonsService.getConfigurationWithOverview(r)),Y(r=>r.overview!=null),ye(()=>{this.ghostStyle=!1}))}hasAttributes(e){return this.hasGroupWithAttributes(e.overview?.groups)}hasGroupWithAttributes(e){if(e){let t=e.find(n=>(n.attributes?n.attributes.length:0)>0)!==void 0;return t||(t=e.find(n=>this.hasGroupWithAttributes(n.subGroups))!==void 0),t}else return!1}isSameAttribute(e,t){return e.length>1?t===0?e[t]?.attribute===e[t+1]?.attribute:e[t]?.attribute===e[t-1]?.attribute:!1}getStyleClasses(e,t){let n="";switch(e[t]?.type){case this.attributeOverviewType.BUNDLE:n+="bundle";break;case this.attributeOverviewType.GENERAL:n+="general";break}return(t===0||!this.isSameAttribute(e,t))&&(n+=" margin"),!this.isSameAttribute(e,t+1)&&!n.includes("bundle")&&(n+=" last-value-pair"),n}getGroupLevelStyleClasses(e,t){let n="cx-group";return e===1?(n+=" topLevel",t&&t.length>0&&(n+=" subgroupTopLevel")):(n+=" subgroup",n+=" subgroupLevel"+e),n}getPrefixId(e,t){return this.configuratorStorefrontUtilsService.getPrefixId(e,t)}getGroupId(e,t){return this.configuratorStorefrontUtilsService.createOvGroupId(e,t)}static{this.\u0275fac=function(t){return new(t||i)(_(ie),_(he),_(de))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-overview-form"]],hostVars:2,hostBindings:function(t,n){t&2&&se("ghost",n.ghostStyle)},decls:8,vars:4,consts:[["noAttributes",""],["groups",""],["ghostForm",""],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cx-no-attribute-value-pairs"],[1,"cx-visually-hidden"],[4,"ngFor","ngForOf"],[3,"id","ngClass"],["aria-hidden","true"],["class","cx-attribute-value-pair",3,"ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"cx-attribute-value-pair",3,"ngClass"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"attributeOverview"],[1,"cx-ghost-group"],[1,"cx-ghost-header","ghost"],[1,"cx-ghost-body"],[1,"cx-ghost-attribute-value"],[1,"cx-ghost-value","ghost"],[1,"cx-ghost-attribute-label"],[1,"cx-ghost-label","ghost"],[1,"cx-ghost-attribute-price","ghost"]],template:function(t,n){if(t&1&&(v(0,al,2,2,"ng-container",3),g(1,"async"),v(2,cl,7,6,"ng-template",null,0,ge)(4,ml,4,4,"ng-template",null,1,ge)(6,Cl,1,2,"ng-template",null,2,ge)),t&2){let r=ce(7);s("ngIf",m(1,2,n.configuration$))("ngIfElse",r)}},dependencies:[Ge,be,W,qi,Sr,Er,Or,Md,Ud,ee,te],encapsulation:2})}}return i})(),jd=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({cmsComponents:{ConfiguratorOverviewForm:{component:qd}}})],imports:[B,ia,Vd,H]})}}return i})(),Qd=(()=>{class i{constructor(e){this.configuratorStorefrontUtilsService=e,this.height=this.getHeight(),this.VARIANT_CONFIG_OVERVIEW_NAVIGATION_SLOT="cx-page-slot.VariantConfigOverviewNavigation",this.CX_CONFIGURATOR_OVERVIEW_MENU="cx-configurator-overview-menu",this.CX_MENU_ITEM_BUTTONS="button.cx-menu-item",this.CX_GROUPS="div.cx-group",this.CX_MENU_GROUP="cx-menu-group",this.OV_MENU_ITEM="-ovMenuItem",this.OV_GROUP="-ovGroup",this.ACTIVE_CLASS="active",this.MENU_ITEM_HEIGHT=39.5,this.iconTypes=pe,this.styles=[["margin-block-end","268px"],["position","-webkit-sticky"],["position","sticky"],["top","0"]]}ngAfterViewInit(){this.amount=this.getAmount(this.config),this.menuItemsHeight=this.getMenuItemsHeight(),this.adjustStyling(),this.onScroll()}onScroll(){this.menuItem=this.getMenuItemToHighlight(),this.highlight(this.menuItem),this.height=this.getHeight(),this.ensureElementVisible(this.menuItem)}onResize(){this.height=this.getHeight(),this.ensureElementVisible(this.menuItem)}getAmount(e){return e.overview?.groups?this.getAmountOfGroups(0,e.overview.groups):0}getAmountOfGroups(e,t){return t&&(e=e+t.length,t.forEach(n=>{n.subGroups&&(e=this.getAmountOfGroups(e,n.subGroups))})),e}getMenuItemsHeight(){return this.amount*this.MENU_ITEM_HEIGHT}adjustStyling(){this.amount>=1?this.changeStyling():this.removeStyling()}getHeight(){let e=this.configuratorStorefrontUtilsService.getSpareViewportHeight();return this.menuItemsHeight>e?e+"px":""}changeStyling(){this.styles.forEach(e=>{this.configuratorStorefrontUtilsService.changeStyling(this.VARIANT_CONFIG_OVERVIEW_NAVIGATION_SLOT,e[0],e[1])})}removeStyling(){this.styles.forEach(e=>{this.configuratorStorefrontUtilsService.removeStyling(this.VARIANT_CONFIG_OVERVIEW_NAVIGATION_SLOT,e[0])})}getMenuItemToHighlight(){let e,t=this.configuratorStorefrontUtilsService.getElements(this.CX_GROUPS),n=this.configuratorStorefrontUtilsService.getVerticallyScrolledPixels();return t?.forEach(r=>{if(n&&n>=r.offsetTop){let c=r.id.replace(this.OV_GROUP,this.OV_MENU_ITEM);if(c){let f="#"+c;e=this.configuratorStorefrontUtilsService.getElement(f)}}}),e}highlight(e){e&&this.configuratorStorefrontUtilsService.getElements(this.CX_MENU_ITEM_BUTTONS)?.forEach(n=>{n.classList.remove(this.ACTIVE_CLASS),n.id===e.id&&e.classList.add(this.ACTIVE_CLASS)})}ensureElementVisible(e){e&&this.configuratorStorefrontUtilsService.hasScrollbar(this.CX_CONFIGURATOR_OVERVIEW_MENU)&&this.configuratorStorefrontUtilsService.ensureElementVisible(this.CX_CONFIGURATOR_OVERVIEW_MENU,e)}getGroupLevelStyleClasses(e){return this.CX_MENU_GROUP+" groupLevel"+e}navigateToGroup(e,t){let n=this.configuratorStorefrontUtilsService.createOvGroupId(e,t);this.configuratorStorefrontUtilsService.scrollToConfigurationElement("#"+n+" h2")}getPrefixId(e,t){return this.configuratorStorefrontUtilsService.getPrefixId(e,t)}getGroupId(e,t){return this.configuratorStorefrontUtilsService.createOvGroupId(e,t)}getMenuItemId(e,t){return this.configuratorStorefrontUtilsService.createOvMenuItemId(e,t)}static{this.\u0275fac=function(t){return new(t||i)(_(de))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-overview-menu"]],hostVars:2,hostBindings:function(t,n){t&1&&U("scroll",function(c){return n.onScroll(c)},!1,Gi)("resize",function(c){return n.onResize(c)},!1,Gi),t&2&&ui("height",n.height)},inputs:{config:"config"},decls:3,vars:1,consts:[["groups",""],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"cx-menu-item",3,"click","id"],["aria-hidden","true"],["aria-hidden","true",3,"type"]],template:function(t,n){t&1&&v(0,yl,2,4,"ng-container",1)(1,Tl,2,1,"ng-template",null,0,ge),t&2&&s("ngIf",n.config)},dependencies:[Ge,be,W,qi,Se,te],encapsulation:2,changeDetection:0})}}return i})(),aa=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({imports:[B,H,Ee]})}}return i})(),Kd=(()=>{class i{constructor(e,t,n){this.configuratorCommonsService=e,this.configRouterExtractorService=t,this.commonConfigUtilsService=n,this.routerData$=this.configRouterExtractorService.extractRouterData(),this.configuration$=this.routerData$.pipe(Y(r=>r.owner.type===oe.OwnerType.PRODUCT||r.owner.type===oe.OwnerType.CART_ENTRY),R(r=>this.configuratorCommonsService.getConfiguration(r.owner))),this.configurationOverview$=this.configuration$.pipe(E(r=>r.overview)),this.numberOfIssues$=this.configuration$.pipe(E(r=>{let c=r.overview;return c?.totalNumberOfIssues?c.numberOfIncompleteCharacteristics!==void 0?c.numberOfIncompleteCharacteristics:c.totalNumberOfIssues:r.totalNumberOfIssues?r.totalNumberOfIssues:0})),this.numberOfConflicts$=this.configuration$.pipe(E(r=>r.overview?.numberOfConflicts??0)),this.skipConflictsOnIssueNavigation$=this.configuration$.pipe(E(r=>(r.overview?.numberOfConflicts??0)>0)),this.iconTypes=pe}static{this.\u0275fac=function(t){return new(t||i)(_(ie),_(he),_(rt))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-overview-notification-banner"]],decls:2,vars:3,consts:[[4,"ngIf"],["class","cx-error-notification-banner",4,"ngIf"],["class","cx-conflict-notification-banner",4,"ngIf"],[1,"cx-error-notification-banner"],[3,"type"],["id","cx-configurator-overview-error-msg",1,"cx-error-msg"],["aria-describedby","cx-configurator-overview-error-msg","cxAutoFocus","",1,"link","cx-action-link",3,"routerLink","queryParams"],[1,"cx-conflict-notification-banner"],["id","cx-configurator-overview-conflict-msg",1,"cx-conflict-msg"],["aria-describedby","cx-configurator-overview-conflict-msg","cxAutoFocus","",1,"link","cx-action-link",3,"routerLink","queryParams"]],template:function(t,n){t&1&&(v(0,Dl,3,3,"ng-container",0),g(1,"async")),t&2&&s("ngIf",m(1,1,n.routerData$))},dependencies:[W,Se,Nr,ee,te,qr],encapsulation:2,changeDetection:0})}}return i})(),Hd=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({cmsComponents:{ConfiguratorOverviewBanner:{component:Kd}}})],imports:[B,H,gt,Ee,lt]})}}return i})(),Wd=(()=>{class i{constructor(e,t,n){this.configuratorCommonsService=e,this.configRouterExtractorService=t,this.configuratorStorefrontUtilsService=n,this.ghostStyle=!0,this.showFilter=!1,this.configurationWithOv$=this.configRouterExtractorService.extractRouterData().pipe(R(r=>this.configuratorCommonsService.getConfiguration(r.owner)),Y(r=>r.overview!=null),ye(r=>{r&&(this.ghostStyle=!1)}))}onFilter(){this.showFilter=!0}onMenu(){this.showFilter=!1}getTabIndexForMenuTab(){return this.showFilter?-1:0}getTabIndexForFilterTab(){return this.showFilter?0:-1}switchTabOnArrowPress(e,t){(e.code==="ArrowLeft"||e.code==="ArrowRight")&&(e.preventDefault(),t==="#menuTab"?this.filterTab.nativeElement?.focus():this.menuTab.nativeElement?.focus())}static{this.\u0275fac=function(t){return new(t||i)(_(ie),_(he),_(de))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-overview-sidebar"]],viewQuery:function(t,n){if(t&1&&(at(Fl,5),at(Rl,5)),t&2){let r;ct(r=st())&&(n.menuTab=r.first),ct(r=st())&&(n.filterTab=r.first)}},hostVars:2,hostBindings:function(t,n){t&2&&se("ghost",n.ghostStyle)},decls:4,vars:4,consts:[["ghostSidebar",""],["menuTab",""],["filterTab",""],[4,"ngIf","ngIfElse"],["role","tablist",1,"cx-menu-bar"],["role","tab",3,"keydown","keydown.enter","keydown.space","click","tabindex"],[3,"config",4,"ngIf"],[3,"config"],[1,"cx-ghost-menu"],[1,"cx-ghost-menu-bar","ghost"],[4,"ngFor","ngForOf"],[1,"cx-ghost-menu-level1"],[1,"cx-ghost-menu-item"],[1,"cx-ghost-menu-item-title","ghost"],[4,"ngIf"],[1,"cx-ghost-menu-level2"],["class","cx-ghost-menu-item",4,"ngFor","ngForOf"],[1,"cx-ghost-menu-level3"]],template:function(t,n){if(t&1&&(v(0,Ul,12,16,"ng-container",3),g(1,"async"),v(2,Kl,3,2,"ng-template",null,0,ge)),t&2){let r=ce(3);s("ngIf",m(1,2,n.configurationWithOv$))("ngIfElse",r)}},dependencies:[be,W,ra,Qd,ee,te],encapsulation:2})}}return i})(),Yd=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({cmsComponents:{ConfiguratorOverviewSidebar:{component:Wd}}})],imports:[B,H,nr,aa]})}}return i})(),zd=(()=>{class i{constructor(e,t,n,r){this.configuratorGroupsService=e,this.configuratorCommonsService=t,this.configRouterExtractorService=n,this.configUtils=r,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe(R(c=>this.configuratorCommonsService.getConfiguration(c.owner)))}onPrevious(e){this.configuratorGroupsService.getPreviousGroupId(e.owner).pipe(w(1)).subscribe(t=>{t&&(this.configuratorGroupsService.navigateToGroup(e,t),this.focusFirstAttribute())}),this.configUtils.scrollToConfigurationElement(".VariantConfigurationTemplate, .CpqConfigurationTemplate")}onNext(e){this.configuratorGroupsService.getNextGroupId(e.owner).pipe(w(1)).subscribe(t=>{t&&(this.configuratorGroupsService.navigateToGroup(e,t),this.focusFirstAttribute())}),this.configUtils.scrollToConfigurationElement(".VariantConfigurationTemplate, .CpqConfigurationTemplate")}isFirstGroup(e){return this.configuratorGroupsService.getPreviousGroupId(e).pipe(E(t=>!t))}isLastGroup(e){return this.configuratorGroupsService.getNextGroupId(e).pipe(E(t=>!t))}focusFirstAttribute(){this.configRouterExtractorService.extractRouterData().pipe(R(e=>this.configuratorCommonsService.isConfigurationLoading(e.owner).pipe(Y(t=>t),w(1),R(()=>this.configuratorCommonsService.isConfigurationLoading(e.owner).pipe(Y(t=>!t),w(1),Be(0)))))).subscribe(()=>this.configUtils.focusFirstAttribute())}static{this.\u0275fac=function(t){return new(t||i)(_(Ze),_(ie),_(he),_(de))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-previous-next-buttons"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"btn","btn-block","btn-secondary","cx-previous",3,"click","disabled"],[1,"btn","btn-block","btn-secondary","cx-next",3,"click","disabled"]],template:function(t,n){t&1&&(v(0,Wl,2,1,"ng-container",0),g(1,"async")),t&2&&s("ngIf",m(1,1,n.configuration$))},dependencies:[W,ee,te],encapsulation:2,changeDetection:0})}}return i})(),Xd=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({cmsComponents:{ConfiguratorPrevNext:{component:zd}}})],imports:[B,H,ve]})}}return i})(),Zd=(()=>{class i{constructor(e,t){this.configuratorCommonsService=e,this.configRouterExtractorService=t,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe(R(n=>this.configuratorCommonsService.getConfiguration(n.owner)))}static{this.\u0275fac=function(t){return new(t||i)(_(ie),_(he))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-price-summary"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"cx-price-summary-container"],[1,"cx-total-summary"],[1,"cx-summary-row","cx-total-price"],[1,"cx-label"],[1,"cx-amount"],[1,"cx-summary-row","cx-base-price"],[1,"cx-summary-row","cx-selected-options"]],template:function(t,n){t&1&&(v(0,Xl,2,1,"ng-container",0),g(1,"async")),t&2&&s("ngIf",m(1,1,n.configuration$))},dependencies:[W,ee,te],encapsulation:2,changeDetection:0})}}return i})(),Jd=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({cmsComponents:{ConfiguratorPriceSummary:{component:Zd}}})],imports:[ue,le,B,H]})}}return i})(),eg=(()=>{class i{getProductCode(e){return e.routerData.productCode?e.routerData.productCode:e.configuration.productCode?e.configuration.productCode:e.configuration.overview?.productCode}constructor(e,t,n,r){this.configuratorCommonsService=e,this.configRouterExtractorService=t,this.productService=n,this.configExpertModeService=r,this.ghostStyle=!0,this.routerData$=this.configRouterExtractorService.extractRouterData(),this.configuration$=this.routerData$.pipe(R(c=>this.configuratorCommonsService.getConfiguration(c.owner))),this.product$=this.routerData$.pipe(R(c=>this.configuration$.pipe(E(f=>({routerData:c,configuration:f}))).pipe(E(f=>this.getProductCode(f)),R(f=>f?this.productService.get(f,"list"):Pi)).pipe(ye(()=>{this.ghostStyle=!1})))),this.showMore=!1,this.iconTypes=pe}triggerDetails(){this.showMore=!this.showMore}get expMode(){return this.configExpertModeService.getExpModeActive()}static{this.\u0275fac=function(t){return new(t||i)(_(ie),_(he),_(Xe),_(It))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-product-title"]],hostVars:2,hostBindings:function(t,n){t&2&&se("ghost",n.ghostStyle)},decls:4,vars:4,consts:[["ghostProductTitle",""],[4,"ngIf","ngIfElse"],[1,"cx-general-product-info"],[1,"cx-title"],[3,"click"],[4,"ngIf"],[1,"cx-details"],["aria-hidden","true",1,"cx-details-image"],["format","product",3,"container"],[1,"cx-details-content"],[1,"cx-detail-title"],[1,"cx-code"],[1,"cx-description"],[1,"cx-toggle-details-link-text"],["aria-hidden","true"],[3,"type"],["aria-hidden","true",1,"cx-toggle-details-link-text"],[1,"cx-kb-key-details"],[1,"cx-kb-pair"],[1,"cx-label"],[1,"cx-value"],[1,"cx-ghost-general-product-info"]],template:function(t,n){if(t&1&&(v(0,gp,20,14,"ng-container",1),g(1,"async"),v(2,fp,1,0,"ng-template",null,0,ge)),t&2){let r=ce(3);s("ngIf",m(1,2,n.product$))("ngIfElse",r)}},dependencies:[W,Se,_i,ee,te],encapsulation:2,changeDetection:0})}}return i})(),tg=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({cmsComponents:{ConfiguratorProductTitle:{component:eg}}})],imports:[ue,le,nt,B,H,Ee,Ci]})}}return i})(),ig=(()=>{class i{constructor(e,t,n,r){this.launchDialogService=e,this.configuratorCommonsService=t,this.routingService=n,this.productService=r,this.dialogData$=this.launchDialogService.data$.pipe(Y(c=>c&&c.owner)),this.product$=this.dialogData$.pipe(R(c=>this.productService.get(c.owner.id))),this.iconTypes=pe,this.focusConfig={trap:!0,block:!0,autofocus:".btn-primary",focusOnEscape:!0}}close(){this.launchDialogService.closeDialog("Close restart configuration dialog")}resume(e){this.close(),this.routingService.go({cxRoute:"configure"+e.configuratorType,params:{ownerType:oe.OwnerType.PRODUCT,entityKey:e.code}},{queryParams:{productCode:e.code}})}restart(e){this.configuratorCommonsService.forceNewConfiguration(e),this.close()}backToPDP(e){this.close(),this.routingService.go({cxRoute:"product",params:e})}static{this.\u0275fac=function(t){return new(t||i)(_(mt),_(ie),_(tt),_(Xe))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-restart-dialog"]],decls:3,vars:3,consts:[["role","dialog","aria-modal","true","aria-labelledby","dialogTitle",1,"cx-modal-container"],[4,"ngIf"],[1,"cx-modal-content",3,"esc","cxFocus"],[1,"cx-dialog-header","modal-header"],["id","dialogTitle","class","cx-dialog-title modal-title",4,"cxFeature"],["type","button",1,"close",3,"click","title"],["aria-hidden","true"],[3,"type"],[1,"cx-dialog-body","modal-body"],["id","cx-configurator-restart-dialog-description"],["aria-describedby","cx-configurator-restart-dialog-description",1,"btn","btn-primary","btn-block",3,"click"],["type","button","aria-describedby","cx-configurator-restart-dialog-description",1,"btn","btn-secondary","btn-block",3,"click"],["id","dialogTitle",1,"cx-dialog-title","modal-title"]],template:function(t,n){t&1&&(l(0,"div",0),v(1,Cp,3,3,"ng-container",1),g(2,"async"),p()),t&2&&(a(),s("ngIf",m(2,1,n.dialogData$)))},dependencies:[W,Se,Ae,gi,ee,te],encapsulation:2})}}return i})(),ng={launch:{CONFIGURATOR_RESTART_DIALOG:{inlineRoot:!0,component:ig,dialogType:mi.DIALOG}}},rg=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z(ng)],imports:[B,H,Ee,ve,Wt]})}}return i})(),og=(()=>{class i{static{this.TAB_BAR_QUERY_SELECTOR="cx-configurator-tab-bar"}determinePageFromRouterData(e){return e.pageType??vt.PageType.CONFIGURATION}isOverviewPage(e){return e===vt.PageType.OVERVIEW}navigateToOverview(e){this.routingService.go({cxRoute:"configureOverview"+e.owner.configuratorType,params:{entityKey:e.owner.id,ownerType:e.owner.type}},{queryParams:{productCode:e.productCode}}).then(()=>{this.focusOverviewInTabBar()})}navigateToConfiguration(e){this.routingService.go({cxRoute:"configure"+e.owner.configuratorType,params:{entityKey:e.owner.id,ownerType:e.owner.type}},{queryParams:{productCode:e.productCode}}).then(()=>{this.focusConfigurationInTabBar()})}focusOverviewInTabBar(){this.configRouterExtractorService.extractRouterData().pipe(R(e=>this.configuratorCommonsService.getConfiguration(e.owner)),Y(e=>e.overview!=null),w(1),Be(0)).subscribe(()=>{this.focusService.clear(),this.configUtils.focusFirstActiveElement(i.TAB_BAR_QUERY_SELECTOR)})}focusConfigurationInTabBar(){this.configRouterExtractorService.extractRouterData().pipe(Y(e=>e.pageType===vt.PageType.CONFIGURATION),R(e=>this.configuratorCommonsService.getConfiguration(e.owner)),w(1),Be(0)).subscribe(()=>{this.focusService.clear(),this.configUtils.focusFirstActiveElement(i.TAB_BAR_QUERY_SELECTOR)})}getTabIndexConfigTab(){let e=0;return this.isOverviewPage$.pipe(w(1)).subscribe(t=>{t&&(e=-1)}),e}getTabIndexForConfigTab(e){return this.isOverviewPage(e)?-1:0}getTabIndexOverviewTab(){let e=0;return this.isOverviewPage$.pipe(w(1)).subscribe(t=>{t||(e=-1)}),e}getTabIndexForOverviewTab(e){return this.isOverviewPage(e)?0:-1}switchTabOnArrowPress(e,t){(e.code==="ArrowLeft"||e.code==="ArrowRight")&&(e.preventDefault(),t==="#configTab"?this.overviewTab.nativeElement?.focus():this.configTab.nativeElement?.focus())}constructor(e,t){this.configRouterExtractorService=e,this.configuratorCommonsService=t,this.ghostStyle=!0,this.routingService=X(tt),this.configUtils=X(de),this.focusService=X(ft),this.routerData$=this.configRouterExtractorService.extractRouterData(),this.configuration$=this.routerData$.pipe(R(n=>this.configuratorCommonsService.getConfiguration(n.owner).pipe(ye(()=>{this.ghostStyle=!1})))),this.isOverviewPage$=this.routerData$.pipe(E(n=>n.pageType===vt.PageType.OVERVIEW)),this.pageType$=this.routerData$.pipe(E(n=>this.determinePageFromRouterData(n))),it("a11yMobileVisibleFocus")}static{this.\u0275fac=function(t){return new(t||i)(_(he),_(ie))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-tab-bar"]],viewQuery:function(t,n){if(t&1&&(at(hp,5),at(yp,5)),t&2){let r;ct(r=st())&&(n.configTab=r.first),ct(r=st())&&(n.overviewTab=r.first)}},hostVars:2,hostBindings:function(t,n){t&2&&se("ghost",n.ghostStyle)},decls:2,vars:3,consts:[["ghostTabBar",""],["configTab",""],["overviewTab",""],[4,"ngIf"],[4,"ngIf","ngIfElse"],["class","cx-tab-bar","role","tablist",4,"ngIf"],["role","tablist",1,"cx-tab-bar"],["role","tab",3,"keydown","keydown.enter","keydown.space","click","tabindex"],[1,"cx-ghost-tab-bar"]],template:function(t,n){t&1&&(v(0,Sp,5,4,"ng-container",3),g(1,"async")),t&2&&s("ngIf",m(1,1,n.routerData$))},dependencies:[W,ee,te],encapsulation:2})}}return i})(),ag=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({cmsComponents:{ConfiguratorTabBar:{component:og}}})],imports:[ue,le,ve,nt,B,H,gt,lt]})}}return i})(),cg={productConfigurator:{updateConfigurationMessage:{waitingTime:1e3}}},sg=(()=>{class i{constructor(e,t,n){this.configuratorCommonsService=e,this.configRouterExtractorService=t,this.config=n,this.hasPendingChanges$=this.configRouterExtractorService.extractRouterData().pipe(R(r=>this.configuratorCommonsService.hasPendingChanges(r.owner)),kt(),R(r=>r?me(r).pipe(Be(this.config.productConfigurator?.updateConfigurationMessage?.waitingTime||1e3)):me(r)))}static{this.\u0275fac=function(t){return new(t||i)(_(ie),_(he),_(wi))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-update-message"]],decls:7,vars:7,consts:[["aria-live","polite","aria-atomic","false"],[1,"cx-update-msg"]],template:function(t,n){t&1&&(l(0,"div",0)(1,"div",1),g(2,"async"),x(3,"cx-spinner"),l(4,"strong"),y(5),g(6,"cxTranslate"),p()()()),t&2&&(a(),se("visible",m(2,3,n.hasPendingChanges$)),a(4),ne(m(6,5,"configurator.header.updateMessage")))},dependencies:[Qr,ee,te],encapsulation:2,changeDetection:0})}}return i})(),ug=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({cmsComponents:{ConfiguratorUpdateMessage:{component:sg}}}),z(cg),{provide:wi,useExisting:ke}],imports:[B,Hr,H]})}}return i})(),lg=(()=>{class i{constructor(e,t,n,r){this.productService=e,this.translationService=t,this.configuratorRouterExtractorService=n,this.configuratorCommonsService=r,this.configuration$=this.configuratorRouterExtractorService.extractRouterData().pipe(R(c=>this.configuratorCommonsService.getConfiguration(c.owner))),this.title$=this.translationService.translate("configurator.variantCarousel.title"),this.items$=this.configuration$.pipe(E(c=>c.variants?c.variants:[]),E(c=>c.map(f=>this.productService.get(f.productCode))))}static{this.\u0275fac=function(t){return new(t||i)(_(Xe),_(Te),_(he),_(ie))}}static{this.\u0275cmp=j({type:i,selectors:[["cx-configurator-variant-carousel"]],decls:3,vars:5,consts:[["carouselItem",""],[4,"ngIf"],[1,"cx-variant-carousel-container"],["role","region","itemWidth","285px",3,"items","title","template"],[3,"item"]],template:function(t,n){if(t&1&&(v(0,wp,8,13,"ng-container",1),g(1,"async"),g(2,"async")),t&2){let r;s("ngIf",((r=(r=m(1,1,n.items$))==null?null:r.length)!==null&&r!==void 0?r:0)>0&&m(2,3,n.items$))}},dependencies:[W,Kr,Xr,ee,te],encapsulation:2,changeDetection:0})}}return i})(),pg=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[z({cmsComponents:{ConfiguratorVariantCarousel:{component:lg}}})],imports:[ue,le,B,H,Wr,Zr]})}}return i})(),dg=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({imports:[Jd,qp,Rd,tg,ag,ir,Ad,Pd,ug,Xd,ia,jd,aa,Hd,_d,xd,ea,pg,nr,Bd,$d,Yd,Od,rg]})}}return i})(),ca=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=$({token:i,factory:function(t){let n=null;return t?n=new(t||i):n=D(ke),n},providedIn:"root"})}}return i})();var We=class i{static{this.CONFIGURATOR_ADAPTER_LIST=new Ie("ConfiguratorAdapterList")}constructor(o,e,t){this.adapters=o,this.configUtilsService=e,this.config=t}createConfiguration(o,e,t=!1){return this.getAdapter(o.configuratorType).createConfiguration(o,e,t)}readConfiguration(o,e,t){return this.getAdapter(t.configuratorType).readConfiguration(o,e,t)}updateConfiguration(o){return this.getAdapter(o.owner.configuratorType).updateConfiguration(o)}addToCart(o){return this.getAdapter(o.owner.configuratorType).addToCart(o)}readConfigurationForCartEntry(o){return this.getAdapter(o.owner.configuratorType).readConfigurationForCartEntry(o)}updateConfigurationForCartEntry(o){return this.getAdapter(o.configuration.owner.configuratorType).updateConfigurationForCartEntry(o)}readConfigurationForOrderEntry(o){return this.getAdapter(o.owner.configuratorType).readConfigurationForOrderEntry(o)}readPriceSummary(o){return this.getAdapter(o.owner.configuratorType).readPriceSummary(o)}getConfigurationOverview(o){return this.getAdapter(o.owner.configuratorType).getConfigurationOverview(o.configId)}updateConfigurationOverview(o){let e=o.overview;return e?this.getAdapter(o.owner.configuratorType).updateConfigurationOverview(e):this.getAdapter(o.owner.configuratorType).getConfigurationOverview(o.configId)}searchVariants(o){return this.getAdapter(o.owner.configuratorType).searchVariants(o.configId)}getAdapter(o){let e=this.adapters.find(t=>this.isAdapterMatching(t,o));if(e)return e;throw new Error("No adapter found for configurator type: "+o)}isAdapterMatching(o,e){let t=o.getConfiguratorType()===e;if(t&&e==="CLOUDCPQCONFIGURATOR"){let n=this.config.productConfigurator?.cpqOverOcc??!1,r=!!o.supportsCpqOverOcc&&o.supportsCpqOverOcc();t=n===r}return t}static{this.\u0275fac=function(e){return new(e||i)(D(i.CONFIGURATOR_ADAPTER_LIST),D(rt),D(ca))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac})}},gg=(()=>{class i{constructor(e,t,n){this.configuratorCartService=e,this.routingService=t,this.configuratorQuantityService=n,this.subscription=new Qe,this.observeRouterChanges()}observeRouterChanges(){this.subscription.add(this.routingService.getRouterState().subscribe(e=>{this.isConfiguratorRelatedRoute(e.state.semanticRoute)||(this.configuratorCartService.removeCartBoundConfigurations(),this.configuratorQuantityService.setQuantity(1))}))}isConfiguratorRelatedRoute(e){return e?e.includes("configure"):!1}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(t){return new(t||i)(D(Yn),D(tt),D(Jo))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),fg=(()=>{class i{constructor(e){}static{this.\u0275fac=function(t){return new(t||i)(D(gg))}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({})}}return i})(),mg={productConfigurator:{enableVariantSearch:!1,cpqOverOcc:!0}},sa=(()=>{class i{getFirstGroupWithAttributes(e,t=!1){let n=this.getFirstGroupWithAttributesForList(e.groups,t);if(n)return n;throw new Error("Configuration does not have any attributes")}getFirstGroupWithAttributesForList(e,t){let n;t&&e.length>0&&e[0].groupType===d.GroupType.CONFLICT_HEADER_GROUP&&(n=e[0].subGroups.filter(c=>c.attributes&&c.attributes.length>0).shift()),n===void 0&&(n=e.filter(c=>c.attributes&&c.attributes.length>0&&c.groupType!==d.GroupType.CONFLICT_GROUP).shift());let r;return n?r=n.id:r=e.filter(c=>c.subGroups&&c.subGroups.length>0).flatMap(c=>this.getFirstGroupWithAttributesForList(c.subGroups,t)).filter(c=>c).shift(),r}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),vg=(()=>{class i{constructor(e,t,n,r,c,f,T){this.actions$=e,this.configuratorCommonsConnector=t,this.commonConfigUtilsService=n,this.configuratorGroupUtilsService=r,this.configuratorGroupStatusService=c,this.store=f,this.configuratorBasicEffectService=T,this.logger=X(Ne),this.featureConfigService=X(pt),this.createConfiguration$=_e(()=>this.actions$.pipe(Ce(Do),ze(h=>this.configuratorCommonsConnector.createConfiguration(h.payload.owner,h.payload.configIdTemplate,h.payload.forceReset).pipe(R(C=>{let Q=this.configuratorBasicEffectService.getFirstGroupWithAttributes(C);return this.store.dispatch(new Ft(F(A({},C),{interactionState:{currentGroup:Q}}))),[new In(C),new ti(C)]}),Re(C=>[new bn({ownerKey:h.payload.owner.key,error:Pe(C,this.logger)})]))))),this.readConfiguration$=_e(()=>this.actions$.pipe(Ce(Ro),ze(h=>this.configuratorCommonsConnector.readConfiguration(h.payload.configuration.configId,h.payload.groupId,h.payload.configuration.owner).pipe(R(C=>[new Si(C)]),Re(C=>[new Ti({ownerKey:h.payload.configuration.owner.key,error:Pe(C,this.logger)})]))))),this.updateConfiguration$=_e(()=>this.actions$.pipe(Ce(Po),E(h=>h.payload),ze(h=>this.configuratorCommonsConnector.updateConfiguration(h).pipe(E(C=>new En(F(A({},C),{interactionState:{isConflictResolutionMode:h.interactionState.isConflictResolutionMode}}))),Re(C=>{let Q=Pe(C,this.logger);return[new Sn({configuration:h,error:Q})]}))))),this.updatePriceSummary$=_e(()=>this.actions$.pipe(Ce(Bo),E(h=>h.payload),Y(h=>h.pricingEnabled===!0),ze(h=>this.configuratorCommonsConnector.readPriceSummary(h).pipe(E(C=>new Dn(C,{isDeltaRendering:this.featureConfigService.isEnabled("productConfiguratorDeltaRendering")})),Re(C=>{let Q=Pe(C,this.logger);return[new An({ownerKey:h.owner.key,error:Q})]}))))),this.getOverview$=_e(()=>this.actions$.pipe(Ce(ko),E(h=>h.payload),ze(h=>this.configuratorCommonsConnector.getConfigurationOverview(h).pipe(E(C=>new Nn({ownerKey:h.owner.key,overview:C})),Re(C=>{let Q=Pe(C,this.logger);return[new Rn({ownerKey:h.owner.key,error:Q})]}))))),this.updateOverview$=_e(()=>this.actions$.pipe(Ce(qo),E(h=>h.payload),ze(h=>this.configuratorCommonsConnector.updateConfigurationOverview(h).pipe(E(C=>new Un({ownerKey:h.owner.key,overview:C})),Re(C=>{let Q=Pe(C,this.logger);return[new Mn({ownerKey:h.owner.key,error:Q})]}))))),this.updateConfigurationSuccess$=_e(()=>this.actions$.pipe(Ce(Uo),E(h=>h.payload),ze(h=>this.store.pipe(we(yi(h.owner.key)),w(1),Y(C=>C===!1),R(()=>this.store.pipe(we(Bp(h.owner.key)),w(1),E(C=>{let Q=this.configuratorBasicEffectService.getFirstGroupWithAttributes(h,h.interactionState.isConflictResolutionMode),re=this.configuratorGroupUtilsService.getParentGroup(h.groups,this.configuratorGroupUtilsService.getGroupById(h.groups,Q),void 0);return{currentGroupId:C,groupIdFromPayload:Q,parentGroupFromPayload:re}}),R(C=>{let Q=new On(h),re=new Ft(F(A({},h),{interactionState:{currentGroup:C.groupIdFromPayload}})),Tt=new ti(h);return C.currentGroupId===C.groupIdFromPayload?[Q,re,Tt]:[Q,re,Tt,new Ei({configuration:h,groupId:C.groupIdFromPayload,parentGroupId:C.parentGroupFromPayload?.id})]}))))))),this.updateConfigurationFail$=_e(()=>this.actions$.pipe(Ce(Mo),E(h=>h.payload),ze(h=>this.store.pipe(we(yi(h.configuration.owner.key)),w(1),Y(C=>C===!1),E(()=>new wn(h.configuration)))))),this.handleErrorOnUpdate$=_e(()=>this.actions$.pipe(Ce(Go),E(h=>h.payload),E(h=>new xn({configuration:h,groupId:this.configuratorBasicEffectService.getFirstGroupWithAttributes(h)})))),this.groupChange$=_e(()=>this.actions$.pipe(Ce(Kn),R(h=>this.store.pipe(we(yi(h.payload.configuration.owner.key)),w(1),Y(C=>C===!1),R(()=>this.configuratorCommonsConnector.readConfiguration(h.payload.configuration.configId,h.payload.groupId,h.payload.configuration.owner).pipe(R(C=>[new Gn({entityKey:h.payload.configuration.owner.key,currentGroup:h.payload.groupId}),new Oi({entityKey:h.payload.configuration.owner.key,menuParentGroup:h.payload.parentGroupId}),new Si(C),new Ft(F(A({},C),{interactionState:{currentGroup:h.payload.groupId}}))]),Re(C=>[new Ti({ownerKey:h.payload.configuration.owner.key,error:Pe(C,this.logger)})]))))))),this.removeProductBoundConfigurations$=_e(()=>this.actions$.pipe(Ce(Yo),R(()=>this.store.pipe(we(Wn),w(1),E(h=>{let C=h.configurations.entities,Q=[];for(let re in C)re.includes(oe.OwnerType.PRODUCT)&&Q.push(re);return new Pt({ownerKey:Q})})))))}static{this.\u0275fac=function(t){return new(t||i)(D(pi),D(We),D(rt),D(Ut),D(Zo),D(ut),D(sa))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac})}}return i})(),_g="Entry number is required in addToCart response",Cg=(()=>{class i{constructor(e,t,n,r,c,f){this.actions$=e,this.configuratorCommonsConnector=t,this.commonConfigUtilsService=n,this.configuratorGroupUtilsService=r,this.store=c,this.configuratorBasicEffectService=f,this.logger=X(Ne),this.addToCart$=_e(()=>this.actions$.pipe(Ce(So),E(T=>T.payload),R(T=>this.configuratorCommonsConnector.addToCart(T).pipe(R(h=>{let C=h.entry?.entryNumber;if(C===void 0)throw Error(_g);return[new vn({ownerKey:T.owner.key,cartEntryNo:C.toString()}),new Zt.CartAddEntrySuccess(F(A({},h),{userId:T.userId,cartId:T.cartId,productCode:T.productCode,quantity:T.quantity,deliveryModeChanged:h.deliveryModeChanged,entry:h.entry,quantityAdded:h.quantityAdded,statusCode:h.statusCode,statusMessage:h.statusMessage}))]}),Re(h=>me(new Zt.CartAddEntryFail({userId:T.userId,cartId:T.cartId,productCode:T.productCode,quantity:T.quantity,error:h instanceof Ar?Pe(h,this.logger):h}))))))),this.updateCartEntry$=_e(()=>this.actions$.pipe(Ce(Qn),E(T=>T.payload),R(T=>this.configuratorCommonsConnector.updateConfigurationForCartEntry(T).pipe(R(h=>[new Zt.CartUpdateEntrySuccess({userId:T.userId,cartId:T.cartId,entryNumber:T.cartEntryNumber,quantity:h.quantity})]),Re(h=>me(new Zt.CartUpdateEntryFail({userId:T.userId,cartId:T.cartId,entryNumber:T.cartEntryNumber,error:Pe(h,this.logger)}))))))),this.readConfigurationForCartEntry$=_e(()=>this.actions$.pipe(Ce(bo),R(T=>{let h=T.payload;return this.configuratorCommonsConnector.readConfigurationForCartEntry(h).pipe(R(C=>{let Q=new Ft(F(A({},C),{interactionState:{currentGroup:this.configuratorBasicEffectService.getFirstGroupWithAttributes(C,!C.immediateConflictResolution)}}));return[new un(C),Q,new ti(C)]}),Re(C=>[new ln({ownerKey:T.payload.owner.key,error:Pe(C,this.logger)})]))}))),this.readConfigurationForOrderEntry$=_e(()=>this.actions$.pipe(Ce(xo),R(T=>{let h=T.payload;return this.configuratorCommonsConnector.readConfigurationForOrderEntry(h).pipe(R(C=>[new dn(C)]),Re(C=>[new gn({ownerKey:T.payload.owner.key,error:Pe(C,this.logger)})]))}))),this.removeCartBoundConfigurations$=_e(()=>this.actions$.pipe(Ce(wo),R(()=>this.store.pipe(we(Wn),w(1),E(T=>{let h=T.configurations.entities,C=[],Q=[];for(let re in h)re.includes(oe.OwnerType.CART_ENTRY)?C.push(re):re.includes(oe.OwnerType.PRODUCT)&&Q.push(re);return Q.forEach(re=>{h[re].value?.nextOwner!==void 0&&C.push(re)}),new Pt({ownerKey:C})}))))),this.addOwner$=_e(()=>this.actions$.pipe(Ce(Eo),R(T=>this.store.pipe(we(Mt(T.payload.ownerKey)),w(1),R(h=>{let C=He.createOwner(oe.OwnerType.CART_ENTRY,T.payload.cartEntryNo);return this.commonConfigUtilsService.setOwnerKey(C),[new Cn({configuration:h,cartEntryNo:T.payload.cartEntryNo}),new Vn({entityKey:C.key,interactionState:h.interactionState})]})))))}static{this.\u0275fac=function(t){return new(t||i)(D(pi),D(We),D(rt),D(Ut),D(ut),D(sa))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac})}}return i})(),hg=(()=>{class i{constructor(e,t,n){this.actions$=e,this.configuratorCommonsConnector=t,this.configuratorCoreConfig=n,this.logger=X(Ne),this.searchVariants$=_e(()=>this.actions$.pipe(Ce(hn),Y(()=>this.configuratorCoreConfig.productConfigurator?.enableVariantSearch===!0),Y(r=>r.payload.owner.configuratorType==="CPQCONFIGURATOR"),R(r=>this.configuratorCommonsConnector.searchVariants(r.payload).pipe(R(c=>[new Ii({ownerKey:r.payload.owner.key,variants:c})]),Re(c=>[new yn({ownerKey:r.payload.owner.key,error:Pe(c,this.logger)})]))))),this.searchVariantsInCaseNotActive$=_e(()=>this.actions$.pipe(Ce(hn),Y(r=>this.configuratorCoreConfig.productConfigurator?.enableVariantSearch===!1||r.payload.owner.configuratorType!=="CPQCONFIGURATOR"),E(r=>new Ii({ownerKey:r.payload.owner.key,variants:[]}))))}static{this.\u0275fac=function(t){return new(t||i)(D(pi),D(We),D(ca))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac})}}return i})(),yg=[vg,Cg,hg],qn=class i{static mergeGroupsWithSupplements(o,e){let t=[];return o.forEach(n=>t.push(this.mergeGroupWithSupplements(n,e))),t}static mergeGroupWithSupplements(o,e){return this.isTargetGroup(o,e)?this.mergeTargetGroupWithSupplements(o,e):F(A({},o),{subGroups:this.mergeGroupsWithSupplements(o.subGroups,e)})}static mergeTargetGroupWithSupplements(o,e){let t=o.attributes;return e.forEach(n=>{let r=i.getAttributeName(n.attributeUiKey);t=this.updateArrayElement(t,c=>c.name===r,c=>F(A({},c),{values:this.mergeValuesWithSupplement(c.values,n)}))}),F(A({},o),{attributes:t})}static mergeValuesWithSupplement(o,e){let t=o;return e.valueSupplements.forEach(n=>{t=this.updateArrayElement(t,r=>r.valueCode===n.attributeValueKey,r=>F(A({},r),{valuePrice:n.priceValue}))}),t}static isTargetGroup(o,e){let t=e[0];if(t){let n=i.getAttributeName(t.attributeUiKey),r=i.getKey(t.attributeUiKey,n);return o.id.indexOf(r)>=0}else throw new Error("We expect at least one attribute supplement")}static updateArrayElement(o,e,t){if(o){let n=o.findIndex(e);if(n===-1)return o;let r=o[n],c=t(r,n),f=[...o];return f[n]=c,f}}static getAttributeName(o){let e=o.lastIndexOf("@");return o.slice(e+1)}static getKey(o,e){return o.replace("@"+e,"")}},bg={configId:"",productCode:"",groups:[],flatGroups:[],interactionState:{currentGroup:void 0,groupsVisited:{},menuParentGroup:void 0},owner:He.createInitialOwner()};var fe;function Ig(i=bg,o){return xg(),fe.has(o.type)?fe.get(o.type)(i,o):i}function xg(){fe===void 0&&(fe=new Map,fe.set(Vo,Tg),fe.set(Qn,Og),fe.set(Fo,wg),fe.set(No,Ag),fe.set(Io,Dg),fe.set(Lo,Fg),fe.set($o,Rg),fe.set(jo,Ng),fe.set(Ao,Pg),fe.set(To,Mg),fe.set(Oo,Ug),fe.set(Qo,Vg),fe.set(Ko,Gg),fe.set(Ho,Bg),fe.set(Wo,Lg),fe.set(Hn,Sg),fe.set(zo,Eg),fe.set(Kn,kg))}function Tg(i,o){let e=Ri(o,i);return ri(e),e.isCartEntryUpdateRequired=!0,e.overview=void 0,i.interactionState.newConfiguration!==void 0&&(e.interactionState.newConfiguration=!1),e}function ri(i){i.interactionState.showConflictSolverDialog=i.immediateConflictResolution&&!i.consistent,i.interactionState.showConflictSolverDialog&&(i.interactionState.issueNavigationDone=!0)}function Sg(i,o){if(o.type===Hn)return F(A({},i),{interactionState:F(A({},i.interactionState),{showConflictSolverDialog:!1})})}function Eg(i){let o=F(A({},i),{interactionState:A({},i.interactionState)});return ri(o),o}function Og(i){let o=A({},i);return o.isCartEntryUpdateRequired=!1,o}function wg(i,o){let e=Fi(Ri(o,i));return ri(e),e.interactionState.newConfiguration=e.newConfiguration,e}function Ag(i,o){let e=Fi(Ri(o,i));return ri(e),e}function Dg(i,o){return Fi(Ri(o,i))}function Fg(i,o){return Fi($g(o,i))}function Rg(i,o){let e=F(A({},o.payload.overview),{possibleGroups:o.payload.overview.groups});return F(A({},i),{overview:e,priceSummary:e.priceSummary,interactionState:F(A({},i.interactionState),{issueNavigationDone:!1})})}function Ng(i,o){let e=A({},o.payload.overview);return F(A({},i),{overview:e,priceSummary:e.priceSummary,interactionState:F(A({},i.interactionState),{issueNavigationDone:!1})})}function Pg(i,o){return F(A({},i),{variants:o.payload.variants})}function Mg(i,o){let e=o.payload.overview,t=e?F(A({},o.payload),{overview:F(A({},e),{possibleGroups:e.groups})}):o.payload;return F(A(A({},i),t),{priceSummary:t.overview?.priceSummary})}function Ug(i,o){let e=A({},o.payload.configuration);return e.nextOwner=He.createOwner(oe.OwnerType.CART_ENTRY,o.payload.cartEntryNo),A(A({},i),e)}function Vg(i,o){let e=o.payload.interactionState;return F(A({},i),{interactionState:e})}function Gg(i,o){let e=o.payload.currentGroup,t=F(A({},i),{interactionState:F(A({},i.interactionState),{currentGroup:e})});return ri(t),t}function Bg(i,o){let e=o.payload.menuParentGroup;return F(A({},i),{interactionState:F(A({},i.interactionState),{menuParentGroup:e})})}function Lg(i,o){let e=o.payload.visitedGroups,t={groupsVisited:{}};return i.interactionState.groupsVisited&&Object.keys(i.interactionState.groupsVisited).forEach(n=>po(t,n)),e.forEach(n=>po(t,n)),F(A({},i),{interactionState:F(A({},i.interactionState),{groupsVisited:t.groupsVisited})})}function kg(i,o){let e=o.payload.conflictResolutionMode;return F(A({},i),{interactionState:F(A({},i.interactionState),{isConflictResolutionMode:e})})}function po(i,o){let e=i.groupsVisited;e&&(e[o]=!0)}function Fi(i){if(i.interactionState.currentGroup)return i;let o,e=i.flatGroups;e&&e.length>0&&(o=i.immediateConflictResolution?e.find(n=>!n.id.startsWith(d.ConflictIdPrefix))?.id:e[0].id);let t=o?.startsWith(d.ConflictIdPrefix)?d.ConflictHeaderId:void 0;return F(A({},i),{interactionState:F(A({},i.interactionState),{currentGroup:o,menuParentGroup:t})})}function Ri(i,o){let e=A({},i.payload),t=e.groups.length>0?e.groups:o.groups,n=F(A(A({},o),e),{groups:t,interactionState:F(A(A({},o.interactionState),e.interactionState),{showConflictSolverDialog:o.interactionState.showConflictSolverDialog,issueNavigationDone:!0})});return n.priceSupplements&&(n.priceSupplements=void 0),n}function $g(i,o){let e=A({},i.payload),t=e.priceSupplements,n=!i.isDeltaRendering&&t&&t.length>0?qn.mergeGroupsWithSupplements(o.groups,t):o.groups;return F(A(A({},o),e),{groups:n,interactionState:F(A(A({},o.interactionState),e.interactionState),{issueNavigationDone:!0})})}function qg(){return{configurations:K.entityProcessesLoaderReducer(J,Ig)}}var ua=new Ie("ConfiguratorReducers"),jg={provide:ua,useFactory:qg},Qg=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[jg],imports:[B,Gr,Fr.forFeature(yo,ua),Rr.forFeature(yg)]})}}return i})(),Kg=(()=>{class i{constructor(e,t,n){this.eventService=e,this.configExpertModeService=t,this.configuratorCommonsService=n,this.subscription=new Qe,this.onLogout()}onLogout(){this.subscription.add(lr(this.eventService.get(Br)).subscribe(()=>{this.configExpertModeService.setExpModeActive(!1),this.configExpertModeService.setExpModeRequested(!1),this.configuratorCommonsService.removeProductBoundConfigurations()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(t){return new(t||i)(D(Lr),D(It),D(ie))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Hg=(()=>{class i{constructor(e){}static{this.\u0275fac=function(t){return new(t||i)(D(Kg))}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[We,z(mg)],imports:[Qg,fg]})}}return i})(),Wg=(()=>{class i{constructor(){}convert(e,t){return F(A({},t),{userId:e.userId,cartId:e.cartId,product:{code:e.productCode},quantity:e.quantity,configId:e.configId})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),q;(function(i){let o;(function(f){f.CSTIC_GROUP="CSTIC_GROUP",f.INSTANCE="INSTANCE",f.CONFLICT_HEADER="CONFLICT_HEADER",f.CONFLICT="CONFLICT"})(o=i.GroupType||(i.GroupType={}));let e;(function(f){f.STRING="STRING",f.NUMERIC="NUMERIC",f.SAP_DATE="SAP_DATE",f.CHECK_BOX="CHECK_BOX",f.CHECK_BOX_LIST="CHECK_BOX_LIST",f.RADIO_BUTTON="RADIO_BUTTON",f.RADIO_BUTTON_ADDITIONAL_INPUT="RADIO_BUTTON_ADDITIONAL_INPUT",f.DROPDOWN="DROPDOWN",f.DROPDOWN_ADDITIONAL_INPUT="DROPDOWN_ADDITIONAL_INPUT",f.READ_ONLY="READ_ONLY",f.READ_ONLY_SINGLE_SELECTION_IMAGE="READ_ONLY_SINGLE_SELECTION_IMAGE",f.READ_ONLY_MULTI_SELECTION_IMAGE="READ_ONLY_MULTI_SELECTION_IMAGE",f.NOT_IMPLEMENTED="NOT_IMPLEMENTED",f.SINGLE_SELECTION_IMAGE="SINGLE_SELECTION_IMAGE",f.MULTI_SELECTION_IMAGE="MULTI_SELECTION_IMAGE"})(e=i.UiType||(i.UiType={}));let t;(function(f){f.BUY="BUY"})(t=i.PriceType||(i.PriceType={}));let n;(function(f){f.VALUE_IMAGE="VALUE_IMAGE",f.CSTIC_IMAGE="CSTIC_IMAGE"})(n=i.ImageFormatType||(i.ImageFormatType={}));let r;(function(f){f.PRIMARY="PRIMARY",f.GALLERY="GALLERY"})(r=i.ImageType||(i.ImageType={}));let c;(function(f){f.VISIBLE="PRIMARY",f.USER_INPUT="USER_INPUT",f.PRICE_RELEVANT="PRICE_RELEVANT"})(c=i.OverviewFilterEnum||(i.OverviewFilterEnum={}))})(q||(q={}));var Yg=(()=>{class i{static{this.RETRACT_VALUE_CODE="###RETRACT_VALUE_CODE###"}constructor(e,t,n){this.config=e,this.translation=t,this.uiSettingsConfig=n}convert(e,t){let n=F(A({},t),{owner:t?.owner??He.createInitialOwner(),interactionState:t?.interactionState??{},configId:e.configId,complete:e.complete,consistent:e.consistent,totalNumberOfIssues:e.totalNumberOfIssues,productCode:e.rootProduct,groups:[],flatGroups:[],kbKey:e.kbKey??void 0,pricingEnabled:e.pricingEnabled??!0,hideBasePriceAndSelectedOptions:e.hideBasePriceAndSelectedOptions,immediateConflictResolution:e.immediateConflictResolution??!1,newConfiguration:e.newConfiguration,isPricingAsync:!0}),r=[];return e.groups?.forEach(c=>this.convertGroup(c,n.groups,r)),n.flatGroups=r,n}convertGroup(e,t,n){let r=[];e.attributes&&e.attributes.forEach(f=>this.convertAttribute(f,r));let c={description:e.description,configurable:e.configurable,complete:e.complete,consistent:e.consistent,groupType:this.convertGroupType(e.groupType),name:e.name,id:e.id,attributes:r,subGroups:[]};this.setGroupDescription(c),e.subGroups&&e.subGroups.forEach(f=>this.convertGroup(f,c.subGroups,n)),(c.groupType===d.GroupType.ATTRIBUTE_GROUP||c.groupType===d.GroupType.CONFLICT_GROUP)&&n.push(c),t.push(c)}getGroupId(e,t){return e.replace("@"+t,"")}convertAttribute(e,t){let n=e.conflicts?e.conflicts.length:0,r=[],c=[];e.images&&e.images.forEach(h=>this.convertImage(h,r)),this.addRetractValue(e,c),e.domainValues&&e.domainValues.forEach(h=>this.convertValue(h,c));let f=this.convertAttributeType(e),T={name:e.name,label:e.langDepName,required:e.required,uiType:f,uiTypeVariation:e.type,groupId:this.getGroupId(e.key,e.name),userInput:this.compileUserInput(e),maxlength:(e.maxlength??0)+(e.negativeAllowed?1:0),numDecimalPlaces:e.numberScale,negativeAllowed:e.negativeAllowed,numTotalLength:e.typeLength,selectedSingleValue:void 0,hasConflicts:n>0,images:r,values:c,intervalInDomain:e.intervalInDomain,key:e.key,validationType:e.validationType,visible:e.visible,description:e.longText};this.setSelectedSingleValue(T),this.compileAttributeIncomplete(T),t.push(T)}compileUserInput(e){let t;return(e.type===q.UiType.NUMERIC||e.type===q.UiType.STRING||e.type===q.UiType.READ_ONLY)&&(t=e.formattedValue?e.formattedValue:""),e.type===q.UiType.SAP_DATE&&(t=e.value?e.value:""),t}setSelectedSingleValue(e){if(e.values){let t=e.values.map(n=>n).filter(n=>n.selected);t&&t.length===1&&(e.selectedSingleValue=t[0].valueCode)}}isRetractValueSelected(e){return!(e.domainValues&&e.domainValues.filter(t=>t.selected).length)}setRetractValueDisplay(e,t){(e===d.UiType.DROPDOWN||e===d.UiType.RADIOBUTTON||e===d.UiType.SINGLE_SELECTION_IMAGE)&&(e===d.UiType.DROPDOWN&&t.selected?this.translation.translate("configurator.attribute.dropDownSelectMsg").pipe(w(1)).subscribe(n=>t.valueDisplay=n):this.translation.translate("configurator.attribute.noOptionSelectedMsg").pipe(w(1)).subscribe(n=>t.valueDisplay=n))}hasSourceAttributeConflicts(e){return e.conflicts?e.conflicts.length>0:!1}isSourceAttributeTypeReadOnly(e){return e.type===q.UiType.READ_ONLY||e.type===q.UiType.READ_ONLY_SINGLE_SELECTION_IMAGE||e.type===q.UiType.READ_ONLY_MULTI_SELECTION_IMAGE}isRetractBlocked(e){return e.retractBlocked?e.retractBlocked:!1}addRetractValue(e,t){let n=this.isRetractBlocked(e),r=this.hasSourceAttributeConflicts(e);if(!n&&(this.uiSettingsConfig?.productConfigurator?.addRetractOption||this.isSourceAttributeTypeReadOnly(e)&&r)){let c=this.convertAttributeType(e);if(c===d.UiType.RADIOBUTTON||c===d.UiType.DROPDOWN||c===d.UiType.SINGLE_SELECTION_IMAGE){let f={valueCode:d.RetractValueCode,selected:this.isRetractValueSelected(e)};this.setRetractValueDisplay(c,f),t.push(f)}}}convertValue(e,t){let n=[];e.images&&e.images.forEach(c=>this.convertImage(c,n));let r={valueCode:e.key,valueDisplay:e.langDepName,name:e.name,selected:e.selected,images:n,description:e.longText};t.push(r)}convertImage(e,t){let n={url:(this.config?.backend?.media?.baseUrl||this.config?.backend?.occ?.baseUrl||"")+e.url,altText:e.altText,galleryIndex:e.galleryIndex,type:this.convertImageType(e.imageType),format:this.convertImageFormatType(e.format)};t.push(n)}getSingleSelectionUiType(e,t){switch(e){case q.UiType.RADIO_BUTTON:{t=d.UiType.RADIOBUTTON;break}case q.UiType.RADIO_BUTTON_ADDITIONAL_INPUT:{t=d.UiType.RADIOBUTTON_ADDITIONAL_INPUT;break}case q.UiType.DROPDOWN:{t=d.UiType.DROPDOWN;break}case q.UiType.DROPDOWN_ADDITIONAL_INPUT:{t=d.UiType.DROPDOWN_ADDITIONAL_INPUT;break}case q.UiType.CHECK_BOX:{t=d.UiType.CHECKBOX;break}case q.UiType.SINGLE_SELECTION_IMAGE:{t=d.UiType.SINGLE_SELECTION_IMAGE;break}}return t}getMultiSelectionUiType(e,t){switch(e){case q.UiType.CHECK_BOX_LIST:{t=d.UiType.CHECKBOXLIST;break}case q.UiType.MULTI_SELECTION_IMAGE:{t=d.UiType.MULTI_SELECTION_IMAGE;break}}return t}getReadOnlyUiType(e,t,n){switch(t){case q.UiType.READ_ONLY:{n=!e.retractBlocked&&this.hasSourceAttributeConflicts(e)?d.UiType.RADIOBUTTON:d.UiType.READ_ONLY;break}case q.UiType.READ_ONLY_SINGLE_SELECTION_IMAGE:{n=!e.retractBlocked&&this.hasSourceAttributeConflicts(e)?d.UiType.SINGLE_SELECTION_IMAGE:d.UiType.READ_ONLY_SINGLE_SELECTION_IMAGE;break}case q.UiType.READ_ONLY_MULTI_SELECTION_IMAGE:{n=!e.retractBlocked&&this.hasSourceAttributeConflicts(e)?d.UiType.MULTI_SELECTION_IMAGE:d.UiType.READ_ONLY_MULTI_SELECTION_IMAGE;break}}return n}getInputUiType(e,t){switch(e){case q.UiType.STRING:{t=d.UiType.STRING;break}case q.UiType.NUMERIC:{t=d.UiType.NUMERIC;break}case q.UiType.SAP_DATE:{t=d.UiType.SAP_DATE;break}}return t}convertAttributeType(e){let t=d.UiType.NOT_IMPLEMENTED,n=e.type?.toString()??"",r=this.determineCoreUiType(n);return t=this.getSingleSelectionUiType(r,t),t=this.getMultiSelectionUiType(r,t),t=this.getInputUiType(r,t),t=this.getReadOnlyUiType(e,r,t),t}determineCoreUiType(e){let t=e.indexOf(d.CustomUiTypeIndicator);return t>0?e.substring(0,t):e}convertGroupType(e){switch(e){case q.GroupType.CSTIC_GROUP:return d.GroupType.ATTRIBUTE_GROUP;case q.GroupType.INSTANCE:return d.GroupType.SUB_ITEM_GROUP;case q.GroupType.CONFLICT_HEADER:return d.GroupType.CONFLICT_HEADER_GROUP;case q.GroupType.CONFLICT:return d.GroupType.CONFLICT_GROUP}}setGroupDescription(e){switch(e.groupType){case d.GroupType.CONFLICT_HEADER_GROUP:this.translation.translate("configurator.group.conflictHeader").pipe(w(1)).subscribe(n=>e.description=n);break;case d.GroupType.CONFLICT_GROUP:let t=e.description;this.translation.translate("configurator.group.conflictGroup",{attribute:e.name}).pipe(w(1)).subscribe(n=>e.description=n),e.name=t;break;default:if(e.name!=="_GEN")return;this.translation.translate("configurator.group.general").pipe(w(1)).subscribe(n=>e.description=n)}}convertImageType(e){switch(e){case q.ImageType.GALLERY:return d.ImageType.GALLERY;case q.ImageType.PRIMARY:return d.ImageType.PRIMARY}}convertImageFormatType(e){switch(e){case q.ImageFormatType.VALUE_IMAGE:return d.ImageFormatType.VALUE_IMAGE;case q.ImageFormatType.CSTIC_IMAGE:return d.ImageFormatType.ATTRIBUTE_IMAGE}}compileAttributeIncomplete(e){e.incomplete=!1;let t=[d.UiType.RADIOBUTTON,d.UiType.RADIOBUTTON_ADDITIONAL_INPUT,d.UiType.DROPDOWN_ADDITIONAL_INPUT,d.UiType.DROPDOWN],n=[d.UiType.NUMERIC,d.UiType.SAP_DATE,d.UiType.STRING],r=[d.UiType.CHECKBOXLIST,d.UiType.CHECKBOX,d.UiType.MULTI_SELECTION_IMAGE],c=e.uiType??d.UiType.NOT_IMPLEMENTED;t.includes(c)?this.compileAttributeIncompleteSingleLevel(e):c===d.UiType.SINGLE_SELECTION_IMAGE?this.compileAttributeIncompleteSingleSelectionImage(e):n.includes(c)?this.compileAttributeIncompleteInputTypes(e):r.includes(c)&&this.compileAttributeIncompleteMultiSelect(e)}compileAttributeIncompleteSingleLevel(e){(!e.selectedSingleValue||e.selectedSingleValue===d.RetractValueCode)&&(e.incomplete=!0)}compileAttributeIncompleteSingleSelectionImage(e){e.selectedSingleValue||(e.incomplete=!0)}compileAttributeIncompleteInputTypes(e){e.userInput||(e.incomplete=!0)}compileAttributeIncompleteMultiSelect(e){let t=e.values?.find(n=>n.selected)!==void 0;e.incomplete=!t}static{this.\u0275fac=function(t){return new(t||i)(D(Ur),D(Te),D(Vt))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Jt=new Ie("VariantConfiguratorNormalizer"),la=new Ie("VariantConfiguratorSerializer"),pa=new Ie("VariantConfiguratorPriceSummaryNormalizer"),da=new Ie("VariantConfiguratorPriceNormalizer"),ga=new Ie("VariantConfiguratorAddToCartSerializer"),fa=new Ie("VariantConfiguratorUpdateCartEntrySerializer"),bi=new Ie("VariantConfiguratorOverviewNormalizer"),ma=new Ie("VariantConfiguratorOverviewSerializer"),zg=(()=>{class i{constructor(e,t){this.translation=e,this.converterService=t}convert(e,t){let n={priceSummary:e.pricing,configId:e.id},r=F(A({},t),{configId:e.id,groups:e.groups?.flatMap(c=>this.convertGroup(c)),priceSummary:this.converterService.convert(n,pa),productCode:e.productCode});return this.setIssueCounters(r,e),r}convertGroup(e){let t=[],n=e.characteristicValues,r=e.subGroups,c={id:e.id,groupDescription:e.groupDescription,attributes:n?n.map(f=>({attribute:f.characteristic,attributeId:f.characteristicId,value:f.value,valueId:f.valueId,valuePrice:f.price})):[]};if(this.setGeneralDescription(c),r){let f=[];r.forEach(T=>this.convertGroup(T).forEach(h=>f.push(h))),c.subGroups=f}return t.push(c),t}setGeneralDescription(e){e.id==="_GEN"&&this.translation.translate("configurator.group.general").pipe(w(1)).subscribe(t=>e.groupDescription=t)}setIssueCounters(e,t){e.totalNumberOfIssues=t.totalNumberOfIssues,e.numberOfConflicts=t.numberOfConflicts,e.numberOfIncompleteCharacteristics=t.numberOfIncompleteCharacteristics}static{this.\u0275fac=function(t){return new(t||i)(D(Te),D(dt))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Xg=(()=>{class i{constructor(e){this.converterService=e}convert(e,t){return F(A({},t),{id:e.configId,productCode:e.productCode,appliedCsticFilter:this.convertAttributeFilters(e.attributeFilters),groupFilterList:this.convertGroupFilters(e.groupFilters)})}convertAttributeFilters(e){let t=[];return e?.forEach(n=>{t.push({key:n,selected:!0})}),t}convertGroupFilters(e){let t=[];return e?.forEach(n=>{t.push({key:n,selected:!0})}),t}static{this.\u0275fac=function(t){return new(t||i)(D(dt))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Zg=(()=>{class i{convert(e,t){return A(A({},t),e.priceSummary)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Jg=(()=>{class i{static{this.RETRACT_VALUE_CODE="###RETRACT_VALUE_CODE###"}convert(e,t){let n=[];return e.groups.forEach(c=>this.convertGroup(c,n)),F(A({},t),{configId:e.configId,rootProduct:e.productCode,complete:e.complete,groups:n})}convertGroup(e,t){let n=[],r=[];e.attributes&&e.attributes.forEach(f=>this.convertAttribute(f,r)),e.subGroups&&e.subGroups.forEach(f=>this.convertGroup(f,n));let c={name:e.name,id:e.id,configurable:e.configurable,groupType:this.convertGroupType(e.groupType??d.GroupType.ATTRIBUTE_GROUP),description:e.description,attributes:r,subGroups:n};t.push(c)}isRetractValue(e){return e.selectedSingleValue===d.RetractValueCode}getRetractedValue(e){return e.values?.find(t=>t.selected)?.valueCode}retractValue(e,t){this.isRetractValue(e)?(t.value=this.getRetractedValue(e),t.retractTriggered=!0):t.value=e.selectedSingleValue}convertAttribute(e,t){let n=e.uiType??d.UiType.NOT_IMPLEMENTED,r={key:e.name,name:e.name,langDepName:e.label,required:e.required,retractTriggered:e.retractTriggered,type:this.convertCharacteristicType(n)},c=[d.UiType.RADIOBUTTON,d.UiType.RADIOBUTTON_ADDITIONAL_INPUT,d.UiType.DROPDOWN_ADDITIONAL_INPUT,d.UiType.DROPDOWN,d.UiType.SINGLE_SELECTION_IMAGE],f=[d.UiType.CHECKBOXLIST,d.UiType.CHECKBOX,d.UiType.MULTI_SELECTION_IMAGE],T=[d.UiType.STRING,d.UiType.SAP_DATE],h=[d.UiType.NUMERIC];if(c.includes(n))this.retractValue(e,r);else if(T.includes(n))r.value=e.userInput;else if(h.includes(n))r.formattedValue=e.userInput;else if(f.includes(n)){let C=[];e.values&&e.values.forEach(Q=>{this.convertValue(Q,C)}),r.domainValues=C}t.push(r)}convertValue(e,t){t.push({key:e.valueCode,langDepName:e.valueDisplay,name:e.name,selected:e.selected})}convertCharacteristicType(e){return[d.UiType.RADIOBUTTON,d.UiType.RADIOBUTTON_ADDITIONAL_INPUT,d.UiType.DROPDOWN_ADDITIONAL_INPUT,d.UiType.DROPDOWN,d.UiType.SINGLE_SELECTION_IMAGE].includes(e)?this.convertCharacteristicTypeSingleValue(e):this.convertCharacteristicTypeMultiValueAndInput(e)}convertCharacteristicTypeSingleValue(e){let t;switch(e){case d.UiType.RADIOBUTTON:{t=q.UiType.RADIO_BUTTON;break}case d.UiType.RADIOBUTTON_ADDITIONAL_INPUT:{t=q.UiType.RADIO_BUTTON_ADDITIONAL_INPUT;break}case d.UiType.DROPDOWN:{t=q.UiType.DROPDOWN;break}case d.UiType.DROPDOWN_ADDITIONAL_INPUT:{t=q.UiType.DROPDOWN_ADDITIONAL_INPUT;break}case d.UiType.SINGLE_SELECTION_IMAGE:{t=q.UiType.SINGLE_SELECTION_IMAGE;break}default:t=q.UiType.NOT_IMPLEMENTED}return t}convertCharacteristicTypeMultiValueAndInput(e){let t;switch(e){case d.UiType.STRING:{t=q.UiType.STRING;break}case d.UiType.NUMERIC:{t=q.UiType.NUMERIC;break}case d.UiType.SAP_DATE:{t=q.UiType.SAP_DATE;break}case d.UiType.CHECKBOX:{t=q.UiType.CHECK_BOX;break}case d.UiType.CHECKBOXLIST:{t=q.UiType.CHECK_BOX_LIST;break}case d.UiType.MULTI_SELECTION_IMAGE:{t=q.UiType.MULTI_SELECTION_IMAGE;break}default:t=q.UiType.NOT_IMPLEMENTED}return t}convertGroupType(e){switch(e){case d.GroupType.ATTRIBUTE_GROUP:return q.GroupType.CSTIC_GROUP;case d.GroupType.SUB_ITEM_GROUP:return q.GroupType.INSTANCE;case d.GroupType.CONFLICT_GROUP:return q.GroupType.CONFLICT;case d.GroupType.CONFLICT_HEADER_GROUP:return q.GroupType.CONFLICT_HEADER}}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),ef=(()=>{class i{convert(e,t){return F(A({},t),{userId:e.userId,cartId:e.cartId,product:{code:e.configuration.productCode},entryNumber:e.cartEntryNumber,configId:e.configuration.configId,configurationInfos:[{configuratorType:"CPQCONFIGURATOR"}]})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),tf=(()=>{class i{constructor(e,t,n,r){this.http=e,this.occEndpointsService=t,this.converterService=n,this.configExpertModeService=r}getConfiguratorType(){return"CPQCONFIGURATOR"}getExpModeRequested(){let e=!1;return this.configExpertModeService.getExpModeRequested().pipe(w(1)).subscribe(t=>e=t),e}setExpModeActive(e){this.configExpertModeService.setExpModeActive(e)}createConfiguration(e,t,n=!1){let r=e.id,c=this.getExpModeRequested();return this.http.get(this.occEndpointsService.buildUrl("createVariantConfiguration",{urlParams:{productCode:r},queryParams:t?{configIdTemplate:t,expMode:c,forceReset:n}:{expMode:c,forceReset:n}}),{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(Jt),ye(f=>{this.setExpModeActive(f.kbKey!==void 0)}),E(f=>F(A({},f),{owner:e})))}readConfiguration(e,t,n){let r=this.getExpModeRequested();return this.http.get(this.occEndpointsService.buildUrl("readVariantConfiguration",{urlParams:{configId:e},queryParams:{groupId:t,expMode:r}}),{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(Jt),ye(c=>{this.setExpModeActive(c.kbKey!==void 0)}),E(c=>F(A({},c),{owner:n,newConfiguration:!1})))}updateConfiguration(e){let t=e.configId,n=this.getExpModeRequested(),r=this.occEndpointsService.buildUrl("updateVariantConfiguration",{urlParams:{configId:t},queryParams:{expMode:n}}),c=this.converterService.convert(e,la);return this.http.patch(r,c,{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(Jt),ye(f=>{this.setExpModeActive(f.kbKey!==void 0)}),E(f=>F(A({},f),{owner:e.owner})))}addToCart(e){let t=this.occEndpointsService.buildUrl("addVariantConfigurationToCart",{urlParams:{userId:e.userId,cartId:e.cartId}}),n=this.converterService.convert(e,ga),r=new Kt({"Content-Type":"application/json"});return this.http.post(t,n,{headers:r}).pipe(this.converterService.pipeable(Dt))}readConfigurationForCartEntry(e){let t=this.getExpModeRequested(),n=this.occEndpointsService.buildUrl("readVariantConfigurationForCartEntry",{urlParams:{userId:e.userId,cartId:e.cartId,cartEntryNumber:e.cartEntryNumber},queryParams:{expMode:t}});return this.http.get(n).pipe(this.converterService.pipeable(Jt),ye(r=>{this.setExpModeActive(r.kbKey!==void 0)}),E(r=>F(A({},r),{owner:e.owner})))}updateConfigurationForCartEntry(e){let t=this.occEndpointsService.buildUrl("updateVariantConfigurationForCartEntry",{urlParams:{userId:e.userId,cartId:e.cartId,cartEntryNumber:e.cartEntryNumber}}),n=new Kt({"Content-Type":"application/json"}),r=this.converterService.convert(e,fa);return this.http.put(t,r,{headers:n}).pipe(this.converterService.pipeable(Dt))}readConfigurationForOrderEntry(e){let t=e.owner.type,n;return t===oe.OwnerType.QUOTE_ENTRY?n=this.occEndpointsService.buildUrl("readVariantConfigurationOverviewForQuoteEntry",{urlParams:{userId:e.userId,quoteId:e.orderId,quoteEntryNumber:e.orderEntryNumber}}):t===oe.OwnerType.SAVED_CART_ENTRY?n=this.occEndpointsService.buildUrl("readVariantConfigurationOverviewForSavedCartEntry",{urlParams:{userId:e.userId,cartId:e.orderId,cartEntryNumber:e.orderEntryNumber}}):n=this.occEndpointsService.buildUrl("readVariantConfigurationOverviewForOrderEntry",{urlParams:{userId:e.userId,orderId:e.orderId,orderEntryNumber:e.orderEntryNumber}}),this.http.get(n).pipe(this.converterService.pipeable(bi),E(r=>({configId:r.configId,productCode:r.productCode,groups:[],flatGroups:[],interactionState:{},overview:r,owner:He.createInitialOwner()})),E(r=>F(A({},r),{owner:e.owner})))}readPriceSummary(e){let t=this.occEndpointsService.buildUrl("readVariantConfigurationPriceSummary",{urlParams:{configId:e.configId},queryParams:{groupId:e.interactionState.currentGroup}});return this.http.get(t,{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(da),E(n=>F(A({},e),{priceSummary:n.priceSummary,priceSupplements:n.priceSupplements})))}getConfigurationOverview(e){let t=this.occEndpointsService.buildUrl("getVariantConfigurationOverview",{urlParams:{configId:e}});return this.http.get(t,{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(bi))}updateConfigurationOverview(e){let t=this.occEndpointsService.buildUrl("getVariantConfigurationOverview",{urlParams:{configId:e.configId}}),n=this.converterService.convert(e,ma);return this.http.patch(t,n,{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(bi),E(r=>F(A({},r),{attributeFilters:e.attributeFilters,groupFilters:e.groupFilters,possibleGroups:e.possibleGroups})))}searchVariants(e){let t=this.occEndpointsService.buildUrl("searchConfiguratorVariants",{urlParams:{configId:e}});return this.http.get(t,{context:this.indicateSendUserForAsm()})}indicateSendUserForAsm(){return new wr().set($r,{sendUserIdAsHeader:!0})}static{this.\u0275fac=function(t){return new(t||i)(D(Ht),D(di),D(dt),D(It))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac})}}return i})(),nf=(()=>{class i{convert(e,t){let n=[];return e.attributes?.forEach(c=>{this.convertAttributeSupplements(c,n)}),F(A({},t),{configId:e.configId,productCode:"",groups:[],flatGroups:[],owner:He.createInitialOwner(),interactionState:{},priceSummary:e?.priceSummary,priceSupplements:n})}convertAttributeSupplements(e,t){let n={attributeUiKey:e?.csticUiKey,valueSupplements:[]};e?.priceSupplements?.forEach(r=>{this.convertValueSupplement(r,n?.valueSupplements)}),t.push(n)}convertValueSupplement(e,t){let n={attributeValueKey:e?.attributeValueKey,priceValue:e?.priceValue,obsoletePriceValue:e?.obsoletePriceValue};t.push(n)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function rf(){return{backend:{occ:{endpoints:{createVariantConfiguration:"products/${productCode}/configurators/ccpconfigurator",readVariantConfiguration:"ccpconfigurator/${configId}",updateVariantConfiguration:"ccpconfigurator/${configId}",addVariantConfigurationToCart:"users/${userId}/carts/${cartId}/entries/ccpconfigurator",readVariantConfigurationForCartEntry:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/ccpconfigurator",updateVariantConfigurationForCartEntry:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/ccpconfigurator",readVariantConfigurationOverviewForOrderEntry:"users/${userId}/orders/${orderId}/entries/${orderEntryNumber}/ccpconfigurator/configurationOverview",readVariantConfigurationOverviewForSavedCartEntry:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/ccpconfigurator/configurationOverview",readVariantConfigurationOverviewForQuoteEntry:"users/${userId}/quotes/${quoteId}/entries/${quoteEntryNumber}/ccpconfigurator/configurationOverview",readVariantConfigurationPriceSummary:"ccpconfigurator/${configId}/pricing",getVariantConfigurationOverview:"ccpconfigurator/${configId}/configurationOverview",searchConfiguratorVariants:"ccpconfigurator/${configId}/variants"}}}}}var of=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[{provide:We.CONFIGURATOR_ADAPTER_LIST,useClass:tf,multi:!0},{provide:Jt,useExisting:Yg,multi:!0},{provide:la,useExisting:Jg,multi:!0},{provide:pa,useExisting:Zg,multi:!0},{provide:da,useExisting:nf,multi:!0},{provide:ga,useExisting:Wg,multi:!0},{provide:fa,useExisting:ef,multi:!0},{provide:bi,useExisting:zg,multi:!0},{provide:ma,useExisting:Xg,multi:!0}],imports:[B,kr.withConfigFactory(rf)]})}}return i})(),va=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({imports:[of,Hg,dg]})}}return i})();var ae;(function(i){let o;(function(t){t[t.RADIO_BUTTON=1]="RADIO_BUTTON",t[t.CHECK_BOX=2]="CHECK_BOX",t[t.DROPDOWN=3]="DROPDOWN",t[t.LIST_BOX=4]="LIST_BOX",t[t.LIST_BOX_MULTI=5]="LIST_BOX_MULTI",t[t.READ_ONLY=71]="READ_ONLY",t[t.INPUT=95]="INPUT",t[t.AUTO_COMPLETE_CUSTOM=102]="AUTO_COMPLETE_CUSTOM"})(o=i.DisplayAs||(i.DisplayAs={}));let e;(function(t){t.INPUT_STRING="String",t.INPUT_NUMBER="Number",t.QTY_ATTRIBUTE_LEVEL="Quantity",t.QTY_VALUE_LEVEL="Attr.Quantity",t.N_A="N/A"})(e=i.DataType||(i.DataType={}))})(ae||(ae={}));var _a=(()=>{class i{constructor(e){this.languageService=e,this.logger=X(Ne)}convertQuantity(e,t){if(!e.selected)return;let n=this.convertDataType(t),r;switch(n){case d.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL:r=Number(t.quantity);break;case d.DataType.USER_SELECTION_QTY_VALUE_LEVEL:r=Number(e.quantity);break;default:r=void 0}return r}convertValuePrice(e,t){let n;return e.price&&(n={currencyIso:t,value:parseFloat(e.price)},this.formatPriceForLocale(n,this.getLanguage())),n}calculateValuePriceTotal(e,t){let n;if(t){let r=e||1;n={currencyIso:t.currencyIso,value:r*t.value},this.formatPriceForLocale(n,this.getLanguage())}return n}calculateAttributePriceTotal(e,t){let n=e.values?.filter(c=>c.selected&&c.valuePriceTotal).reduce((c,f)=>c+(f.valuePriceTotal?.value??0),0),r={currencyIso:t,value:n??0};return this.formatPriceForLocale(r,this.getLanguage()),r}formatPriceForLocale(e,t){let n=xr(e.currencyIso,"narrow",t);e.formattedValue=Tr(e.value,t,n,e.currencyIso)}convertDataType(e){let t;switch(e.dataType){case ae.DataType.INPUT_STRING:{t=d.DataType.INPUT_STRING;break}case ae.DataType.INPUT_NUMBER:{t=d.DataType.INPUT_NUMBER;break}case ae.DataType.N_A:{t=d.DataType.USER_SELECTION_NO_QTY;break}case ae.DataType.QTY_ATTRIBUTE_LEVEL:{t=d.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL;break}case ae.DataType.QTY_VALUE_LEVEL:{e.displayAs===ae.DisplayAs.RADIO_BUTTON||e.displayAs===ae.DisplayAs.DROPDOWN?t=d.DataType.USER_SELECTION_NO_QTY:e.displayAs===ae.DisplayAs.CHECK_BOX&&!e.isLineItem?t=d.DataType.USER_SELECTION_NO_QTY:t=d.DataType.USER_SELECTION_QTY_VALUE_LEVEL;break}default:t=d.DataType.NOT_IMPLEMENTED}return t}convertPriceSummary(e){let t={};if(e.currencyISOCode){let n=e.currencyISOCode;if(e?.responder?.totalPrice&&e?.currencySign){let r=e?.currencySign,c=e.responder.totalPrice.replace(r,""),f={currencyIso:n,value:parseFloat(c)};this.formatPriceForLocale(f,this.getLanguage()),t.currentTotal=f}if(e?.responder?.baseProductPrice){let r=e.responder.baseProductPrice,c={currencyIso:n,value:parseFloat(r)};this.formatPriceForLocale(c,this.getLanguage()),t.basePrice=c}if(t.currentTotal&&t.basePrice){let r={currencyIso:n,value:t.currentTotal.value-t.basePrice.value};this.formatPriceForLocale(r,this.getLanguage()),t.selectedOptions=r}}return t}hasAnyProducts(e){return e.some(t=>t?.productSystemId)}convertAttributeLabel(e){return e.label?e.label:e.name?e.name:""}getLanguage(){let e=this.getActiveLanguage();try{return li(e),e}catch{return this.reportMissingLocaleData(e),"en"}}getActiveLanguage(){let e;return this.languageService.getActive().subscribe(t=>e=t).unsubscribe(),e??"en"}reportMissingLocaleData(e){Ke()&&this.logger.warn(`CpqConfiguratorNormalizerUtilsService: No locale data registered for '${e}' (see https://angular.io/api/common/registerLocaleData).`)}static{this.\u0275fac=function(t){return new(t||i)(D(fi))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),af=(()=>{class i{constructor(e,t){this.cpqConfiguratorNormalizerUtilsService=e,this.translation=t}convert(e,t){let n=F(A({},t),{configId:e.configurationId?e.configurationId:"",complete:!e.incompleteAttributes?.length,consistent:!e.invalidMessages?.length&&!e.failedValidations?.length&&!e.incompleteMessages?.length&&!e.errorMessages?.length,totalNumberOfIssues:this.generateTotalNumberOfIssues(e),productCode:e.productSystemId,priceSummary:this.cpqConfiguratorNormalizerUtilsService.convertPriceSummary(e),groups:[],flatGroups:[],owner:He.createInitialOwner(),interactionState:{},errorMessages:this.generateErrorMessages(e),warningMessages:this.generateWarningMessages(e),pricingEnabled:!0});return e.tabs?.forEach(r=>this.convertGroup(r,e.attributes??[],e.currencyISOCode,n.groups,n.flatGroups)),(!n.groups||n.groups.length===0)&&this.convertGenericGroup(e.attributes??[],e.incompleteAttributes??[],e.currencyISOCode,n.groups,n.flatGroups),n}generateTotalNumberOfIssues(e){return(e.incompleteAttributes?.length??0)+(e.incompleteMessages?.length??0)+(e.invalidMessages?.length??0)+(e.failedValidations?.length??0)+(e.errorMessages?.length??0)}generateWarningMessages(e){let t=[];return t=t.concat(e.failedValidations??[]),t=t.concat(e.incompleteMessages??[]),t}generateErrorMessages(e){let t=[];return t=t.concat(e.errorMessages??[]),t=t.concat(e.invalidMessages??[]),t}convertGroup(e,t,n,r,c){let f=[];e.isSelected&&t.forEach(h=>this.convertAttribute(h,e.id,n,f));let T={id:e.id.toString(),name:e.name,description:e.displayName,configurable:!0,complete:!e.isIncomplete,consistent:!0,groupType:d.GroupType.ATTRIBUTE_GROUP,attributes:f,subGroups:[]};c.push(T),r.push(T)}convertGenericGroup(e,t,n,r,c){let f=[];e.forEach(h=>this.convertAttribute(h,1,n,f));let T={id:"1",name:"_GEN",configurable:!0,complete:t.length===0,consistent:!0,groupType:d.GroupType.ATTRIBUTE_GROUP,attributes:f,subGroups:[]};this.translation.translate("configurator.group.general").pipe(w(1)).subscribe(h=>T.description=h),r.push(T),c.push(T)}convertAttribute(e,t,n,r){let c={attrCode:e.stdAttrCode,name:this.mapPAId(e),description:e.description,label:this.cpqConfiguratorNormalizerUtilsService.convertAttributeLabel(e),required:e.required,isLineItem:e.isLineItem,uiType:this.convertAttributeType(e),dataType:this.cpqConfiguratorNormalizerUtilsService.convertDataType(e),quantity:Number(e.quantity),groupId:t.toString(),userInput:e.userInput,hasConflicts:e.hasConflict,selectedSingleValue:void 0,images:[],visible:!0};if(e.values&&e.displayAs!==ae.DisplayAs.INPUT){let f=[];e.values.forEach(T=>this.convertValue(T,e,n,f)),c.values=f,this.setSelectedSingleValue(c)}c.attributePriceTotal=this.cpqConfiguratorNormalizerUtilsService.calculateAttributePriceTotal(c,n),this.compileAttributeIncomplete(c),r.push(c)}mapPAId(e){return e.pA_ID?e.pA_ID.toString():e.PA_ID.toString()}setSelectedSingleValue(e){let t=e.values;if(t){let n=t.map(r=>r).filter(r=>r.selected);n&&n.length===1&&(e.selectedSingleValue=n[0].valueCode)}}convertValueDisplay(e,t,n){t.displayAs===ae.DisplayAs.DROPDOWN&&e.selected&&e.paV_ID===0?this.translation.translate("configurator.attribute.dropDownSelectMsg").pipe(w(1)).subscribe(r=>n.valueDisplay=r):n.valueDisplay=e.valueDisplay}convertValueCode(e){return e===0?d.RetractValueCode:e.toString()}convertValue(e,t,n,r){if(this.hasValueToBeIgnored(t,e))return;let c={valueCode:this.convertValueCode(e.paV_ID),name:e.valueCode,description:e.description,productSystemId:e.productSystemId,selected:e.selected,quantity:this.cpqConfiguratorNormalizerUtilsService.convertQuantity(e,t),valuePrice:this.cpqConfiguratorNormalizerUtilsService.convertValuePrice(e,n),images:[]};this.convertValueDisplay(e,t,c),c.valuePriceTotal=this.cpqConfiguratorNormalizerUtilsService.calculateValuePriceTotal(c.quantity??1,c.valuePrice),r.push(c)}convertAttributeType(e){let t=e.displayAs,n=!!(e.values&&this.cpqConfiguratorNormalizerUtilsService.hasAnyProducts(e.values));return!(e.isEnabled??!1)&&(t===ae.DisplayAs.RADIO_BUTTON||t===ae.DisplayAs.DROPDOWN||t===ae.DisplayAs.CHECK_BOX||t===ae.DisplayAs.INPUT)?d.UiType.READ_ONLY:this.findUiTypeFromDisplayType(t,n,e)}findUiTypeFromDisplayType(e,t,n){let r;switch(e){case ae.DisplayAs.RADIO_BUTTON:{r=t?d.UiType.RADIOBUTTON_PRODUCT:d.UiType.RADIOBUTTON;break}case ae.DisplayAs.DROPDOWN:{r=t?d.UiType.DROPDOWN_PRODUCT:d.UiType.DROPDOWN;break}case ae.DisplayAs.CHECK_BOX:{r=t?d.UiType.CHECKBOXLIST_PRODUCT:d.UiType.CHECKBOXLIST;break}case ae.DisplayAs.INPUT:{r=n.dataType===ae.DataType.INPUT_STRING?d.UiType.STRING:d.UiType.NOT_IMPLEMENTED;break}default:r=d.UiType.NOT_IMPLEMENTED}return r}compileAttributeIncomplete(e){switch(e.incomplete=!1,e.uiType){case d.UiType.RADIOBUTTON:case d.UiType.RADIOBUTTON_PRODUCT:case d.UiType.DROPDOWN:case d.UiType.DROPDOWN_PRODUCT:case d.UiType.SINGLE_SELECTION_IMAGE:{(!e.selectedSingleValue||e.selectedSingleValue===d.RetractValueCode)&&(e.incomplete=!0);break}case d.UiType.NUMERIC:case d.UiType.STRING:{e.userInput||(e.incomplete=!0);break}case d.UiType.CHECKBOXLIST:case d.UiType.CHECKBOXLIST_PRODUCT:case d.UiType.CHECKBOX:case d.UiType.MULTI_SELECTION_IMAGE:{e.values?.find(n=>n.selected)!==void 0||(e.incomplete=!0);break}}}hasValueToBeIgnored(e,t){let n=e.values?.map(r=>r).filter(r=>r.selected&&r.paV_ID!==0);return(e.displayAs===ae.DisplayAs.DROPDOWN&&e.required&&n&&n.length>0&&t.paV_ID===0)??!1}static{this.\u0275fac=function(t){return new(t||i)(D(_a),D(Te))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac})}}return i})(),Ni="",cf=(()=>{class i{constructor(e,t){this.cpqConfiguratorNormalizerUtilsService=e,this.translation=t,this.NO_OPTION_SELECTED=0}convert(e,t){return F(A({},t),{configId:e.configurationId?e.configurationId:"",productCode:e.productSystemId,priceSummary:this.cpqConfiguratorNormalizerUtilsService.convertPriceSummary(e),groups:e.tabs?.flatMap(r=>this.convertTab(r,e.currencyISOCode)).filter(r=>r.attributes&&r.attributes.length>0),totalNumberOfIssues:this.calculateTotalNumberOfIssues(e)})}convertTab(e,t){let n=[];e.attributes?.forEach(c=>{n=n.concat(this.convertAttribute(c,t))});let r={id:e.id.toString(),groupDescription:e.displayName,attributes:n};return r.id==="0"&&this.translation.translate("configurator.group.general").pipe(w(1)).subscribe(c=>r.groupDescription=c),r}convertAttribute(e,t){let n=e?.values&&this.cpqConfiguratorNormalizerUtilsService.hasAnyProducts(e?.values)?d.AttributeOverviewType.BUNDLE:d.AttributeOverviewType.GENERAL,r=[];return this.convertAttributeValue(e,t).forEach(c=>{r.push(F(A({},c),{type:n,attribute:this.cpqConfiguratorNormalizerUtilsService.convertAttributeLabel(e),attributeId:e.stdAttrCode.toString()}))}),r}convertAttributeValue(e,t){let n=[];switch(e.displayAs){case ae.DisplayAs.INPUT:e?.dataType===ae.DataType.INPUT_STRING?e.userInput&&e.userInput.length>0&&n.push(this.extractValueUserInput(e,t)):n.push({attribute:Ni,value:"NOT_IMPLEMENTED"});break;case ae.DisplayAs.RADIO_BUTTON:case ae.DisplayAs.DROPDOWN:let r=e.values?.find(c=>c.selected&&c.paV_ID!==this.NO_OPTION_SELECTED);r&&n.push(this.extractValue(r,e,t));break;case ae.DisplayAs.CHECK_BOX:e.values?.filter(c=>c.selected)?.forEach(c=>{n.push(this.extractValue(c,e,t))});break;default:n.push({attribute:Ni,value:"NOT_IMPLEMENTED"})}return n}extractValue(e,t,n){let r={attribute:Ni,value:e.valueDisplay??e.paV_ID.toString(),valueId:e.paV_ID.toString(),productCode:e.productSystemId,quantity:this.cpqConfiguratorNormalizerUtilsService.convertQuantity(e,t),valuePrice:this.cpqConfiguratorNormalizerUtilsService.convertValuePrice(e,n)};return r.valuePriceTotal=this.cpqConfiguratorNormalizerUtilsService.calculateValuePriceTotal(r.quantity??1,r.valuePrice),r}extractValueUserInput(e,t){let n=e.values?e.values[0]:void 0,r={attribute:Ni,value:e.userInput??e.stdAttrCode.toString(),valueId:n?.paV_ID.toString(),quantity:1};return n&&(r.valuePrice=this.cpqConfiguratorNormalizerUtilsService.convertValuePrice(n,t),r.valuePriceTotal=this.cpqConfiguratorNormalizerUtilsService.calculateValuePriceTotal(r.quantity??1,r.valuePrice)),r}calculateTotalNumberOfIssues(e){return(e.incompleteAttributes?.length??0)+(e.incompleteMessages?.length??0)+(e.invalidMessages?.length??0)+(e.failedValidations?.length??0)+(e.errorMessages?.length??0)}static{this.\u0275fac=function(t){return new(t||i)(D(_a),D(Te))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac})}}return i})(),xt=class{static getUpdateInformation(o){let e=o.attrCode,t=o.groupId;if(e&&t)return{standardAttributeCode:e.toString(),tabId:t};throw new Error("Attribute code of group id not present: "+JSON.stringify(o))}static findFirstChangedAttribute(o){let e=o.groups[0];if(e.attributes)return e.attributes[0];throw new Error("No changed attributes found")}},rr=",",sf=(()=>{class i{convert(e){let t=xt.findFirstChangedAttribute(e),n;return e.updateType===d.UpdateType.ATTRIBUTE_QUANTITY?n=this.convertQuantity(t,e.configId):n=this.convertAttribute(t,e.configId),n}convertQuantity(e,t){let n=xt.getUpdateInformation(e);return{configurationId:t,standardAttributeCode:n.standardAttributeCode,changeAttributeValue:{quantity:e.quantity},tabId:n.tabId}}convertAttribute(e,t){let n=xt.getUpdateInformation(e),r={configurationId:t,standardAttributeCode:n.standardAttributeCode,changeAttributeValue:{},tabId:n.tabId};return e.uiType===d.UiType.DROPDOWN||e.uiType===d.UiType.DROPDOWN_PRODUCT||e.uiType===d.UiType.RADIOBUTTON||e.uiType===d.UiType.RADIOBUTTON_PRODUCT||e.uiType===d.UiType.SINGLE_SELECTION_IMAGE?r.changeAttributeValue.attributeValueIds=this.processSelectedSingleValue(e.selectedSingleValue):e.uiType===d.UiType.CHECKBOXLIST||e.uiType===d.UiType.CHECKBOXLIST_PRODUCT||e.uiType===d.UiType.CHECKBOX||e.uiType===d.UiType.MULTI_SELECTION_IMAGE?r.changeAttributeValue.attributeValueIds=this.prepareValueIds(e):(e.uiType===d.UiType.STRING||e.uiType===d.UiType.NUMERIC)&&(r.changeAttributeValue.userInput=e.userInput,r.changeAttributeValue?.userInput||(r.changeAttributeValue.userInput=" ")),r}processValueCode(e){return e&&e===d.RetractValueCode?"0":e}processSelectedSingleValue(e){let t=this.processValueCode(e);return t||(t=rr),t}prepareValueIds(e){let t="",n=e.values?.filter(r=>r.selected);return n&&n.length>0?n.forEach(r=>{t+=r.valueCode+rr}):t=rr,t}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac})}}return i})(),uf=(()=>{class i{convert(e){let t=xt.findFirstChangedAttribute(e);return this.convertAttribute(t,e.configId)}convertAttribute(e,t){let n=xt.getUpdateInformation(e),r=this.findFirstChangedValue(e);return{configurationId:t,standardAttributeCode:n.standardAttributeCode,attributeValueId:r.valueCode,quantity:r.quantity??1,tabId:n.tabId}}findFirstChangedValue(e){if(e.values&&e.values.length>0)return e.values[0];throw new Error("No values present")}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac})}}return i})(),je=new Ie("CpqConfiguratorNormalizer"),or=new Ie("CpqConfiguratorSerializer"),ar=new Ie("CpqConfiguratorValueSerializer"),cr=new Ie("CpqConfiguratorOverviewNormalizer"),lf=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[{provide:je,useClass:af,multi:!0},{provide:or,useClass:sf,multi:!0},{provide:ar,useClass:uf,multi:!0},{provide:cr,useClass:cf,multi:!0}],imports:[B]})}}return i})(),Ca=new Ie("CpqConfiguratorAddToCartSerializer"),ha=new Ie("CpqConfiguratorUpdateCartEntrySerializer"),pf=(()=>{class i{convert(e,t){return F(A({},t),{userId:e.userId,cartId:e.cartId,product:{code:e.productCode},quantity:e.quantity,configId:e.configId})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),df=(()=>{class i{convert(e,t){return F(A({},t),{userId:e.userId,cartId:e.cartId,entryNumber:e.cartEntryNumber,configId:e.configuration.configId})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function gf(){return{backend:{occ:{endpoints:{getCpqAccessData:"users/${userId}/access/cpqconfigurator",addCpqConfigurationToCart:"users/${userId}/carts/${cartId}/entries/cpqconfigurator",readCpqConfigurationForCartEntry:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/cpqconfigurator",readCpqConfigurationForOrderEntry:"users/${userId}/orders/${orderId}/entries/${orderEntryNumber}/cpqconfigurator",updateCpqConfigurationForCartEntry:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/cpqconfigurator",createCpqConfiguration:"products/${productCode}/configurators/cpqconfigurator",readCpqConfiguration:"cpqconfigurator/${configurationId}/configuration?tabId=${tabId}",readCpqConfigurationOverview:"cpqconfigurator/${configurationId}/configurationOverview",updateCpqAttribute:"cpqconfigurator/${configurationId}/attributes/${attributeCode}?tabId=${tabId}",updateCpqAttributeValueQuantity:"cpqconfigurator/${configurationId}/attributes/${attributeCode}/values/${attributeValueId}?tabId=${tabId}",readCpqConfigurationForCartEntryFull:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/cpqconfigurator/configuration",readCpqConfigurationForOrderEntryFull:"users/${userId}/orders/${orderId}/entries/${orderEntryNumber}/cpqconfigurator/configuration",readCpqConfigurationForQuoteEntryFull:"users/${userId}/quotes/${quoteId}/entries/${quoteEntryNumber}/cpqconfigurator/configuration",readCpqConfigurationForSavedCartEntryFull:"users/${userId}/savedCarts/${savedCartId}/entries/${entryNumber}/cpqconfigurator/configuration"}}}}}var ya=(()=>{class i{constructor(e,t,n){this.http=e,this.occEndpointsService=t,this.converterService=n}addToCart(e){let t=this.occEndpointsService.buildUrl("addCpqConfigurationToCart",{urlParams:{userId:e.userId,cartId:e.cartId}}),n=this.converterService.convert(e,Ca);return this.http.post(t,n).pipe(this.converterService.pipeable(Dt))}updateCartEntry(e){let t=this.occEndpointsService.buildUrl("updateCpqConfigurationForCartEntry",{urlParams:{userId:e.userId,cartId:e.cartId,cartEntryNumber:e.cartEntryNumber}}),n=this.converterService.convert(e,ha);return this.http.put(t,n).pipe(this.converterService.pipeable(Dt))}getConfigIdForCartEntry(e){let t=this.occEndpointsService.buildUrl("readCpqConfigurationForCartEntry",{urlParams:{userId:e.userId,cartId:e.cartId,cartEntryNumber:e.cartEntryNumber}});return this.http.get(t).pipe(E(n=>n.configId))}getConfigIdForOrderEntry(e){let t=this.occEndpointsService.buildUrl("readCpqConfigurationForOrderEntry",{urlParams:{userId:e.userId,orderId:e.orderId,orderEntryNumber:e.orderEntryNumber}});return this.http.get(t).pipe(E(n=>n.configId))}createConfiguration(e){return this.callCreateConfiguration(e).pipe(this.converterService.pipeable(je))}readConfiguration(e,t){return this.callReadConfiguration(e,t).pipe(this.converterService.pipeable(je))}readConfigurationOverview(e){return this.callReadConfigurationOverview(e).pipe(this.converterService.pipeable(cr))}updateAttribute(e){let t=this.converterService.convert(e,or);return this.callUpdateAttribute(t).pipe(this.converterService.pipeable(je))}updateValueQuantity(e){let t=this.converterService.convert(e,ar);return this.callUpdateValue(t).pipe(this.converterService.pipeable(je))}readConfigurationForCartEntry(e){return this.callReadConfigurationForCartEntry(e).pipe(this.converterService.pipeable(je))}readConfigurationForOrderEntry(e){return this.callReadConfigurationForOrderEntry(e).pipe(this.converterService.pipeable(je))}callCreateConfiguration(e){let t=this.occEndpointsService.buildUrl("createCpqConfiguration",{urlParams:{productCode:e}});return this.http.get(t)}callReadConfiguration(e,t){let n=this.occEndpointsService.buildUrl("readCpqConfiguration",{urlParams:{configurationId:e},queryParams:t?{tabId:t}:void 0});return this.http.get(n)}callReadConfigurationOverview(e){let t=this.occEndpointsService.buildUrl("readCpqConfigurationOverview",{urlParams:{configurationId:e}});return this.http.get(t)}callUpdateAttribute(e){let t=this.occEndpointsService.buildUrl("updateCpqAttribute",{urlParams:{configurationId:e.configurationId,attributeCode:e.standardAttributeCode},queryParams:{tabId:e.tabId}});return this.http.patch(t,e.changeAttributeValue)}callUpdateValue(e){let t=this.occEndpointsService.buildUrl("updateCpqAttributeValueQuantity",{urlParams:{configurationId:e.configurationId,attributeCode:e.standardAttributeCode,attributeValueId:e.attributeValueId},queryParams:{tabId:e.tabId}});return this.http.patch(t,{quantity:e.quantity})}callReadConfigurationForCartEntry(e){let t=this.occEndpointsService.buildUrl("readCpqConfigurationForCartEntryFull",{urlParams:{userId:e.userId,cartId:e.cartId,cartEntryNumber:e.cartEntryNumber}});return this.http.get(t)}callReadConfigurationForOrderEntry(e){let t,n=e.owner.type;return n===oe.OwnerType.ORDER_ENTRY?t=this.occEndpointsService.buildUrl("readCpqConfigurationForOrderEntryFull",{urlParams:{userId:e.userId,orderId:e.orderId,orderEntryNumber:e.orderEntryNumber}}):n===oe.OwnerType.QUOTE_ENTRY?t=this.occEndpointsService.buildUrl("readCpqConfigurationForQuoteEntryFull",{urlParams:{userId:e.userId,quoteId:e.orderId,quoteEntryNumber:e.orderEntryNumber}}):t=this.occEndpointsService.buildUrl("readCpqConfigurationForSavedCartEntryFull",{urlParams:{userId:e.userId,savedCartId:e.orderId,entryNumber:e.orderEntryNumber}}),this.http.get(t)}static{this.\u0275fac=function(t){return new(t||i)(D(Ht),D(di),D(dt))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),ff=(()=>{class i{constructor(e){this.cpqOccService=e}getConfiguratorType(){return"CLOUDCPQCONFIGURATOR"}supportsCpqOverOcc(){return!0}createConfiguration(e){return this.cpqOccService.createConfiguration(e.id).pipe(E(t=>(t.owner=e,t)))}readConfiguration(e,t,n){return this.cpqOccService.readConfiguration(e,t).pipe(E(r=>(r.owner=n,r)))}updateConfiguration(e){return(e.updateType===d.UpdateType.VALUE_QUANTITY?this.cpqOccService.updateValueQuantity:this.cpqOccService.updateAttribute).call(this.cpqOccService,e).pipe(E(n=>(n.owner=e.owner,n)))}updateConfigurationOverview(){throw new Error("Update the configuration overview is not supported for the CPQ configurator")}addToCart(e){return this.cpqOccService.addToCart(e)}readConfigurationForCartEntry(e){return this.cpqOccService.readConfigurationForCartEntry(e).pipe(E(t=>(t.owner=e.owner,t)))}updateConfigurationForCartEntry(e){return this.cpqOccService.updateCartEntry(e)}readConfigurationForOrderEntry(e){return this.cpqOccService.readConfigurationForOrderEntry(e).pipe(E(t=>(t.owner=e.owner,t)))}readPriceSummary(e){return me(e)}getConfigurationOverview(e){return this.cpqOccService.readConfigurationOverview(e)}searchVariants(){throw new Error("searchVariants is not supported for the CPQ configurator")}static{this.\u0275fac=function(t){return new(t||i)(D(ya))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac})}}return i})(),mf=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[Pr(gf),{provide:Ca,useExisting:pf,multi:!0},{provide:ha,useExisting:df,multi:!0},{provide:We.CONFIGURATOR_ADAPTER_LIST,useClass:ff,multi:!0}],imports:[B]})}}return i})(),vf=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=$({token:i,factory:function(t){let n=null;return t?n=new(t||i):n=D(ke),n},providedIn:"root"})}}return i})(),_f=(()=>{class i{constructor(e){this.config=e,this.logger=X(Ne),this.CPQ_MARKER_HEADER={headers:new Kt({[no]:"x"})}}buildUrl(e,t,n){let r=this.config.backend?.cpq?.endpoints,c;switch(e){case"configurationInit":c=r?.configurationInit;break;case"configurationDisplay":c=r?.configurationDisplay;break;case"attributeUpdate":c=r?.attributeUpdate;break;case"valueUpdate":c=r?.valueUpdate}c||(c="configurations",this.logger.warn(`${e} endpoint configuration missing for cpq backend, please provide it via key: "backend.cpq.endpoints.${e}"`));let f=this.config.backend?.cpq?.prefix+c;return f=t?Vr.resolve(f,t):f,f=n?this.appendQueryParameters(f,n):f,f}appendQueryParameters(e,t){let n=e+"?";return t.forEach((r,c)=>{n=c>0?n+"&":n,n=`${n}${r.name}=${r.value}`}),n}static{this.\u0275fac=function(t){return new(t||i)(D(vf))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Cf=(()=>{class i{constructor(e,t,n){this.http=e,this.converterService=t,this.endpointService=n}createConfiguration(e){return this.callConfigurationInit(e).pipe(R(t=>this.callConfigurationDisplay(t.configurationId).pipe(this.converterService.pipeable(je),E(n=>F(A({},n),{configId:t.configurationId})))))}readConfiguration(e,t){return this.callConfigurationDisplay(e,t).pipe(this.converterService.pipeable(je),E(n=>F(A({},n),{configId:e})))}readConfigurationOverview(e){return this.getConfigurationWithAllTabsAndAttributes(e).pipe(this.converterService.pipeable(cr),E(t=>F(A({},t),{configId:e})))}getConfigurationWithAllTabsAndAttributes(e){return this.callConfigurationDisplay(e).pipe(R(t=>{let n=[];return t.tabs&&t.tabs.length>0?t.tabs.forEach(r=>{r.isSelected?n.push(me(t)):n.push(this.callConfigurationDisplay(e,r.id.toString()))}):n.push(me(t)),ur(n)}),E(this.mergeTabResults))}mergeTabResults(e){let t=A({},e[e.length-1]);return t.attributes=void 0,t.tabs=[],e.forEach(n=>{let r,c=n.tabs?.find(f=>f.isSelected);c&&n.tabs&&n.tabs.length>0?r=A({},c):r={id:0},r.attributes=n.attributes,t.tabs?.push(r)}),t}updateAttribute(e){let t=this.converterService.convert(e,or);return this.callUpdateAttribute(t).pipe(R(()=>this.callConfigurationDisplay(e.configId,t.tabId).pipe(this.converterService.pipeable(je),E(n=>F(A({},n),{configId:e.configId})))))}updateValueQuantity(e){let t=this.converterService.convert(e,ar);return this.callUpdateValue(t).pipe(R(()=>this.callConfigurationDisplay(e.configId,t.tabId).pipe(this.converterService.pipeable(je),E(n=>F(A({},n),{configId:e.configId})))))}callUpdateValue(e){return this.http.patch(this.endpointService.buildUrl("valueUpdate",{configId:e.configurationId,attributeCode:e.standardAttributeCode,valueCode:e.attributeValueId}),{Quantity:e.quantity},this.endpointService.CPQ_MARKER_HEADER)}callConfigurationInit(e){return this.http.post(this.endpointService.buildUrl("configurationInit"),{ProductSystemId:e},this.endpointService.CPQ_MARKER_HEADER)}callConfigurationDisplay(e,t){return this.http.get(this.endpointService.buildUrl("configurationDisplay",{configId:e},t?[{name:"tabId",value:t}]:void 0),this.endpointService.CPQ_MARKER_HEADER)}callUpdateAttribute(e){return this.http.patch(this.endpointService.buildUrl("attributeUpdate",{configId:e.configurationId,attributeCode:e.standardAttributeCode}),e.changeAttributeValue,this.endpointService.CPQ_MARKER_HEADER)}static{this.\u0275fac=function(t){return new(t||i)(D(Ht),D(dt),D(_f))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),hf=(()=>{class i{constructor(e,t){this.cpqRestService=e,this.cpqOccService=t}getConfiguratorType(){return"CLOUDCPQCONFIGURATOR"}supportsCpqOverOcc(){return!1}createConfiguration(e){return this.cpqRestService.createConfiguration(e.id).pipe(E(t=>(t.owner=e,t)))}readConfiguration(e,t,n){return this.cpqRestService.readConfiguration(e,t).pipe(E(r=>(r.owner=n,r)))}updateConfiguration(e){return(e.updateType===d.UpdateType.VALUE_QUANTITY?this.cpqRestService.updateValueQuantity:this.cpqRestService.updateAttribute).call(this.cpqRestService,e).pipe(E(n=>(n.owner=e.owner,n)))}updateConfigurationOverview(){throw new Error("Update the configuration overview is not supported for the CPQ configurator")}addToCart(e){return this.cpqOccService.addToCart(e)}readConfigurationForCartEntry(e){return this.cpqOccService.getConfigIdForCartEntry(e).pipe(R(t=>this.cpqRestService.readConfiguration(t).pipe(E(n=>(n.owner=e.owner,n)))))}updateConfigurationForCartEntry(e){return this.cpqOccService.updateCartEntry(e)}readConfigurationForOrderEntry(e){return this.cpqOccService.getConfigIdForOrderEntry(e).pipe(R(t=>this.cpqRestService.readConfiguration(t).pipe(E(n=>(n.owner=e.owner,n)))))}readPriceSummary(e){return me(e)}getConfigurationOverview(e){return this.cpqRestService.readConfigurationOverview(e)}searchVariants(){throw new Error("searchVariants is not supported for the CPQ configurator")}static{this.\u0275fac=function(t){return new(t||i)(D(Cf),D(ya))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac})}}return i})(),yf={backend:{cpq:{endpoints:{configurationInit:"configurations",configurationDisplay:"configurations/${configId}/display",attributeUpdate:"configurations/${configId}/attributes/${attributeCode}",valueUpdate:"configurations/${configId}/attributes/${attributeCode}/attributeValues/${valueCode}"},prefix:"/api/configuration/v1/"}}},bf=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({providers:[{provide:We.CONFIGURATOR_ADAPTER_LIST,useClass:hf,multi:!0},z(yf)],imports:[B]})}}return i})(),ba=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({imports:[lf,mf,bf]})}}return i})();var x0=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=V({imports:[va,ba]})}}return i})();export{x0 as RulebasedConfiguratorWrapperModule};
